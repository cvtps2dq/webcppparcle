parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Y+NE":[function(require,module,exports) {
var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(n){if(0<=n&&n<e.length)return e[n];throw new TypeError("Must be between 0 and 63: "+n)},exports.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1};
},{}],"iWlY":[function(require,module,exports) {
var e=require("./base64"),r=5,n=1<<r,o=n-1,t=n;function i(e){return e<0?1+(-e<<1):0+(e<<1)}function d(e){var r=e>>1;return 1==(1&e)?-r:r}exports.encode=function(n){var d,a="",c=i(n);do{d=c&o,(c>>>=r)>0&&(d|=t),a+=e.encode(d)}while(c>0);return a},exports.decode=function(n,i,a){var c,u,h=n.length,s=0,v=0;do{if(i>=h)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(u=e.decode(n.charCodeAt(i++))))throw new Error("Invalid base64 digit: "+n.charAt(i-1));c=!!(u&t),s+=(u&=o)<<v,v+=r}while(c);a.value=d(s),a.rest=i};
},{"./base64":"Y+NE"}],"XUQW":[function(require,module,exports) {
function e(e,r,n){if(r in e)return e[r];if(3===arguments.length)return n;throw new Error('"'+r+'" is a required argument.')}exports.getArg=e;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,n=/^data:.+\,.+$/;function t(e){var n=e.match(r);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var r="";return e.scheme&&(r+=e.scheme+":"),r+="//",e.auth&&(r+=e.auth+"@"),e.host&&(r+=e.host),e.port&&(r+=":"+e.port),e.path&&(r+=e.path),r}function a(e){var r=e,n=t(e);if(n){if(!n.path)return e;r=n.path}for(var a,i=exports.isAbsolute(r),u=r.split(/\/+/),c=0,s=u.length-1;s>=0;s--)"."===(a=u[s])?u.splice(s,1):".."===a?c++:c>0&&(""===a?(u.splice(s+1,c),c=0):(u.splice(s,2),c--));return""===(r=u.join("/"))&&(r=i?"/":"."),n?(n.path=r,o(n)):r}function i(e,r){""===e&&(e="."),""===r&&(r=".");var i=t(r),u=t(e);if(u&&(e=u.path||"/"),i&&!i.scheme)return u&&(i.scheme=u.scheme),o(i);if(i||r.match(n))return r;if(u&&!u.host&&!u.path)return u.host=r,o(u);var c="/"===r.charAt(0)?r:a(e.replace(/\/+$/,"")+"/"+r);return u?(u.path=c,o(u)):c}function u(e,r){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==r.indexOf(e+"/");){var t=e.lastIndexOf("/");if(t<0)return r;if((e=e.slice(0,t)).match(/^([^\/]+:\/)?\/*$/))return r;++n}return Array(n+1).join("../")+r.substr(e.length+1)}exports.urlParse=t,exports.urlGenerate=o,exports.normalize=a,exports.join=i,exports.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(r)},exports.relative=u;var c=!("__proto__"in Object.create(null));function s(e){return e}function l(e){return f(e)?"$"+e:e}function h(e){return f(e)?e.slice(1):e}function f(e){if(!e)return!1;var r=e.length;if(r<9)return!1;if(95!==e.charCodeAt(r-1)||95!==e.charCodeAt(r-2)||111!==e.charCodeAt(r-3)||116!==e.charCodeAt(r-4)||111!==e.charCodeAt(r-5)||114!==e.charCodeAt(r-6)||112!==e.charCodeAt(r-7)||95!==e.charCodeAt(r-8)||95!==e.charCodeAt(r-9))return!1;for(var n=r-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function p(e,r,n){var t=e.source-r.source;return 0!==t?t:0!==(t=e.originalLine-r.originalLine)?t:0!==(t=e.originalColumn-r.originalColumn)||n?t:0!==(t=e.generatedColumn-r.generatedColumn)?t:0!==(t=e.generatedLine-r.generatedLine)?t:e.name-r.name}function g(e,r,n){var t=e.generatedLine-r.generatedLine;return 0!==t?t:0!==(t=e.generatedColumn-r.generatedColumn)||n?t:0!==(t=e.source-r.source)?t:0!==(t=e.originalLine-r.originalLine)?t:0!==(t=e.originalColumn-r.originalColumn)?t:e.name-r.name}function m(e,r){return e===r?0:e>r?1:-1}function d(e,r){var n=e.generatedLine-r.generatedLine;return 0!==n?n:0!==(n=e.generatedColumn-r.generatedColumn)?n:0!==(n=m(e.source,r.source))?n:0!==(n=e.originalLine-r.originalLine)?n:0!==(n=e.originalColumn-r.originalColumn)?n:m(e.name,r.name)}exports.toSetString=c?s:l,exports.fromSetString=c?s:h,exports.compareByOriginalPositions=p,exports.compareByGeneratedPositionsDeflated=g,exports.compareByGeneratedPositionsInflated=d;
},{}],"dgh+":[function(require,module,exports) {
var t=require("./util"),e=Object.prototype.hasOwnProperty,r="undefined"!=typeof Map;function n(){this._array=[],this._set=r?new Map:Object.create(null)}n.fromArray=function(t,e){for(var r=new n,i=0,s=t.length;i<s;i++)r.add(t[i],e);return r},n.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(n,i){var s=r?n:t.toSetString(n),o=r?this.has(n):e.call(this._set,s),a=this._array.length;o&&!i||this._array.push(n),o||(r?this._set.set(n,a):this._set[s]=a)},n.prototype.has=function(n){if(r)return this._set.has(n);var i=t.toSetString(n);return e.call(this._set,i)},n.prototype.indexOf=function(n){if(r){var i=this._set.get(n);if(i>=0)return i}else{var s=t.toSetString(n);if(e.call(this._set,s))return this._set[s]}throw new Error('"'+n+'" is not in the set.')},n.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},n.prototype.toArray=function(){return this._array.slice()},exports.ArraySet=n;
},{"./util":"XUQW"}],"AUTm":[function(require,module,exports) {
var t=require("./util");function e(e,r){var a=e.generatedLine,n=r.generatedLine,o=e.generatedColumn,s=r.generatedColumn;return n>a||n==a&&s>=o||t.compareByGeneratedPositionsInflated(e,r)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},r.prototype.add=function(t){e(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},exports.MappingList=r;
},{"./util":"XUQW"}],"1Wwh":[function(require,module,exports) {
var e=require("./base64-vlq"),n=require("./util"),o=require("./array-set").ArraySet,t=require("./mapping-list").MappingList;function i(e){e||(e={}),this._file=n.getArg(e,"file",null),this._sourceRoot=n.getArg(e,"sourceRoot",null),this._skipValidation=n.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new t,this._sourcesContents=null}i.prototype._version=3,i.fromSourceMap=function(e){var o=e.sourceRoot,t=new i({file:e.file,sourceRoot:o});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=o&&(i.source=n.relative(o,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),t.addMapping(i)}),e.sources.forEach(function(n){var o=e.sourceContentFor(n);null!=o&&t.setSourceContent(n,o)}),t},i.prototype.addMapping=function(e){var o=n.getArg(e,"generated"),t=n.getArg(e,"original",null),i=n.getArg(e,"source",null),r=n.getArg(e,"name",null);this._skipValidation||this._validateMapping(o,t,i,r),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=r&&(r=String(r),this._names.has(r)||this._names.add(r)),this._mappings.add({generatedLine:o.line,generatedColumn:o.column,originalLine:null!=t&&t.line,originalColumn:null!=t&&t.column,source:i,name:r})},i.prototype.setSourceContent=function(e,o){var t=e;null!=this._sourceRoot&&(t=n.relative(this._sourceRoot,t)),null!=o?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(t)]=o):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(t)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(e,t,i){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=n.relative(s,r));var l=new o,u=new o;this._mappings.unsortedForEach(function(o){if(o.source===r&&null!=o.originalLine){var t=e.originalPositionFor({line:o.originalLine,column:o.originalColumn});null!=t.source&&(o.source=t.source,null!=i&&(o.source=n.join(i,o.source)),null!=s&&(o.source=n.relative(s,o.source)),o.originalLine=t.line,o.originalColumn=t.column,null!=t.name&&(o.name=t.name))}var a=o.source;null==a||l.has(a)||l.add(a);var c=o.name;null==c||u.has(c)||u.add(c)},this),this._sources=l,this._names=u,e.sources.forEach(function(o){var t=e.sourceContentFor(o);null!=t&&(null!=i&&(o=n.join(i,o)),null!=s&&(o=n.relative(s,o)),this.setSourceContent(o,t))},this)},i.prototype._validateMapping=function(e,n,o,t){if(n&&"number"!=typeof n.line&&"number"!=typeof n.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||n||o||t)&&!(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&o))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:o,original:n,name:t}))},i.prototype._serializeMappings=function(){for(var o,t,i,r,s=0,l=1,u=0,a=0,c=0,p=0,g="",h=this._mappings.toArray(),m=0,f=h.length;m<f;m++){if(o="",(t=h[m]).generatedLine!==l)for(s=0;t.generatedLine!==l;)o+=";",l++;else if(m>0){if(!n.compareByGeneratedPositionsInflated(t,h[m-1]))continue;o+=","}o+=e.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(r=this._sources.indexOf(t.source),o+=e.encode(r-p),p=r,o+=e.encode(t.originalLine-1-a),a=t.originalLine-1,o+=e.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(i=this._names.indexOf(t.name),o+=e.encode(i-c),c=i)),g+=o}return g},i.prototype._generateSourcesContent=function(e,o){return e.map(function(e){if(!this._sourcesContents)return null;null!=o&&(e=n.relative(o,e));var t=n.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},i.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},exports.SourceMapGenerator=i;
},{"./base64-vlq":"iWlY","./util":"XUQW","./array-set":"dgh+","./mapping-list":"AUTm"}],"rdpJ":[function(require,module,exports) {
function r(t,e,E,n,o,_){var U=Math.floor((e-t)/2)+t,s=o(E,n[U],!0);return 0===s?U:s>0?e-U>1?r(U,e,E,n,o,_):_==exports.LEAST_UPPER_BOUND?e<n.length?e:-1:U:U-t>1?r(t,U,E,n,o,_):_==exports.LEAST_UPPER_BOUND?U:t<0?-1:t}exports.GREATEST_LOWER_BOUND=1,exports.LEAST_UPPER_BOUND=2,exports.search=function(t,e,E,n){if(0===e.length)return-1;var o=r(-1,e.length,t,e,E,n||exports.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===E(e[o],e[o-1],!0);)--o;return o};
},{}],"lFls":[function(require,module,exports) {
function n(n,r,t){var o=n[r];n[r]=n[t],n[t]=o}function r(n,r){return Math.round(n+Math.random()*(r-n))}function t(o,a,u,f){if(u<f){var i=u-1;n(o,r(u,f),f);for(var c=o[f],v=u;v<f;v++)a(o[v],c)<=0&&n(o,i+=1,v);n(o,i+1,v);var e=i+1;t(o,a,u,e-1),t(o,a,e+1,f)}}exports.quickSort=function(n,r){t(n,r,0,n.length-1)};
},{}],"fmOz":[function(require,module,exports) {
var e=require("./util"),n=require("./binary-search"),r=require("./array-set").ArraySet,t=require("./base64-vlq"),o=require("./quick-sort").quickSort;function i(e){var n=e;return"string"==typeof e&&(n=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=n.sections?new u(n):new s(n)}function s(n){var t=n;"string"==typeof n&&(t=JSON.parse(n.replace(/^\)\]\}'/,"")));var o=e.getArg(t,"version"),i=e.getArg(t,"sources"),s=e.getArg(t,"names",[]),a=e.getArg(t,"sourceRoot",null),u=e.getArg(t,"sourcesContent",null),l=e.getArg(t,"mappings"),g=e.getArg(t,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i=i.map(String).map(e.normalize).map(function(n){return a&&e.isAbsolute(a)&&e.isAbsolute(n)?e.relative(a,n):n}),this._names=r.fromArray(s.map(String),!0),this._sources=r.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=l,this.file=g}function a(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function u(n){var t=n;"string"==typeof n&&(t=JSON.parse(n.replace(/^\)\]\}'/,"")));var o=e.getArg(t,"version"),s=e.getArg(t,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new r,this._names=new r;var a={line:-1,column:0};this._sections=s.map(function(n){if(n.url)throw new Error("Support for url field in sections not implemented.");var r=e.getArg(n,"offset"),t=e.getArg(r,"line"),o=e.getArg(r,"column");if(t<a.line||t===a.line&&o<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=r,{generatedOffset:{generatedLine:t+1,generatedColumn:o+1},consumer:new i(e.getArg(n,"map"))}})}i.fromSourceMap=function(e){return s.fromSourceMap(e)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return";"===r||","===r},i.prototype._parseMappings=function(e,n){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(n,r,t){var o,s=r||null;switch(t||i.GENERATED_ORDER){case i.GENERATED_ORDER:o=this._generatedMappings;break;case i.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(n){var r=null===n.source?null:this._sources.at(n.source);return null!=r&&null!=a&&(r=e.join(a,r)),{source:r,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:this._names.at(n.name)}},this).forEach(n,s)},i.prototype.allGeneratedPositionsFor=function(r){var t=e.getArg(r,"line"),o={source:e.getArg(r,"source"),originalLine:t,originalColumn:e.getArg(r,"column",0)};if(null!=this.sourceRoot&&(o.source=e.relative(this.sourceRoot,o.source)),!this._sources.has(o.source))return[];o.source=this._sources.indexOf(o.source);var i=[],s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,n.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===r.column)for(var u=a.originalLine;a&&a.originalLine===u;)i.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var l=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==l;)i.push({line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return i},exports.SourceMapConsumer=i,s.prototype=Object.create(i.prototype),s.prototype.consumer=i,s.fromSourceMap=function(n){var t=Object.create(s.prototype),i=t._names=r.fromArray(n._names.toArray(),!0),u=t._sources=r.fromArray(n._sources.toArray(),!0);t.sourceRoot=n._sourceRoot,t.sourcesContent=n._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=n._file;for(var l=n._mappings.toArray().slice(),g=t.__generatedMappings=[],p=t.__originalMappings=[],c=0,h=l.length;c<h;c++){var m=l[c],f=new a;f.generatedLine=m.generatedLine,f.generatedColumn=m.generatedColumn,m.source&&(f.source=u.indexOf(m.source),f.originalLine=m.originalLine,f.originalColumn=m.originalColumn,m.name&&(f.name=i.indexOf(m.name)),p.push(f)),g.push(f)}return o(t.__originalMappings,e.compareByOriginalPositions),t},s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){return this._sources.toArray().map(function(n){return null!=this.sourceRoot?e.join(this.sourceRoot,n):n},this)}}),s.prototype._parseMappings=function(n,r){for(var i,s,u,l,g,p=1,c=0,h=0,m=0,f=0,d=0,_=n.length,C=0,A={},v={},y=[],L=[];C<_;)if(";"===n.charAt(C))p++,C++,c=0;else if(","===n.charAt(C))C++;else{for((i=new a).generatedLine=p,l=C;l<_&&!this._charIsMappingSeparator(n,l);l++);if(u=A[s=n.slice(C,l)])C+=s.length;else{for(u=[];C<l;)t.decode(n,C,v),g=v.value,C=v.rest,u.push(g);if(2===u.length)throw new Error("Found a source, but no line and column");if(3===u.length)throw new Error("Found a source and line, but no column");A[s]=u}i.generatedColumn=c+u[0],c=i.generatedColumn,u.length>1&&(i.source=f+u[1],f+=u[1],i.originalLine=h+u[2],h=i.originalLine,i.originalLine+=1,i.originalColumn=m+u[3],m=i.originalColumn,u.length>4&&(i.name=d+u[4],d+=u[4])),L.push(i),"number"==typeof i.originalLine&&y.push(i)}o(L,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=L,o(y,e.compareByOriginalPositions),this.__originalMappings=y},s.prototype._findMapping=function(e,r,t,o,i,s){if(e[t]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[t]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return n.search(e,r,i,s)},s.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},s.prototype.originalPositionFor=function(n){var r={generatedLine:e.getArg(n,"line"),generatedColumn:e.getArg(n,"column")},t=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(n,"bias",i.GREATEST_LOWER_BOUND));if(t>=0){var o=this._generatedMappings[t];if(o.generatedLine===r.generatedLine){var s=e.getArg(o,"source",null);null!==s&&(s=this._sources.at(s),null!=this.sourceRoot&&(s=e.join(this.sourceRoot,s)));var a=e.getArg(o,"name",null);return null!==a&&(a=this._names.at(a)),{source:s,line:e.getArg(o,"originalLine",null),column:e.getArg(o,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},s.prototype.sourceContentFor=function(n,r){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(n=e.relative(this.sourceRoot,n)),this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];var t;if(null!=this.sourceRoot&&(t=e.urlParse(this.sourceRoot))){var o=n.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!t.path||"/"==t.path)&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(r)return null;throw new Error('"'+n+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(n){var r=e.getArg(n,"source");if(null!=this.sourceRoot&&(r=e.relative(this.sourceRoot,r)),!this._sources.has(r))return{line:null,column:null,lastColumn:null};var t={source:r=this._sources.indexOf(r),originalLine:e.getArg(n,"line"),originalColumn:e.getArg(n,"column")},o=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(n,"bias",i.GREATEST_LOWER_BOUND));if(o>=0){var s=this._originalMappings[o];if(s.source===t.source)return{line:e.getArg(s,"generatedLine",null),column:e.getArg(s,"generatedColumn",null),lastColumn:e.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},exports.BasicSourceMapConsumer=s,u.prototype=Object.create(i.prototype),u.prototype.constructor=i,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var r=0;r<this._sections[n].consumer.sources.length;r++)e.push(this._sections[n].consumer.sources[r]);return e}}),u.prototype.originalPositionFor=function(r){var t={generatedLine:e.getArg(r,"line"),generatedColumn:e.getArg(r,"column")},o=n.search(t,this._sections,function(e,n){var r=e.generatedLine-n.generatedOffset.generatedLine;return r||e.generatedColumn-n.generatedOffset.generatedColumn}),i=this._sections[o];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:r.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r].consumer.sourceContentFor(e,!0);if(t)return t}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(n){for(var r=0;r<this._sections.length;r++){var t=this._sections[r];if(-1!==t.consumer.sources.indexOf(e.getArg(n,"source"))){var o=t.consumer.generatedPositionFor(n);if(o)return{line:o.line+(t.generatedOffset.generatedLine-1),column:o.column+(t.generatedOffset.generatedLine===o.line?t.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},u.prototype._parseMappings=function(n,r){this.__generatedMappings=[],this.__originalMappings=[];for(var t=0;t<this._sections.length;t++)for(var i=this._sections[t],s=i.consumer._generatedMappings,a=0;a<s.length;a++){var u=s[a],l=i.consumer._sources.at(u.source);null!==i.consumer.sourceRoot&&(l=e.join(i.consumer.sourceRoot,l)),this._sources.add(l),l=this._sources.indexOf(l);var g=i.consumer._names.at(u.name);this._names.add(g),g=this._names.indexOf(g);var p={source:l,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:g};this.__generatedMappings.push(p),"number"==typeof p.originalLine&&this.__originalMappings.push(p)}o(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),o(this.__originalMappings,e.compareByOriginalPositions)},exports.IndexedSourceMapConsumer=u;
},{"./util":"XUQW","./binary-search":"rdpJ","./array-set":"dgh+","./base64-vlq":"iWlY","./quick-sort":"lFls"}],"Qm02":[function(require,module,exports) {
var n=require("./source-map-generator").SourceMapGenerator,e=require("./util"),r=/(\r?\n)/,t=10,o="$$$isSourceNode$$$";function i(n,e,r,t,i){this.children=[],this.sourceContents={},this.line=null==n?null:n,this.column=null==e?null:e,this.source=null==r?null:r,this.name=null==i?null:i,this[o]=!0,null!=t&&this.add(t)}i.fromStringWithSourceMap=function(n,t,o){var l=new i,u=n.split(r),s=0,c=function(){return n()+(n()||"");function n(){return s<u.length?u[s++]:void 0}},a=1,h=0,d=null;return t.eachMapping(function(n){if(null!==d){if(!(a<n.generatedLine)){var e=(r=u[s]).substr(0,n.generatedColumn-h);return u[s]=r.substr(n.generatedColumn-h),h=n.generatedColumn,p(d,e),void(d=n)}p(d,c()),a++,h=0}for(;a<n.generatedLine;)l.add(c()),a++;if(h<n.generatedColumn){var r=u[s];l.add(r.substr(0,n.generatedColumn)),u[s]=r.substr(n.generatedColumn),h=n.generatedColumn}d=n},this),s<u.length&&(d&&p(d,c()),l.add(u.splice(s).join(""))),t.sources.forEach(function(n){var r=t.sourceContentFor(n);null!=r&&(null!=o&&(n=e.join(o,n)),l.setSourceContent(n,r))}),l;function p(n,r){if(null===n||void 0===n.source)l.add(r);else{var t=o?e.join(o,n.source):n.source;l.add(new i(n.originalLine,n.originalColumn,t,r,n.name))}}},i.prototype.add=function(n){if(Array.isArray(n))n.forEach(function(n){this.add(n)},this);else{if(!n[o]&&"string"!=typeof n)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+n);n&&this.children.push(n)}return this},i.prototype.prepend=function(n){if(Array.isArray(n))for(var e=n.length-1;e>=0;e--)this.prepend(n[e]);else{if(!n[o]&&"string"!=typeof n)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+n);this.children.unshift(n)}return this},i.prototype.walk=function(n){for(var e,r=0,t=this.children.length;r<t;r++)(e=this.children[r])[o]?e.walk(n):""!==e&&n(e,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(n){var e,r,t=this.children.length;if(t>0){for(e=[],r=0;r<t-1;r++)e.push(this.children[r]),e.push(n);e.push(this.children[r]),this.children=e}return this},i.prototype.replaceRight=function(n,e){var r=this.children[this.children.length-1];return r[o]?r.replaceRight(n,e):"string"==typeof r?this.children[this.children.length-1]=r.replace(n,e):this.children.push("".replace(n,e)),this},i.prototype.setSourceContent=function(n,r){this.sourceContents[e.toSetString(n)]=r},i.prototype.walkSourceContents=function(n){for(var r=0,t=this.children.length;r<t;r++)this.children[r][o]&&this.children[r].walkSourceContents(n);var i=Object.keys(this.sourceContents);for(r=0,t=i.length;r<t;r++)n(e.fromSetString(i[r]),this.sourceContents[i[r]])},i.prototype.toString=function(){var n="";return this.walk(function(e){n+=e}),n},i.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},o=new n(e),i=!1,l=null,u=null,s=null,c=null;return this.walk(function(n,e){r.code+=n,null!==e.source&&null!==e.line&&null!==e.column?(l===e.source&&u===e.line&&s===e.column&&c===e.name||o.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:r.line,column:r.column},name:e.name}),l=e.source,u=e.line,s=e.column,c=e.name,i=!0):i&&(o.addMapping({generated:{line:r.line,column:r.column}}),l=null,i=!1);for(var a=0,h=n.length;a<h;a++)n.charCodeAt(a)===t?(r.line++,r.column=0,a+1===h?(l=null,i=!1):i&&o.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:r.line,column:r.column},name:e.name})):r.column++}),this.walkSourceContents(function(n,e){o.setSourceContent(n,e)}),{code:r.code,map:o}},exports.SourceNode=i;
},{"./source-map-generator":"1Wwh","./util":"XUQW"}],"aRf0":[function(require,module,exports) {
exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator,exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer,exports.SourceNode=require("./lib/source-node").SourceNode;
},{"./lib/source-map-generator":"1Wwh","./lib/source-map-consumer":"fmOz","./lib/source-node":"Qm02"}],"HcQt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.accessControl=e}}exports.Symbol=e;class t extends e{}var s;exports.OverloadSymbol=t,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.LOCAL=1]="LOCAL",e[e.LOCAL_REF=2]="LOCAL_REF",e[e.STACK=3]="STACK",e[e.MEMORY_DATA=4]="MEMORY_DATA",e[e.MEMORY_BSS=5]="MEMORY_BSS",e[e.MEMORY_EXTERN=6]="MEMORY_EXTERN",e[e.RVALUE=7]="RVALUE",e[e.CONSTANT=8]="CONSTANT",e[e.GLOBAL_SP=9]="GLOBAL_SP"}(s=exports.AddressType||(exports.AddressType={}));class r extends e{constructor(e,t,s,r,i,a,h){super(h),this.shortName=e,this.fullName=t,this.fileName=s,this.type=r,this.addressType=i,this.location=a}toString(){return`${this.shortName}:${this.type.toString()}`}isDefine(){return this.addressType!==s.MEMORY_EXTERN}getType(){return this.type}}exports.Variable=r;class i extends t{constructor(e,t,s,r,i,a,h,o,n){super(o),this.shortName=e,this.fullName=t,this.fileName=s,this.type=r,this.isLibCall=a,this.hasDefine=h,this.parameterInits=i,this.$sp=0,this.parametersSize=r.parameterTypes.map(e=>e.length).reduce((e,t)=>e+t,0),this.declareActiveScopes=n}isDefine(){return this.hasDefine}getType(){return this.type}getIndexName(){return this.shortName.split("@")[0]}getFullName(){return this.fullName}}exports.FunctionEntity=i;
},{}],"Rt13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../common/symbol");class e extends t.Symbol{constructor(){super(r.Public)}equals(t){return this.constructor===t.constructor}compatWith(t){return this.constructor===t.constructor}isDefine(){return!1}getType(){return this}}var r;function o(t){return"public"===t?r.Public:"protected"===t?r.Protected:r.Private}exports.Type=e,function(t){t[t.Public=0]="Public",t[t.Private=1]="Private",t[t.Protected=2]="Protected",t[t.Unknown=3]="Unknown"}(r=exports.AccessControl||(exports.AccessControl={})),exports.getAccessControlFromString=o;
},{"../common/symbol":"HcQt"}],"PoXi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,s,e){this.offset=t,this.line=s,this.column=e}toString(){return`(${this.line}:${this.column})`}}exports.Position=t;class s{constructor(t,s,e,o){this.fileName=t,this.source=s,this.start=e,this.end=o}toString(){return`${this.start.line}(${this.start.column}) - ${this.end.line}(${this.end.column})`}}exports.SourceLocation=s,exports.EmptyLocation=new s("","",new t(1,-1,1),new t(1,-1,1));class e{static getEmptyLocation(){return exports.EmptyLocation}constructor(t){this.location=t}}exports.Node=e;class o extends e{constructor(t){super(t)}}exports.Directive=o;class r extends o{constructor(t){super(t)}}exports.ClassDirective=r;
},{}],"nOPH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("./node");class e extends Error{}exports.FatalError=e;class t extends Error{}exports.InternalError=t;class o extends Error{}exports.LinkerError=o;class s extends Error{}exports.RuntimeError=s;class n extends Error{}exports.EmitError=n;class a extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.node=t,this.location=t?t.location:new r.SourceLocation("","",new r.Position(0,0,0),new r.Position(0,0,0)),this.errorLine=""}toString(){return`${this.name}: ${this.message} at ${this.location.start.line}:${this.location.start.column}`}}exports.CompilerError=a;class c extends a{}exports.TypeError=c;class i extends a{}exports.SyntaxError=i;class p extends a{}exports.LanguageError=p;class x extends a{}exports.PreprocessingError=x;class l extends Error{}function u(r,t){if(r instanceof Array)throw 0===r.length?new e(`the node expect to be ${t.prototype.constructor.name}`+", but actual is a empty array."):new i(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is a array of ${r[0].constructor.name}.`,r[0]);if(!(r instanceof t))throw new i(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is ${r.constructor.name}.`,r)}exports.PreprocessError=l,exports.assertType=u;
},{"./node":"PoXi"}],"Mjkt":[function(require,module,exports) {
"use strict";var e,r,t,s,n,u,o,a,c,i,_,l,f,d,p,g,m,x,$,v,b;function y(e,r){return Object.keys(e).map(e=>parseInt(e)).filter(e=>e).map(e=>[e,r])}function h(e,r){switch(e){case v.i32:switch(r){case v.i32:case v.u32:return null;case v.i64:case v.u64:return p.extend_s$i32;case v.f32:return m.convert_s$i32;case v.f64:return $.convert_s$i32}return null;case v.u32:switch(r){case v.i32:case v.u32:return null;case v.i64:case v.u64:return p.extend_u$i32;case v.f32:return m.convert_u$i32;case v.f64:return $.convert_u$i32}return null;case v.i64:switch(r){case v.i32:case v.u32:return f.wrap$i64;case v.i64:case v.u64:return null;case v.f32:return m.convert_s$i64;case v.f64:return $.convert_s$i64}return null;case v.u64:switch(r){case v.i32:case v.u32:return f.wrap$i64;case v.i64:case v.u64:return null;case v.f32:return m.convert_u$i64;case v.f64:return $.convert_u$i64}return null;case v.f32:switch(r){case v.i32:return f.trunc_s$f32;case v.u32:return f.trunc_u$f32;case v.i64:return p.trunc_s$f32;case v.u64:return p.trunc_u$f32;case v.f32:return null;case v.f64:return $.promote$f32}return null;case v.f64:switch(r){case v.i32:return f.trunc_s$f64;case v.u32:return f.trunc_u$f64;case v.i64:return p.trunc_s$f64;case v.u64:return p.trunc_u$f64;case v.f32:return m.demote$f64;case v.f64:return null}return null}return null}function q(e,r){switch(w(r)){case v.i32:switch(e){case"+":return a.add;case"-":return a.sub;case"*":return a.mul;case"/":return a.div_s;case"%":return a.rem_s;case"<":return a.lt_s;case">":return a.gt_s;case"<=":return a.le_s;case">=":return a.ge_s;case"==":return a.eq;case"!=":return a.ne;case"&":return a.and;case"|":return a.or;case"&&":return a.and;case"||":return a.or;case"^":return a.xor;case">>":case"<<":return a.shr_s;case"!":return l.eqz}return null;case v.u32:switch(e){case"+":return a.add;case"-":return a.sub;case"*":return a.mul;case"/":return a.div_u;case"%":return a.rem_u;case"<":return a.lt_u;case">":return a.gt_u;case"<=":return a.le_u;case">=":return a.ge_u;case"==":return a.eq;case"!=":return a.ne;case"&":return a.and;case"|":return a.or;case"^":return a.xor;case">>":case"<<":return a.shr_u;case"!":return l.eqz}return null;case v.i64:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_s;case"%":return c.rem_s;case"<":return c.lt_s;case">":return c.gt_s;case"<=":return c.le_s;case">=":return c.ge_s;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_s;case"!":return d.eqz}return null;case v.u64:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_u;case"%":return c.rem_u;case"<":return c.lt_u;case">":return c.gt_u;case"<=":return c.le_u;case">=":return c.ge_u;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_u}return null;case v.f32:switch(e){case"+":return i.add;case"-":return i.sub;case"*":return i.mul;case"/":return i.div;case"<":return i.lt;case">":return i.gt;case"<=":return i.le;case">=":return i.ge;case"==":return i.eq;case"!=":return i.ne}return null;case v.f64:switch(e){case"+":return _.add;case"-":return _.sub;case"*":return _.mul;case"/":return _.div;case"<":return _.lt;case">":return _.gt;case"<=":return _.le;case">=":return _.ge;case"==":return _.eq;case"!=":return _.ne}return null}return null}function w(e){switch(e){case v.u8:case v.u16:case v.u32:return v.u32;case v.i8:case v.i16:case v.i32:return v.i32;case v.f32:return v.f32;case v.f64:return v.f64;case v.i64:return v.i64;case v.u64:return v.u64}return v.none}function z(e){switch(e){case v.u8:case v.u16:case v.u32:case v.i8:case v.i16:case v.i32:return v.i32;case v.f32:return v.f32;case v.f64:return v.f64;case v.i64:case v.u64:return v.i64}return v.none}Object.defineProperty(exports,"__esModule",{value:!0}),exports.OpCodes=new Map([[0,"unreachable"],[1,"nop"],[2,"block"],[3,"loop"],[4,"if"],[5,"else"],[11,"end"],[12,"br"],[13,"br_if"],[14,"br_table"],[15,"return"],[16,"call"],[17,"call_indirect"],[26,"drop"],[27,"select"],[32,"get_local"],[33,"set_local"],[34,"tee_local"],[35,"get_global"],[36,"set_global"],[40,"i32.load"],[41,"i64.load"],[42,"f32.load"],[43,"f64.load"],[44,"i32.load8_s"],[45,"i32.load8_u"],[46,"i32.load16_s"],[47,"i32.load16_u"],[48,"i64.load8_s"],[49,"i64.load8_u"],[50,"i64.load16_s"],[51,"i64.load16_u"],[52,"i64.load32_s"],[53,"i64.load32_u"],[54,"i32.store"],[55,"i64.store"],[56,"f32.store"],[57,"f64.store"],[58,"i32.store8"],[59,"i32.store16"],[60,"i64.store8"],[61,"i64.store16"],[62,"i64.store32"],[63,"current_memory"],[64,"grow_memory"],[65,"i32.const"],[66,"i64.const"],[67,"f32.const"],[68,"f64.const"],[69,"i32.eqz"],[70,"i32.eq"],[71,"i32.ne"],[72,"i32.lt_s"],[73,"i32.lt_u"],[74,"i32.gt_s"],[75,"i32.gt_u"],[76,"i32.le_s"],[77,"i32.le_u"],[78,"i32.ge_s"],[79,"i32.ge_u"],[80,"i64.eqz"],[81,"i64.eq"],[82,"i64.ne"],[83,"i64.lt_s"],[84,"i64.lt_u"],[85,"i64.gt_s"],[86,"i64.gt_u"],[87,"i64.le_s"],[88,"i64.le_u"],[89,"i64.ge_s"],[90,"i64.ge_u"],[91,"f32.eq"],[92,"f32.ne"],[93,"f32.lt"],[94,"f32.gt"],[95,"f32.le"],[96,"f32.ge"],[97,"f64.eq"],[98,"f64.ne"],[99,"f64.lt"],[100,"f64.gt"],[101,"f64.le"],[102,"f64.ge"],[103,"i32.clz"],[104,"i32.ctz"],[105,"i32.popcnt"],[106,"i32.add"],[107,"i32.sub"],[108,"i32.mul"],[109,"i32.div_s"],[110,"i32.div_u"],[111,"i32.rem_s"],[112,"i32.rem_u"],[113,"i32.and"],[114,"i32.or"],[115,"i32.xor"],[116,"i32.shl"],[117,"i32.shr_s"],[118,"i32.shr_u"],[119,"i32.rotl"],[120,"i32.rotr"],[121,"i64.clz"],[122,"i64.ctz"],[123,"i64.popcnt"],[124,"i64.add"],[125,"i64.sub"],[126,"i64.mul"],[127,"i64.div_s"],[128,"i64.div_u"],[129,"i64.rem_s"],[130,"i64.rem_u"],[131,"i64.and"],[132,"i64.or"],[133,"i64.xor"],[134,"i64.shl"],[135,"i64.shr_s"],[136,"i64.shr_u"],[137,"i64.rotl"],[138,"i64.rotr"],[139,"f32.abs"],[140,"f32.neg"],[141,"f32.ceil"],[142,"f32.floor"],[143,"f32.trunc"],[144,"f32.nearest"],[145,"f32.sqrt"],[146,"f32.add"],[147,"f32.sub"],[148,"f32.mul"],[149,"f32.div"],[150,"f32.min"],[151,"f32.max"],[152,"f32.copysign"],[153,"f64.abs"],[154,"f64.neg"],[155,"f64.ceil"],[156,"f64.floor"],[157,"f64.trunc"],[158,"f64.nearest"],[159,"f64.sqrt"],[160,"f64.add"],[161,"f64.sub"],[162,"f64.mul"],[163,"f64.div"],[164,"f64.min"],[165,"f64.max"],[166,"f64.copysign"],[167,"i32.wrap_i64"],[168,"i32.trunc_s_f32"],[169,"i32.trunc_u_f32"],[170,"i32.trunc_s_f64"],[171,"i32.trunc_u_f64"],[172,"i64.extend_s_i32"],[173,"i64.extend_u_i32"],[174,"i64.trunc_s_f32"],[175,"i64.trunc_u_f32"],[176,"i64.trunc_s_f64"],[177,"i64.trunc_u_f64"],[178,"f32.convert_s_i32"],[179,"f32.convert_u_i32"],[180,"f32.convert_s_i64"],[181,"f32.convert_u_i64"],[182,"f32.demote_f64"],[183,"f64.convert_s_i32"],[184,"f64.convert_u_i32"],[185,"f64.convert_s_i64"],[186,"f64.convert_u_i64"],[187,"f64.promote_f32"],[188,"i32.reinterpret_f32"],[189,"i64.reinterpret_f64"],[190,"f32.reinterpret_i32"],[191,"f64.reinterpret_i64"]]),function(e){e[e.unreachable=0]="unreachable",e[e.nop=1]="nop",e[e.block=2]="block",e[e.loop=3]="loop",e[e.if=4]="if",e[e.else=5]="else",e[e.end=11]="end",e[e.br=12]="br",e[e.br_if=13]="br_if",e[e.br_table=14]="br_table",e[e.return=15]="return",e[e.call=16]="call",e[e.call_indirect=17]="call_indirect",e[e.drop=26]="drop",e[e.select=27]="select",e[e.get_local=32]="get_local",e[e.set_local=33]="set_local",e[e.tee_local=34]="tee_local",e[e.get_global=35]="get_global",e[e.set_global=36]="set_global",e[e.current_memory=63]="current_memory",e[e.grow_memory=64]="grow_memory"}(e=exports.Control||(exports.Control={})),function(e){e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(r=exports.U32||(exports.U32={})),function(e){e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(t=exports.U64||(exports.U64={})),function(e){e[e.load=42]="load",e[e.store=56]="store",e[e.const=67]="const"}(s=exports.F32||(exports.F32={})),function(e){e[e.load=43]="load",e[e.store=57]="store",e[e.const=68]="const"}(n=exports.F64||(exports.F64={})),function(e){e[e.const=65]="const",e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(u=exports.I32||(exports.I32={})),function(e){e[e.const=66]="const",e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(o=exports.I64||(exports.I64={})),function(e){e[e.eq=70]="eq",e[e.ne=71]="ne",e[e.lt_s=72]="lt_s",e[e.lt_u=73]="lt_u",e[e.gt_s=74]="gt_s",e[e.gt_u=75]="gt_u",e[e.le_s=76]="le_s",e[e.le_u=77]="le_u",e[e.ge_s=78]="ge_s",e[e.ge_u=79]="ge_u",e[e.add=106]="add",e[e.sub=107]="sub",e[e.mul=108]="mul",e[e.div_s=109]="div_s",e[e.div_u=110]="div_u",e[e.rem_s=111]="rem_s",e[e.rem_u=112]="rem_u",e[e.and=113]="and",e[e.or=114]="or",e[e.xor=115]="xor",e[e.shl=116]="shl",e[e.shr_s=117]="shr_s",e[e.shr_u=118]="shr_u",e[e.rotl=119]="rotl",e[e.rotr=120]="rotr"}(a=exports.I32Binary||(exports.I32Binary={})),function(e){e[e.eq=81]="eq",e[e.ne=82]="ne",e[e.lt_s=83]="lt_s",e[e.lt_u=84]="lt_u",e[e.gt_s=85]="gt_s",e[e.gt_u=86]="gt_u",e[e.le_s=87]="le_s",e[e.le_u=88]="le_u",e[e.ge_s=89]="ge_s",e[e.ge_u=90]="ge_u",e[e.add=124]="add",e[e.sub=125]="sub",e[e.mul=126]="mul",e[e.div_s=127]="div_s",e[e.div_u=128]="div_u",e[e.rem_s=129]="rem_s",e[e.rem_u=130]="rem_u",e[e.and=131]="and",e[e.or=132]="or",e[e.xor=133]="xor",e[e.shl=134]="shl",e[e.shr_s=135]="shr_s",e[e.shr_u=136]="shr_u",e[e.rotl=137]="rotl",e[e.rotr=138]="rotr"}(c=exports.I64Binary||(exports.I64Binary={})),function(e){e[e.eq=91]="eq",e[e.ne=92]="ne",e[e.lt=93]="lt",e[e.gt=94]="gt",e[e.le=95]="le",e[e.ge=96]="ge",e[e.add=146]="add",e[e.sub=147]="sub",e[e.mul=148]="mul",e[e.div=149]="div",e[e.min=150]="min",e[e.max=151]="max",e[e.copysign=152]="copysign"}(i=exports.F32Binary||(exports.F32Binary={})),function(e){e[e.eq=97]="eq",e[e.ne=98]="ne",e[e.lt=99]="lt",e[e.gt=100]="gt",e[e.le=101]="le",e[e.ge=102]="ge",e[e.add=160]="add",e[e.sub=161]="sub",e[e.mul=162]="mul",e[e.div=163]="div",e[e.min=164]="min",e[e.max=165]="max",e[e.copysign=166]="copysign"}(_=exports.F64Binary||(exports.F64Binary={})),function(e){e[e.eqz=69]="eqz",e[e.clz=103]="clz",e[e.ctz=104]="ctz",e[e.popcnt=105]="popcnt"}(l=exports.I32Unary||(exports.I32Unary={})),function(e){e[e.wrap$i64=167]="wrap$i64",e[e.trunc_s$f32=168]="trunc_s$f32",e[e.trunc_u$f32=169]="trunc_u$f32",e[e.trunc_s$f64=170]="trunc_s$f64",e[e.trunc_u$f64=171]="trunc_u$f64",e[e.reinterpret$f32=188]="reinterpret$f32"}(f=exports.I32Convert||(exports.I32Convert={})),function(e){e[e.eqz=80]="eqz",e[e.clz=121]="clz",e[e.ctz=122]="ctz",e[e.popcnt=123]="popcnt"}(d=exports.I64Unary||(exports.I64Unary={})),function(e){e[e.extend_s$i32=172]="extend_s$i32",e[e.extend_u$i32=173]="extend_u$i32",e[e.trunc_s$f32=174]="trunc_s$f32",e[e.trunc_u$f32=175]="trunc_u$f32",e[e.trunc_s$f64=176]="trunc_s$f64",e[e.trunc_u$f64=177]="trunc_u$f64",e[e.reinterpret$f64=189]="reinterpret$f64"}(p=exports.I64Convert||(exports.I64Convert={})),function(e){e[e.abs=139]="abs",e[e.ceil=141]="ceil",e[e.trunc=143]="trunc",e[e.sqrt=145]="sqrt",e[e.neg=140]="neg",e[e.floor=142]="floor",e[e.nearest=144]="nearest"}(g=exports.F32Unary||(exports.F32Unary={})),function(e){e[e.convert_s$i32=178]="convert_s$i32",e[e.convert_u$i32=179]="convert_u$i32",e[e.convert_s$i64=180]="convert_s$i64",e[e.convert_u$i64=181]="convert_u$i64",e[e.demote$f64=182]="demote$f64",e[e.reinterpret$i32=190]="reinterpret$i32"}(m=exports.F32Convert||(exports.F32Convert={})),function(e){e[e.abs=153]="abs",e[e.ceil=155]="ceil",e[e.trunc=157]="trunc",e[e.sqrt=159]="sqrt",e[e.neg=154]="neg",e[e.floor=156]="floor",e[e.nearest=158]="nearest"}(x=exports.F64Unary||(exports.F64Unary={})),function(e){e[e.convert_s$i32=183]="convert_s$i32",e[e.convert_u$i32=184]="convert_u$i32",e[e.convert_s$i64=185]="convert_s$i64",e[e.convert_u$i64=186]="convert_u$i64",e[e.promote$f32=187]="promote$f32",e[e.reinterpret$i64=191]="reinterpret$i64"}($=exports.F64Convert||(exports.F64Convert={})),function(e){e[e.i32=127]="i32",e[e.i64=126]="i64",e[e.f32=125]="f32",e[e.f64=124]="f64",e[e.u32=1]="u32",e[e.u64=2]="u64",e[e.i8=3]="i8",e[e.u8=4]="u8",e[e.i16=5]="i16",e[e.u16=6]="u16",e[e.none=0]="none",e[e.any=7]="any",e[e.str=8]="str"}(v=exports.WType||(exports.WType={})),function(e){e[e.custom=0]="custom",e[e.type=1]="type",e[e.import=2]="import",e[e.function=3]="function",e[e.table=4]="table",e[e.memory=5]="memory",e[e.global=6]="global",e[e.export=7]="export",e[e.start=8]="start",e[e.element=9]="element",e[e.code=10]="code",e[e.data=11]="data"}(b=exports.SectionCode||(exports.SectionCode={})),exports.WTypeMap=new Map([[v.i32,u],[v.i64,o],[v.u32,r],[v.u64,t],[v.f32,s],[v.f64,n]]),exports.OpTypeMap=new Map([...y(l,v.i32),...y(d,v.i64),...y(g,v.f32),...y(x,v.f64),...y(a,v.i32),...y(c,v.i64),...y(i,v.f32),...y(_,v.f64),...y(f,v.i32),...y(p,v.i64),...y(m,v.f32),...y($,v.f64)]),exports.getTypeConvertOpe=h,exports.getOpFromStr=q,exports.getOperationType=w,exports.getNativeType=z,exports.WLoadIns=new Set([u.load,u.load8_s,u.load8_u,u.load16_s,u.load16_u,o.load,o.load8_s,o.load8_u,o.load16_s,o.load16_u,s.load,n.load]),exports.WStoreIns=new Set([u.store,u.store8,u.store16,o.store,o.store8,o.store32,s.store,n.store]);
},{}],"2721":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.location=e}optimize(e){}}exports.WNode=e;
},{}],"l0JX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node");class s extends e.WNode{}exports.WSection=s;
},{"../node":"2721"}],"F72u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wsection");class o extends e.WSection{constructor(t,e){super(e),this.functions=t}emit(e){e.writeByte(t.SectionCode.code);const o=e.createLengthSlot();e.emit(t.WType.u32,this.functions.length),this.functions.map(t=>t.emit(e)),e.fillLengthSlot(o)}optimize(t){this.functions.map(e=>e.optimize(t))}}exports.WCodeSection=o;
},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"F1I7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wsection");class o extends e.WSection{constructor(t,e){super(e),this.functions=t}emit(e){e.writeByte(t.SectionCode.export);const o=e.createLengthSlot();e.emit(t.WType.u32,this.functions.length),this.functions.map(t=>t.emit(e)),e.fillLengthSlot(o)}}exports.WExportSection=o;
},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"FxaF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node"),t=require("../tool/constant");class s extends e.WNode{constructor(e,t,s){super(s),this.module=e,this.name=t}emit(e){e.emit(t.WType.str,this.module),e.emit(t.WType.str,this.name)}}exports.WImportItem=s;
},{"../node":"2721","../tool/constant":"Mjkt"}],"NgQr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wimport_item");class i extends e.WImportItem{constructor(t,e,i,r,s){super(t,e,s),this.min=i,this.max=r}emit(e){super.emit(e),e.writeByte(2),null===this.max?(e.writeByte(0),e.emit(t.WType.u32,this.min)):(e.writeByte(1),e.writeByte(this.min),e.writeByte(this.max))}}exports.WImportMemory=i;
},{"../tool/constant":"Mjkt","./wimport_item":"FxaF"}],"ojST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node"),t=require("../tool/constant");class r extends e.WNode{static n2s(e){return e===t.WType.i32?"i":e===t.WType.i64?"l":e===t.WType.f32?"f":e===t.WType.f64?"d":"v"}static s2n(e){return"i"===e?t.WType.i32:"l"===e?t.WType.i64:"f"===e?t.WType.f32:"d"===e?t.WType.f64:t.WType.none}static fromEncoding(e,t){const s=new r([],[],t);"v"!==e.charAt(0)&&s.returnTypes.push(r.s2n(e.charAt(0)));for(let n=1;n<e.length;n++)s.parameters.push(r.s2n(e.charAt(n)));return s}constructor(e,t,r){super(r),this.returnTypes=e,this.parameters=t}emit(e){e.writeByte(96),e.emit(t.WType.u32,this.parameters.length),this.parameters.map(r=>e.emit(t.WType.u32,t.getNativeType(r))),e.emit(t.WType.u32,this.returnTypes.length),this.returnTypes.map(r=>e.emit(t.WType.u32,t.getNativeType(r)))}toString(){return this.parameters.join(",")+"#"+this.returnTypes.join(",")}toEncoding(){let e="";return 0===this.returnTypes.length?e+="v":e+=r.n2s(t.getNativeType(this.returnTypes[0])),this.parameters.map(s=>e+=r.n2s(t.getNativeType(s))),e}}exports.WFunctionType=r;
},{"../node":"2721","../tool/constant":"Mjkt"}],"qolR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../node"),e=require("../tool/constant"),i=require("./wfunction_type");class s extends t.WNode{constructor(t,e,s,o,n,a,r){super(r),this.name=t,this.displayName=e,this.type=new i.WFunctionType(s,o,r),this.local=n,this.body=a,this.signatureId=0,this.dataStart=0,this.bssStart=0,this.fileName=""}emit(t){const i=t.createLengthSlot();t.emit(e.WType.u32,this.local.length),this.local.map(i=>{t.emit(e.WType.u32,1),t.writeByte(e.getNativeType(i))}),t.enterFunction(this),this.body.map(e=>e.emit(t)),t.submitFunction(),t.emitIns(e.Control.end,e.WType.none,0,this.location),t.fillLengthSlot(i)}optimize(t){this.body.map(e=>e.optimize(t))}}exports.WFunction=s;
},{"../node":"2721","../tool/constant":"Mjkt","./wfunction_type":"ojST"}],"vZqF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../node"),e=require("../tool/constant");class o extends t.WNode{constructor(t,e){super(e),this.imports=t}emit(t){t.writeByte(e.SectionCode.import);const o=t.createLengthSlot();t.emit(e.WType.u32,this.imports.length),this.imports.map(e=>e.emit(t)),t.fillLengthSlot(o)}}exports.WImportSection=o;
},{"../node":"2721","../tool/constant":"Mjkt"}],"7DOa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("source-map"),e=require("../../common/error");class n{constructor(t,e){this.functionMap=new Map,this.globalMap=new Map,this.funcTypeEncodingMap=new Map,this.functionIdNow=0,this.globalIdNow=0,this.currentFunction=null,this.externMap=t,this.sourceMap=e,this.sourceMapConsumer=null}getStartLine(t){return this.sourceMapConsumer&&t.start.line>=1?this.sourceMapConsumer.originalPositionFor(t.start).line:-1}getEndLine(t){return this.sourceMapConsumer&&t.end.line>=1?this.sourceMapConsumer.originalPositionFor(t.end).line:-1}setSourceMap(e){e&&this.sourceMap&&this.sourceMap.get(e)?this.sourceMapConsumer=new t.SourceMapConsumer(this.sourceMap.get(e).sourceMap.toString()):this.sourceMapConsumer=null}getFuncInfo(t){const n=this.functionMap.get(t);if(!n)throw new e.EmitError(`undefined function ${t}`);return n}submitFunc(t,n){if(this.functionMap.has(t))throw new e.EmitError(`duplicated name ${t}`);return this.functionMap.set(t,{id:this.functionIdNow,type:n}),this.functionIdNow++}getGlobalInfo(t){const n=this.globalMap.get(t);if(!n)throw new e.EmitError(`undefined name ${t}`);return n}submitGlobal(t,n){if(this.globalMap.has(t))throw new e.EmitError(`duplicated name ${t}`);return this.globalMap.set(t,{id:this.globalIdNow,type:n}),this.globalIdNow++}setCurrentFunc(e){if(this.currentFunction=e,this.sourceMapConsumer=null,null!==e){const n=this.sourceMap.get(e.fileName);n&&(this.sourceMapConsumer=new t.SourceMapConsumer(n.sourceMap.toString()))}}getCurrentFunc(){if(!this.currentFunction)throw new e.EmitError("not in func");return this.currentFunction}getExternLocation(t){const n=this.externMap.get(t);if(!n)throw new e.EmitError(`unresolve symbol ${t}`);return n}getTypeIdxFromEncoding(t){const n=this.funcTypeEncodingMap.get(t);if(!n)throw new e.EmitError(`unresolve type ${t}`);return n}setTypeIdxFromEncoding(t,e){this.funcTypeEncodingMap.set(t,e)}}exports.EmitterContext=n;
},{"source-map":"aRf0","../../common/error":"nOPH"}],"Oljm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./emitter_context");class e{constructor(e,r){this.ctx=new t.EmitterContext(e,r)}}exports.Emitter=e;
},{"./emitter_context":"7DOa"}],"NDfV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./emitter");class s extends e.Emitter{constructor(t,e){super(t,e),this.memoryInfo=[],this.insBuffer=[],this.wasmJSON={functions:[],types:[],globals:[],imports:[],data:[],exports:{}}}writeByte(t){}writeBytes(t){}createLengthSlot(){return[0,0]}emit(t,e){}fillLengthSlot(t){}emitIns(t,e,s,n,o){this.insBuffer.push([t,s,this.ctx.getStartLine(n)])}enterFunction(t){this.ctx.setCurrentFunc(t),this.insBuffer=[]}submitFunction(){const e=this.insBuffer,s=[];for(let i=0;i<e.length;i++)e[i][0]===t.Control.if||e[i][0]===t.Control.block||e[i][0]===t.Control.loop?s.push(i):e[i][0]===t.Control.else?(e[s[s.length-1]][1]=i,s.pop(),s.push(i)):e[i][0]===t.Control.end&&(e[s[s.length-1]][1]=i,s.pop());e.push([t.Control.return,0,-1]);const n=new Set,o=new Set;for(let t=0;t<e.length;t++)-1===e[t][2]||n.has(e[t][2])||(n.add(e[t][2]),o.add(t));const r=this.ctx.getCurrentFunc();this.wasmJSON.functions.push({name:r.name,fileName:r.fileName,displayName:r.displayName,locals:r.local.map(e=>t.getNativeType(e)),codes:e,type:r.type.toEncoding(),signatureId:r.signatureId,lineIdx:o,dataStart:r.dataStart,bssStart:r.bssStart,scope:null,memoryInfo:this.memoryInfo,sourceRange:[this.ctx.getStartLine(r.location),this.ctx.getEndLine(r.location)]}),this.memoryInfo=[],this.ctx.setCurrentFunc(null)}getJSON(){return this.wasmJSON}}exports.JSONEmitter=s;
},{"../tool/constant":"Mjkt","./emitter":"Oljm"}],"ZUlG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../emitter/json_emitter"),t=require("../tool/constant"),s=require("./wsection");class i extends s.WSection{constructor(e,t){super(t),this.segments=e}emit(s){s.writeByte(t.SectionCode.data);const i=s.createLengthSlot();s.emit(t.WType.u32,this.segments.length),this.segments.map(e=>e.emit(s)),s.fillLengthSlot(i),s instanceof e.JSONEmitter&&(s.getJSON().data=this.segments.map(e=>({offset:e.offsetNumber,data:e.dataBuffer})))}}exports.WDataSection=i;
},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wsection":"l0JX"}],"phuN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../emitter/json_emitter"),t=require("../node"),i=require("../tool/constant");class n extends t.WNode{constructor(e,t){super(t),this.name=e}emit(t){t.emit(i.WType.str,this.name),t.writeByte(0),t.emit(i.WType.u32,t.ctx.getFuncInfo(this.name).id),t instanceof e.JSONEmitter&&(t.getJSON().exports[this.name]=t.ctx.getFuncInfo(this.name).id)}}exports.WExportFunction=n;
},{"../emitter/json_emitter":"NDfV","../node":"2721","../tool/constant":"Mjkt"}],"39xj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node"),t=require("../tool/constant");class o extends e.WNode{constructor(e,t){super(t),this.pageInfo=e}emit(e){e.writeByte(t.SectionCode.memory);const o=e.createLengthSlot();e.emit(t.WType.u32,this.pageInfo.length),this.pageInfo.map(o=>{const i=o[1];null===i?(e.writeByte(0),e.emit(t.WType.u32,o[0])):(e.writeByte(1),e.emit(t.WType.u32,o[0]),e.emit(t.WType.u32,i))}),e.fillLengthSlot(o)}}exports.WMemorySection=o;
},{"../node":"2721","../tool/constant":"Mjkt"}],"S9g4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wsection");class n extends e.WSection{constructor(t,e){super(e),this.functions=t}emit(e){e.writeByte(t.SectionCode.function);const n=e.createLengthSlot();e.emit(t.WType.u32,this.functions.length),this.functions.map(t=>e.ctx.submitFunc(t.name,t.type)),this.functions.map(n=>e.emit(t.WType.u32,n.signatureId)),e.fillLengthSlot(n)}}exports.WFunctionSection=n;
},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"/p2P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node"),t=require("../tool/constant");class r extends e.WNode{constructor(e,t){super(t),this.len=e}emit(e){e.writeByte(112),e.writeByte(0),e.emit(t.WType.u32,this.len)}}exports.WTable=r;
},{"../node":"2721","../tool/constant":"Mjkt"}],"oShx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node");class o extends e.WNode{fold(){return this}}var r;exports.WExpression=o,function(e){e[e.RAW=0]="RAW",e[e.DATA=1]="DATA",e[e.BSS=2]="BSS",e[e.EXTERN=3]="EXTERN"}(r=exports.WMemoryLocation||(exports.WMemoryLocation={}));
},{"../node":"2721"}],"PxFK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wexpression");class s extends e.WExpression{constructor(t,e,s){super(s),this.type=t,this.constant=e}emit(e){switch(t.getNativeType(this.type)){case t.WType.i32:e.emitIns(t.I32.const,t.WType.i32,parseInt(this.constant),this.location);break;case t.WType.i64:e.emitIns(t.I64.const,t.WType.i64,this.constant.split(".")[0],this.location);break;case t.WType.f32:e.emitIns(t.F32.const,t.WType.f32,parseFloat(this.constant),this.location);break;case t.WType.f64:e.emitIns(t.F64.const,t.WType.f64,parseFloat(this.constant),this.location)}}deduceType(t){return this.type}isPure(){return!0}}exports.WConst=s;
},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],"1gFT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../common/error"),e=require("../emitter/json_emitter"),i=require("../expression/wconst"),r=require("../node"),s=require("../tool/constant");class n extends r.WNode{constructor(t,e,i,r){super(r),this.name=t,this.type=e,this.init=i}emit(r){if(r.ctx.submitGlobal(this.name,this.type),r.writeByte(s.getNativeType(this.type)),r.writeByte(1),this.init.emit(r),r.writeByte(s.Control.end),r instanceof e.JSONEmitter){if(!(this.init instanceof i.WConst))throw new t.EmitError("unknown error");r.getJSON().globals.push({name:this.name,type:s.getNativeType(this.type),init:this.init.constant})}}}exports.WGlobalVariable=n;
},{"../../common/error":"nOPH","../emitter/json_emitter":"NDfV","../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],"uAfS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../expression/wconst"),t=require("../node"),s=require("../tool/constant");class o extends t.WNode{constructor(t,o){super(o),this.len=t,this.offset=new e.WConst(s.WType.i32,"0",o)}emit(e){e.writeByte(0),this.offset.emit(e),e.writeByte(s.Control.end),e.emit(s.WType.u32,this.len);for(let t=0;t<this.len;t++)e.emit(s.WType.u32,t)}}exports.WElement=o;
},{"../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],"tUq0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./welement"),s=require("./wsection");class n extends s.WSection{constructor(e,s){super(s),this.elems=[new t.WElement(e,s)]}emit(t){t.writeByte(e.SectionCode.element);const s=t.createLengthSlot();t.emit(e.WType.u32,this.elems.length),this.elems.map(e=>e.emit(t)),t.fillLengthSlot(s)}}exports.WElementSection=n;
},{"../tool/constant":"Mjkt","./welement":"uAfS","./wsection":"l0JX"}],"ijtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../emitter/json_emitter"),e=require("../tool/constant"),i=require("./wfunction_type"),s=require("./wimport_item");class r extends s.WImportItem{constructor(t,e,s,r,n){super(t,e,n),this.module=t,this.name=e,this.type=new i.WFunctionType(s,r,this.location),this.signatureId=0}emit(i){super.emit(i),i.writeByte(0),i.emit(e.WType.u32,this.signatureId),i.ctx.submitFunc(this.name,this.type),i instanceof t.JSONEmitter&&i.getJSON().imports.push({module:this.module,name:this.name,type:this.type.toEncoding()})}}exports.WImportFunction=r;
},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wfunction_type":"ojST","./wimport_item":"FxaF"}],"QzxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require(".."),e=require("../tool/constant"),s=require("./wsection");class o extends s.WSection{constructor(t,e){super(e),this.types=t}emit(s){s.writeByte(e.SectionCode.type);const o=s.createLengthSlot();s.emit(e.WType.u32,this.types.length);for(let t=0;t<this.types.length;t++)s.ctx.setTypeIdxFromEncoding(this.types[t].toEncoding(),t),this.types[t].emit(s);s.fillLengthSlot(o),s instanceof t.JSONEmitter&&(s.getJSON().types=this.types.map(t=>t.toEncoding()))}}exports.WTypeSection=o;
},{"..":"Jo9c","../tool/constant":"Mjkt","./wsection":"l0JX"}],"tP0H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wsection");class s extends t.WSection{constructor(e,t){super(t),this.tables=e}emit(t){t.writeByte(e.SectionCode.table);const s=t.createLengthSlot();t.emit(e.WType.u32,this.tables.length),this.tables.map(e=>e.emit(t)),t.fillLengthSlot(s)}}exports.WTableSection=s;
},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"fjK8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wsection");class o extends t.WSection{constructor(e,t){super(t),this.globals=e}emit(t){t.writeByte(e.SectionCode.global);const o=t.createLengthSlot();t.emit(e.WType.u32,this.globals.length),this.globals.map(e=>e.emit(t)),t.fillLengthSlot(o)}}exports.WGlobalSection=o;
},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"KHMQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../expression/wconst"),t=require("../node"),s=require("../tool/constant");class r extends t.WNode{constructor(t,r,i){super(i),this.memIdx=0,this.offsetNumber=t,this.offset=new e.WConst(s.WType.i32,t.toString(),i),this.dataBuffer=r}emit(e){e.emit(s.WType.u32,this.memIdx),this.offset.emit(e),e.writeByte(s.Control.end),e.emit(s.WType.u32,this.dataBuffer.byteLength);const t=new Uint8Array(this.dataBuffer);for(let s=0;s<this.dataBuffer.byteLength;s++)e.writeByte(t[s])}}exports.WDataSegment=r;
},{"../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],"f88W":[function(require,module,exports) {

},{}],"BOxy":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(t,i){"use strict";function r(t,i){if(!t)throw new Error(i||"Assertion failed")}function h(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function n(t,i,r){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}var e;"object"==typeof t?t.exports=n:i.BN=n,n.BN=n,n.wordSize=26;try{e=require("buffer").Buffer}catch(k){}function o(t,i,r){for(var h=0,n=Math.min(t.length,r),e=i;e<n;e++){var o=t.charCodeAt(e)-48;h<<=4,h|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return h}function s(t,i,r,h){for(var n=0,e=Math.min(t.length,r),o=i;o<e;o++){var s=t.charCodeAt(o)-48;n*=h,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,i){return t.cmp(i)>0?t:i},n.min=function(t,i){return t.cmp(i)<0?t:i},n.prototype._init=function(t,i,h){if("number"==typeof t)return this._initNumber(t,i,h);if("object"==typeof t)return this._initArray(t,i,h);"hex"===i&&(i=16),r(i===(0|i)&&i>=2&&i<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===i?this._parseHex(t,n):this._parseBase(t,i,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===h&&this._initArray(this.toArray(),i,h)},n.prototype._initNumber=function(t,i,h){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===h&&this._initArray(this.toArray(),i,h)},n.prototype._initArray=function(t,i,h){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var e,o,s=0;if("be"===h)for(n=t.length-1,e=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);else if("le"===h)for(n=0,e=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);return this.strip()},n.prototype._parseHex=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var h,n,e=0;for(r=t.length-6,h=0;r>=i;r-=6)n=o(t,r,r+6),this.words[h]|=n<<e&67108863,this.words[h+1]|=n>>>26-e&4194303,(e+=24)>=26&&(e-=26,h++);r+6!==i&&(n=o(t,i,r+6),this.words[h]|=n<<e&67108863,this.words[h+1]|=n>>>26-e&4194303),this.strip()},n.prototype._parseBase=function(t,i,r){this.words=[0],this.length=1;for(var h=0,n=1;n<=67108863;n*=i)h++;h--,n=n/i|0;for(var e=t.length-r,o=e%h,u=Math.min(e,e-o)+r,a=0,l=r;l<u;l+=h)a=s(t,l,l+h,i),this.imuln(n),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var m=1;for(a=s(t,l,t.length,i),l=0;l<o;l++)m*=i;this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},n.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,i,r){r.negative=i.negative^t.negative;var h=t.length+i.length|0;r.length=h,h=h-1|0;var n=0|t.words[0],e=0|i.words[0],o=n*e,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var a=1;a<h;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;l+=(o=(n=0|t.words[p])*(e=0|i.words[d])+m)/67108864|0,m=67108863&o}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}n.prototype.toString=function(t,i){var h;if(i=0|i||1,16===(t=t||10)||"hex"===t){h="";for(var n=0,e=0,o=0;o<this.length;o++){var s=this.words[o],m=(16777215&(s<<n|e)).toString(16);h=0!==(e=s>>>24-n&16777215)||o!==this.length-1?u[6-m.length]+m+h:m+h,(n+=2)>=26&&(n-=26,o--)}for(0!==e&&(h=e.toString(16)+h);h.length%i!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}if(t===(0|t)&&t>=2&&t<=36){var f=a[t],d=l[t];h="";var p=this.clone();for(p.negative=0;!p.isZero();){var M=p.modn(d).toString(t);h=(p=p.idivn(d)).isZero()?M+h:u[f-M.length]+M+h}for(this.isZero()&&(h="0"+h);h.length%i!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,i){return r(void 0!==e),this.toArrayLike(e,t,i)},n.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},n.prototype.toArrayLike=function(t,i,h){var n=this.byteLength(),e=h||Math.max(1,n);r(n<=e,"byte array longer than desired length"),r(e>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===i,a=new t(e),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[s]=o;for(;s<e;s++)a[s]=0}else{for(s=0;s<e-n;s++)a[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[e-s-1]=o}return a},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},n.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},n.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},n.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this.strip()},n.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var h=0;h<r.length;h++)this.words[h]=i.words[h]^r.words[h];if(this!==i)for(;h<i.length;h++)this.words[h]=i.words[h];return this.length=i.length,this.strip()},n.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),h=t%26;this._expand(i),h>0&&i--;for(var n=0;n<i;n++)this.words[n]=67108863&~this.words[n];return h>0&&(this.words[n]=~this.words[n]&67108863>>26-h),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,i){r("number"==typeof t&&t>=0);var h=t/26|0,n=t%26;return this._expand(h+1),this.words[h]=i?this.words[h]|1<<n:this.words[h]&~(1<<n),this.strip()},n.prototype.iadd=function(t){var i,r,h;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(r=this,h=t):(r=t,h=this);for(var n=0,e=0;e<h.length;e++)i=(0|r.words[e])+(0|h.words[e])+n,this.words[e]=67108863&i,n=i>>>26;for(;0!==n&&e<r.length;e++)i=(0|r.words[e])+n,this.words[e]=67108863&i,n=i>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;e<r.length;e++)this.words[e]=r.words[e];return this},n.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,h,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,h=t):(r=t,h=this);for(var e=0,o=0;o<h.length;o++)e=(i=(0|r.words[o])-(0|h.words[o])+e)>>26,this.words[o]=67108863&i;for(;0!==e&&o<r.length;o++)e=(i=(0|r.words[o])+e)>>26,this.words[o]=67108863&i;if(0===e&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,i,r){var h,n,e,o=t.words,s=i.words,u=r.words,a=0,l=0|o[0],m=8191&l,f=l>>>13,d=0|o[1],p=8191&d,M=d>>>13,v=0|o[2],g=8191&v,c=v>>>13,w=0|o[3],y=8191&w,b=w>>>13,_=0|o[4],k=8191&_,A=_>>>13,x=0|o[5],S=8191&x,q=x>>>13,Z=0|o[6],R=8191&Z,B=Z>>>13,N=0|o[7],L=8191&N,I=N>>>13,z=0|o[8],T=8191&z,E=z>>>13,O=0|o[9],j=8191&O,K=O>>>13,P=0|s[0],F=8191&P,C=P>>>13,D=0|s[1],H=8191&D,J=D>>>13,U=0|s[2],G=8191&U,Q=U>>>13,V=0|s[3],W=8191&V,X=V>>>13,Y=0|s[4],$=8191&Y,tt=Y>>>13,it=0|s[5],rt=8191&it,ht=it>>>13,nt=0|s[6],et=8191&nt,ot=nt>>>13,st=0|s[7],ut=8191&st,at=st>>>13,lt=0|s[8],mt=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19;var vt=(a+(h=Math.imul(m,F))|0)+((8191&(n=(n=Math.imul(m,C))+Math.imul(f,F)|0))<<13)|0;a=((e=Math.imul(f,C))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,h=Math.imul(p,F),n=(n=Math.imul(p,C))+Math.imul(M,F)|0,e=Math.imul(M,C);var gt=(a+(h=h+Math.imul(m,H)|0)|0)+((8191&(n=(n=n+Math.imul(m,J)|0)+Math.imul(f,H)|0))<<13)|0;a=((e=e+Math.imul(f,J)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,h=Math.imul(g,F),n=(n=Math.imul(g,C))+Math.imul(c,F)|0,e=Math.imul(c,C),h=h+Math.imul(p,H)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(M,H)|0,e=e+Math.imul(M,J)|0;var ct=(a+(h=h+Math.imul(m,G)|0)|0)+((8191&(n=(n=n+Math.imul(m,Q)|0)+Math.imul(f,G)|0))<<13)|0;a=((e=e+Math.imul(f,Q)|0)+(n>>>13)|0)+(ct>>>26)|0,ct&=67108863,h=Math.imul(y,F),n=(n=Math.imul(y,C))+Math.imul(b,F)|0,e=Math.imul(b,C),h=h+Math.imul(g,H)|0,n=(n=n+Math.imul(g,J)|0)+Math.imul(c,H)|0,e=e+Math.imul(c,J)|0,h=h+Math.imul(p,G)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(M,G)|0,e=e+Math.imul(M,Q)|0;var wt=(a+(h=h+Math.imul(m,W)|0)|0)+((8191&(n=(n=n+Math.imul(m,X)|0)+Math.imul(f,W)|0))<<13)|0;a=((e=e+Math.imul(f,X)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,h=Math.imul(k,F),n=(n=Math.imul(k,C))+Math.imul(A,F)|0,e=Math.imul(A,C),h=h+Math.imul(y,H)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(b,H)|0,e=e+Math.imul(b,J)|0,h=h+Math.imul(g,G)|0,n=(n=n+Math.imul(g,Q)|0)+Math.imul(c,G)|0,e=e+Math.imul(c,Q)|0,h=h+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(M,W)|0,e=e+Math.imul(M,X)|0;var yt=(a+(h=h+Math.imul(m,$)|0)|0)+((8191&(n=(n=n+Math.imul(m,tt)|0)+Math.imul(f,$)|0))<<13)|0;a=((e=e+Math.imul(f,tt)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,h=Math.imul(S,F),n=(n=Math.imul(S,C))+Math.imul(q,F)|0,e=Math.imul(q,C),h=h+Math.imul(k,H)|0,n=(n=n+Math.imul(k,J)|0)+Math.imul(A,H)|0,e=e+Math.imul(A,J)|0,h=h+Math.imul(y,G)|0,n=(n=n+Math.imul(y,Q)|0)+Math.imul(b,G)|0,e=e+Math.imul(b,Q)|0,h=h+Math.imul(g,W)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(c,W)|0,e=e+Math.imul(c,X)|0,h=h+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(M,$)|0,e=e+Math.imul(M,tt)|0;var bt=(a+(h=h+Math.imul(m,rt)|0)|0)+((8191&(n=(n=n+Math.imul(m,ht)|0)+Math.imul(f,rt)|0))<<13)|0;a=((e=e+Math.imul(f,ht)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,h=Math.imul(R,F),n=(n=Math.imul(R,C))+Math.imul(B,F)|0,e=Math.imul(B,C),h=h+Math.imul(S,H)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(q,H)|0,e=e+Math.imul(q,J)|0,h=h+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Q)|0)+Math.imul(A,G)|0,e=e+Math.imul(A,Q)|0,h=h+Math.imul(y,W)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(b,W)|0,e=e+Math.imul(b,X)|0,h=h+Math.imul(g,$)|0,n=(n=n+Math.imul(g,tt)|0)+Math.imul(c,$)|0,e=e+Math.imul(c,tt)|0,h=h+Math.imul(p,rt)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(M,rt)|0,e=e+Math.imul(M,ht)|0;var _t=(a+(h=h+Math.imul(m,et)|0)|0)+((8191&(n=(n=n+Math.imul(m,ot)|0)+Math.imul(f,et)|0))<<13)|0;a=((e=e+Math.imul(f,ot)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,h=Math.imul(L,F),n=(n=Math.imul(L,C))+Math.imul(I,F)|0,e=Math.imul(I,C),h=h+Math.imul(R,H)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(B,H)|0,e=e+Math.imul(B,J)|0,h=h+Math.imul(S,G)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(q,G)|0,e=e+Math.imul(q,Q)|0,h=h+Math.imul(k,W)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(A,W)|0,e=e+Math.imul(A,X)|0,h=h+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,$)|0,e=e+Math.imul(b,tt)|0,h=h+Math.imul(g,rt)|0,n=(n=n+Math.imul(g,ht)|0)+Math.imul(c,rt)|0,e=e+Math.imul(c,ht)|0,h=h+Math.imul(p,et)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(M,et)|0,e=e+Math.imul(M,ot)|0;var kt=(a+(h=h+Math.imul(m,ut)|0)|0)+((8191&(n=(n=n+Math.imul(m,at)|0)+Math.imul(f,ut)|0))<<13)|0;a=((e=e+Math.imul(f,at)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,h=Math.imul(T,F),n=(n=Math.imul(T,C))+Math.imul(E,F)|0,e=Math.imul(E,C),h=h+Math.imul(L,H)|0,n=(n=n+Math.imul(L,J)|0)+Math.imul(I,H)|0,e=e+Math.imul(I,J)|0,h=h+Math.imul(R,G)|0,n=(n=n+Math.imul(R,Q)|0)+Math.imul(B,G)|0,e=e+Math.imul(B,Q)|0,h=h+Math.imul(S,W)|0,n=(n=n+Math.imul(S,X)|0)+Math.imul(q,W)|0,e=e+Math.imul(q,X)|0,h=h+Math.imul(k,$)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(A,$)|0,e=e+Math.imul(A,tt)|0,h=h+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(b,rt)|0,e=e+Math.imul(b,ht)|0,h=h+Math.imul(g,et)|0,n=(n=n+Math.imul(g,ot)|0)+Math.imul(c,et)|0,e=e+Math.imul(c,ot)|0,h=h+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,at)|0)+Math.imul(M,ut)|0,e=e+Math.imul(M,at)|0;var At=(a+(h=h+Math.imul(m,mt)|0)|0)+((8191&(n=(n=n+Math.imul(m,ft)|0)+Math.imul(f,mt)|0))<<13)|0;a=((e=e+Math.imul(f,ft)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,h=Math.imul(j,F),n=(n=Math.imul(j,C))+Math.imul(K,F)|0,e=Math.imul(K,C),h=h+Math.imul(T,H)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(E,H)|0,e=e+Math.imul(E,J)|0,h=h+Math.imul(L,G)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(I,G)|0,e=e+Math.imul(I,Q)|0,h=h+Math.imul(R,W)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(B,W)|0,e=e+Math.imul(B,X)|0,h=h+Math.imul(S,$)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(q,$)|0,e=e+Math.imul(q,tt)|0,h=h+Math.imul(k,rt)|0,n=(n=n+Math.imul(k,ht)|0)+Math.imul(A,rt)|0,e=e+Math.imul(A,ht)|0,h=h+Math.imul(y,et)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,et)|0,e=e+Math.imul(b,ot)|0,h=h+Math.imul(g,ut)|0,n=(n=n+Math.imul(g,at)|0)+Math.imul(c,ut)|0,e=e+Math.imul(c,at)|0,h=h+Math.imul(p,mt)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(M,mt)|0,e=e+Math.imul(M,ft)|0;var xt=(a+(h=h+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,Mt)|0)+Math.imul(f,pt)|0))<<13)|0;a=((e=e+Math.imul(f,Mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,h=Math.imul(j,H),n=(n=Math.imul(j,J))+Math.imul(K,H)|0,e=Math.imul(K,J),h=h+Math.imul(T,G)|0,n=(n=n+Math.imul(T,Q)|0)+Math.imul(E,G)|0,e=e+Math.imul(E,Q)|0,h=h+Math.imul(L,W)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(I,W)|0,e=e+Math.imul(I,X)|0,h=h+Math.imul(R,$)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(B,$)|0,e=e+Math.imul(B,tt)|0,h=h+Math.imul(S,rt)|0,n=(n=n+Math.imul(S,ht)|0)+Math.imul(q,rt)|0,e=e+Math.imul(q,ht)|0,h=h+Math.imul(k,et)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(A,et)|0,e=e+Math.imul(A,ot)|0,h=h+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(b,ut)|0,e=e+Math.imul(b,at)|0,h=h+Math.imul(g,mt)|0,n=(n=n+Math.imul(g,ft)|0)+Math.imul(c,mt)|0,e=e+Math.imul(c,ft)|0;var St=(a+(h=h+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,Mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((e=e+Math.imul(M,Mt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,h=Math.imul(j,G),n=(n=Math.imul(j,Q))+Math.imul(K,G)|0,e=Math.imul(K,Q),h=h+Math.imul(T,W)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(E,W)|0,e=e+Math.imul(E,X)|0,h=h+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(I,$)|0,e=e+Math.imul(I,tt)|0,h=h+Math.imul(R,rt)|0,n=(n=n+Math.imul(R,ht)|0)+Math.imul(B,rt)|0,e=e+Math.imul(B,ht)|0,h=h+Math.imul(S,et)|0,n=(n=n+Math.imul(S,ot)|0)+Math.imul(q,et)|0,e=e+Math.imul(q,ot)|0,h=h+Math.imul(k,ut)|0,n=(n=n+Math.imul(k,at)|0)+Math.imul(A,ut)|0,e=e+Math.imul(A,at)|0,h=h+Math.imul(y,mt)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,mt)|0,e=e+Math.imul(b,ft)|0;var qt=(a+(h=h+Math.imul(g,pt)|0)|0)+((8191&(n=(n=n+Math.imul(g,Mt)|0)+Math.imul(c,pt)|0))<<13)|0;a=((e=e+Math.imul(c,Mt)|0)+(n>>>13)|0)+(qt>>>26)|0,qt&=67108863,h=Math.imul(j,W),n=(n=Math.imul(j,X))+Math.imul(K,W)|0,e=Math.imul(K,X),h=h+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(E,$)|0,e=e+Math.imul(E,tt)|0,h=h+Math.imul(L,rt)|0,n=(n=n+Math.imul(L,ht)|0)+Math.imul(I,rt)|0,e=e+Math.imul(I,ht)|0,h=h+Math.imul(R,et)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(B,et)|0,e=e+Math.imul(B,ot)|0,h=h+Math.imul(S,ut)|0,n=(n=n+Math.imul(S,at)|0)+Math.imul(q,ut)|0,e=e+Math.imul(q,at)|0,h=h+Math.imul(k,mt)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(A,mt)|0,e=e+Math.imul(A,ft)|0;var Zt=(a+(h=h+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,Mt)|0)+Math.imul(b,pt)|0))<<13)|0;a=((e=e+Math.imul(b,Mt)|0)+(n>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,h=Math.imul(j,$),n=(n=Math.imul(j,tt))+Math.imul(K,$)|0,e=Math.imul(K,tt),h=h+Math.imul(T,rt)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(E,rt)|0,e=e+Math.imul(E,ht)|0,h=h+Math.imul(L,et)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(I,et)|0,e=e+Math.imul(I,ot)|0,h=h+Math.imul(R,ut)|0,n=(n=n+Math.imul(R,at)|0)+Math.imul(B,ut)|0,e=e+Math.imul(B,at)|0,h=h+Math.imul(S,mt)|0,n=(n=n+Math.imul(S,ft)|0)+Math.imul(q,mt)|0,e=e+Math.imul(q,ft)|0;var Rt=(a+(h=h+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,Mt)|0)+Math.imul(A,pt)|0))<<13)|0;a=((e=e+Math.imul(A,Mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,h=Math.imul(j,rt),n=(n=Math.imul(j,ht))+Math.imul(K,rt)|0,e=Math.imul(K,ht),h=h+Math.imul(T,et)|0,n=(n=n+Math.imul(T,ot)|0)+Math.imul(E,et)|0,e=e+Math.imul(E,ot)|0,h=h+Math.imul(L,ut)|0,n=(n=n+Math.imul(L,at)|0)+Math.imul(I,ut)|0,e=e+Math.imul(I,at)|0,h=h+Math.imul(R,mt)|0,n=(n=n+Math.imul(R,ft)|0)+Math.imul(B,mt)|0,e=e+Math.imul(B,ft)|0;var Bt=(a+(h=h+Math.imul(S,pt)|0)|0)+((8191&(n=(n=n+Math.imul(S,Mt)|0)+Math.imul(q,pt)|0))<<13)|0;a=((e=e+Math.imul(q,Mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,h=Math.imul(j,et),n=(n=Math.imul(j,ot))+Math.imul(K,et)|0,e=Math.imul(K,ot),h=h+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,at)|0)+Math.imul(E,ut)|0,e=e+Math.imul(E,at)|0,h=h+Math.imul(L,mt)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(I,mt)|0,e=e+Math.imul(I,ft)|0;var Nt=(a+(h=h+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,Mt)|0)+Math.imul(B,pt)|0))<<13)|0;a=((e=e+Math.imul(B,Mt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,h=Math.imul(j,ut),n=(n=Math.imul(j,at))+Math.imul(K,ut)|0,e=Math.imul(K,at),h=h+Math.imul(T,mt)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(E,mt)|0,e=e+Math.imul(E,ft)|0;var Lt=(a+(h=h+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,Mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((e=e+Math.imul(I,Mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h=Math.imul(j,mt),n=(n=Math.imul(j,ft))+Math.imul(K,mt)|0,e=Math.imul(K,ft);var It=(a+(h=h+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,Mt)|0)+Math.imul(E,pt)|0))<<13)|0;a=((e=e+Math.imul(E,Mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863;var zt=(a+(h=Math.imul(j,pt))|0)+((8191&(n=(n=Math.imul(j,Mt))+Math.imul(K,pt)|0))<<13)|0;return a=((e=Math.imul(K,Mt))+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=bt,u[6]=_t,u[7]=kt,u[8]=At,u[9]=xt,u[10]=St,u[11]=qt,u[12]=Zt,u[13]=Rt,u[14]=Bt,u[15]=Nt,u[16]=Lt,u[17]=It,u[18]=zt,0!==a&&(u[19]=a,r.length++),r};function d(t,i,r){return(new p).mulp(t,i,r)}function p(t,i){this.x=t,this.y=i}Math.imul||(f=m),n.prototype.mulTo=function(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,i):r<63?m(this,t,i):r<1024?function(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var h=0,n=0,e=0;e<r.length-1;e++){var o=n;n=0;for(var s=67108863&h,u=Math.min(e,i.length-1),a=Math.max(0,e-t.length+1);a<=u;a++){var l=e-a,m=(0|t.words[l])*(0|i.words[a]),f=67108863&m;s=67108863&(f=f+s|0),n+=(o=(o=o+(m/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[e]=s,h=o,o=n}return 0!==h?r.words[e]=h:r.length--,r.strip()}(this,t,i):d(this,t,i)},p.prototype.makeRBT=function(t){for(var i=new Array(t),r=n.prototype._countBits(t)-1,h=0;h<t;h++)i[h]=this.revBin(h,r,t);return i},p.prototype.revBin=function(t,i,r){if(0===t||t===r-1)return t;for(var h=0,n=0;n<i;n++)h|=(1&t)<<i-n-1,t>>=1;return h},p.prototype.permute=function(t,i,r,h,n,e){for(var o=0;o<e;o++)h[o]=i[t[o]],n[o]=r[t[o]]},p.prototype.transform=function(t,i,r,h,n,e){this.permute(e,t,i,r,h,n);for(var o=1;o<n;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var m=u,f=a,d=0;d<o;d++){var p=r[l+d],M=h[l+d],v=r[l+d+o],g=h[l+d+o],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,h[l+d]=M+g,r[l+d+o]=p-v,h[l+d+o]=M-g,d!==s&&(c=u*m-a*f,f=u*f+a*m,m=c)}},p.prototype.guessLen13b=function(t,i){var r=1|Math.max(i,t),h=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+h},p.prototype.conjugate=function(t,i,r){if(!(r<=1))for(var h=0;h<r/2;h++){var n=t[h];t[h]=t[r-h-1],t[r-h-1]=n,n=i[h],i[h]=-i[r-h-1],i[r-h-1]=-n}},p.prototype.normalize13b=function(t,i){for(var r=0,h=0;h<i/2;h++){var n=8192*Math.round(t[2*h+1]/i)+Math.round(t[2*h]/i)+r;t[h]=67108863&n,r=n<67108864?0:n/67108864|0}return t},p.prototype.convert13b=function(t,i,h,n){for(var e=0,o=0;o<i;o++)e+=0|t[o],h[2*o]=8191&e,e>>>=13,h[2*o+1]=8191&e,e>>>=13;for(o=2*i;o<n;++o)h[o]=0;r(0===e),r(0==(-8192&e))},p.prototype.stub=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},p.prototype.mulp=function(t,i,r){var h=2*this.guessLen13b(t.length,i.length),n=this.makeRBT(h),e=this.stub(h),o=new Array(h),s=new Array(h),u=new Array(h),a=new Array(h),l=new Array(h),m=new Array(h),f=r.words;f.length=h,this.convert13b(t.words,t.length,o,h),this.convert13b(i.words,i.length,a,h),this.transform(o,e,s,u,h,n),this.transform(a,e,l,m,h,n);for(var d=0;d<h;d++){var p=s[d]*l[d]-u[d]*m[d];u[d]=s[d]*m[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,h),this.transform(s,u,f,e,h,n),this.conjugate(f,e,h),this.normalize13b(f,h),r.negative=t.negative^i.negative,r.length=t.length+i.length,r.strip()},n.prototype.mul=function(t){var i=new n(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},n.prototype.mulf=function(t){var i=new n(null);return i.words=new Array(this.length+t.length),d(this,t,i)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var i=0,h=0;h<this.length;h++){var n=(0|this.words[h])*t,e=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=e>>>26,this.words[h]=67108863&e}return 0!==i&&(this.words[h]=i,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var h=r/26|0,n=r%26;i[r]=(t.words[h]&1<<n)>>>n}return i}(t);if(0===i.length)return new n(1);for(var r=this,h=0;h<i.length&&0===i[h];h++,r=r.sqr());if(++h<i.length)for(var e=r.sqr();h<i.length;h++,e=e.sqr())0!==i[h]&&(r=r.mul(e));return r},n.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,h=t%26,n=(t-h)/26,e=67108863>>>26-h<<26-h;if(0!==h){var o=0;for(i=0;i<this.length;i++){var s=this.words[i]&e,u=(0|this.words[i])-s<<h;this.words[i]=u|o,o=s>>>26-h}o&&(this.words[i]=o,this.length++)}if(0!==n){for(i=this.length-1;i>=0;i--)this.words[i+n]=this.words[i];for(i=0;i<n;i++)this.words[i]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,i,h){var n;r("number"==typeof t&&t>=0),n=i?(i-i%26)/26:0;var e=t%26,o=Math.min((t-e)/26,this.length),s=67108863^67108863>>>e<<e,u=h;if(n-=o,n=Math.max(0,n),u){for(var a=0;a<o;a++)u.words[a]=this.words[a];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,a=0;a<this.length;a++)this.words[a]=this.words[a+o];else this.words[0]=0,this.length=1;var l=0;for(a=this.length-1;a>=0&&(0!==l||a>=n);a--){var m=0|this.words[a];this.words[a]=l<<26-e|m>>>e,l=m&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,i,h){return r(0===this.negative),this.iushrn(t,i,h)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){r("number"==typeof t&&t>=0);var i=t%26,h=(t-i)/26,n=1<<i;return!(this.length<=h)&&!!(this.words[h]&n)},n.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var i=t%26,h=(t-i)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=h)return this;if(0!==i&&h++,this.length=Math.min(h,this.length),0!==i){var n=67108863^67108863>>>i<<i;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},n.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,i,h){var n,e,o=t.length+h;this._expand(o);var s=0;for(n=0;n<t.length;n++){e=(0|this.words[n+h])+s;var u=(0|t.words[n])*i;s=((e-=67108863&u)>>26)-(u/67108864|0),this.words[n+h]=67108863&e}for(;n<this.length-h;n++)s=(e=(0|this.words[n+h])+s)>>26,this.words[n+h]=67108863&e;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(e=-(0|this.words[n])+s)>>26,this.words[n]=67108863&e;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,i){var r=(this.length,t.length),h=this.clone(),e=t,o=0|e.words[e.length-1];0!==(r=26-this._countBits(o))&&(e=e.ushln(r),h.iushln(r),o=0|e.words[e.length-1]);var s,u=h.length-e.length;if("mod"!==i){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var l=h.clone()._ishlnsubmul(e,1,u);0===l.negative&&(h=l,s&&(s.words[u]=1));for(var m=u-1;m>=0;m--){var f=67108864*(0|h.words[e.length+m])+(0|h.words[e.length+m-1]);for(f=Math.min(f/o|0,67108863),h._ishlnsubmul(e,f,m);0!==h.negative;)f--,h.negative=0,h._ishlnsubmul(e,1,m),h.isZero()||(h.negative^=1);s&&(s.words[m]=f)}return s&&s.strip(),h.strip(),"div"!==i&&0!==r&&h.iushrn(r),{div:s||null,mod:h}},n.prototype.divmod=function(t,i,h){return r(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,i),"mod"!==i&&(e=s.div.neg()),"div"!==i&&(o=s.mod.neg(),h&&0!==o.negative&&o.iadd(t)),{div:e,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),i),"mod"!==i&&(e=s.div.neg()),{div:e,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),i),"div"!==i&&(o=s.mod.neg(),h&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,i);var e,o,s},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,h=t.ushrn(1),n=t.andln(1),e=r.cmp(h);return e<0||1===n&&0===e?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},n.prototype.modn=function(t){r(t<=67108863);for(var i=(1<<26)%t,h=0,n=this.length-1;n>=0;n--)h=(i*h+(0|this.words[n]))%t;return h},n.prototype.idivn=function(t){r(t<=67108863);for(var i=0,h=this.length-1;h>=0;h--){var n=(0|this.words[h])+67108864*i;this.words[h]=n/t|0,i=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var i=this,h=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new n(1),o=new n(0),s=new n(0),u=new n(1),a=0;i.isEven()&&h.isEven();)i.iushrn(1),h.iushrn(1),++a;for(var l=h.clone(),m=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(e.isOdd()||o.isOdd())&&(e.iadd(l),o.isub(m)),e.iushrn(1),o.iushrn(1);for(var p=0,M=1;0==(h.words[0]&M)&&p<26;++p,M<<=1);if(p>0)for(h.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(m)),s.iushrn(1),u.iushrn(1);i.cmp(h)>=0?(i.isub(h),e.isub(s),o.isub(u)):(h.isub(i),s.isub(e),u.isub(o))}return{a:s,b:u,gcd:h.iushln(a)}},n.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var i=this,h=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e,o=new n(1),s=new n(0),u=h.clone();i.cmpn(1)>0&&h.cmpn(1)>0;){for(var a=0,l=1;0==(i.words[0]&l)&&a<26;++a,l<<=1);if(a>0)for(i.iushrn(a);a-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var m=0,f=1;0==(h.words[0]&f)&&m<26;++m,f<<=1);if(m>0)for(h.iushrn(m);m-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);i.cmp(h)>=0?(i.isub(h),o.isub(s)):(h.isub(i),s.isub(o))}return(e=0===i.cmpn(1)?o:s).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var h=0;i.isEven()&&r.isEven();h++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=i.cmp(r);if(n<0){var e=i;i=r,r=e}else if(0===n||0===r.cmpn(1))break;i.isub(r)}return r.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){r("number"==typeof t);var i=t%26,h=(t-i)/26,n=1<<i;if(this.length<=h)return this._expand(h+1),this.words[h]|=n,this;for(var e=n,o=h;0!==e&&o<this.length;o++){var s=0|this.words[o];e=(s+=e)>>>26,s&=67108863,this.words[o]=s}return 0!==e&&(this.words[o]=e,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var i,h=t<0;if(0!==this.negative&&!h)return-1;if(0===this.negative&&h)return 1;if(this.strip(),this.length>1)i=1;else{h&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];i=n===t?0:n<t?-1:1}return 0!==this.negative?0|-i:i},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var h=0|this.words[r],n=0|t.words[r];if(h!==n){h<n?i=-1:h>n&&(i=1);break}}return i},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new b(t)},n.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var M={k256:null,p224:null,p192:null,p25519:null};function v(t,i){this.name=t,this.p=new n(i,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(t){if("string"==typeof t){var i=n._prime(t);this.m=i.p,this.prime=i}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){b.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var i,r=t;do{this.split(r,this.tmp),i=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(i>this.n);var h=i<this.n?-1:r.ucmp(this.p);return 0===h?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip(),r},v.prototype.split=function(t,i){t.iushrn(this.n,0,i)},v.prototype.imulK=function(t){return t.imul(this.k)},h(g,v),g.prototype.split=function(t,i){for(var r=Math.min(t.length,9),h=0;h<r;h++)i.words[h]=t.words[h];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(i.words[i.length++]=4194303&n,h=10;h<t.length;h++){var e=0|t.words[h];t.words[h-10]=(4194303&e)<<4|n>>>22,n=e}n>>>=22,t.words[h-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var h=0|t.words[r];i+=977*h,t.words[r]=67108863&i,i=64*h+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},h(c,v),h(w,v),h(y,v),y.prototype.imulK=function(t){for(var i=0,r=0;r<t.length;r++){var h=19*(0|t.words[r])+i,n=67108863&h;h>>>=26,t.words[r]=n,i=h}return 0!==i&&(t.words[t.length++]=i),t},n._prime=function(t){if(M[t])return M[t];var i;if("k256"===t)i=new g;else if("p224"===t)i=new c;else if("p192"===t)i=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new y}return M[t]=i,i},b.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},b.prototype._verify2=function(t,i){r(0==(t.negative|i.negative),"red works only with positives"),r(t.red&&t.red===i.red,"red works only with red numbers")},b.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},b.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},b.prototype.add=function(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},b.prototype.iadd=function(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},b.prototype.sub=function(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},b.prototype.isub=function(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},b.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},b.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},b.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},b.prototype.isqr=function(t){return this.imul(t,t.clone())},b.prototype.sqr=function(t){return this.mul(t,t)},b.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(r(i%2==1),3===i){var h=this.m.add(new n(1)).iushrn(2);return this.pow(t,h)}for(var e=this.m.subn(1),o=0;!e.isZero()&&0===e.andln(1);)o++,e.iushrn(1);r(!e.isZero());var s=new n(1).toRed(this),u=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new n(2*l*l).toRed(this);0!==this.pow(l,a).cmp(u);)l.redIAdd(u);for(var m=this.pow(l,e),f=this.pow(t,e.addn(1).iushrn(1)),d=this.pow(t,e),p=o;0!==d.cmp(s);){for(var M=d,v=0;0!==M.cmp(s);v++)M=M.redSqr();r(v<p);var g=this.pow(m,new n(1).iushln(p-v-1));f=f.redMul(g),m=g.redSqr(),d=d.redMul(m),p=v}return f},b.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},b.prototype.pow=function(t,i){if(i.isZero())return new n(1).toRed(this);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var h=2;h<r.length;h++)r[h]=this.mul(r[h-1],t);var e=r[0],o=0,s=0,u=i.bitLength()%26;for(0===u&&(u=26),h=i.length-1;h>=0;h--){for(var a=i.words[h],l=u-1;l>=0;l--){var m=a>>l&1;e!==r[0]&&(e=this.sqr(e)),0!==m||0!==o?(o<<=1,o|=m,(4===++s||0===h&&0===l)&&(e=this.mul(e,r[o]),s=0,o=0)):s=0}u=26}return e},b.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},b.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},n.mont=function(t){return new _(t)},h(_,b),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},_.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),h=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(h).iushrn(this.shift),e=n;return n.cmp(this.m)>=0?e=n.isub(this.m):n.cmpn(0)<0&&(e=n.iadd(this.m)),e._forceRed(this)},_.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new n(0)._forceRed(this);var r=t.mul(i),h=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=r.isub(h).iushrn(this.shift),o=e;return e.cmp(this.m)>=0?o=e.isub(this.m):e.cmpn(0)<0&&(o=e.iadd(this.m)),o._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,this);
},{"buffer":"f88W"}],"vx3y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("bn.js");function n(n){const t=new e(0);let o,i=0;for(;o=n.view.getUint8(n.now++),t.ior(new e(127&o).shln(i)),i+=7,o>>7!=0;);return 64&o&&t.setn(i),t.fromTwos(i)}function t(n,t){let o=new e(t);const i=o.isNeg();for(i&&(o=o.toTwos(o.bitLength()+8));;){const e=o.maskn(7).toNumber();if(o.ishrn(7),r=o,i&&r.toString(2).indexOf("0")<0&&0!=(64&e)||o.isZero()&&0==(64&e)){n.view.setUint8(n.now++,e),n.nowSize++;break}n.view.setUint8(n.now++,128|e),n.nowSize++}var r}function o(n){const t=new e(0);let o,i=0;for(;o=n.view.getUint8(n.now++),t.ior(new e(127&o).shln(i)),o>>7!=0;)i+=7;return t}function i(n,t){const o=new e(t);for(;;){const e=o.maskn(7).toNumber();if(o.ishrn(7),o.isZero()){n.view.setUint8(n.now++,e),n.nowSize++;break}n.view.setUint8(n.now++,128|e),n.nowSize++}}function r(n){let t=0,o=new e(n);const i=o.isNeg();for(i&&(o=o.toTwos(o.bitLength()+8));;){const e=o.maskn(7).toNumber();if(o.ishrn(7),r=o,i&&r.toString(2).indexOf("0")<0&&0!=(64&e)||o.isZero()&&0==(64&e)){t++;break}t++}var r;return t}function s(n){let t=0;const o=new e(n);for(;;){if(o.ishrn(7),o.isZero()){t++;break}t++}return t}exports.readLeb128Int=n,exports.writeLeb128Int=t,exports.readLeb128Uint=o,exports.writeLeb128Uint=i,exports.getLeb128IntLength=r,exports.getLeb128UintLength=s;
},{"bn.js":"BOxy"}],"IP4m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./leb128"),t=new TextEncoder,n=new TextDecoder;function r(t){const r=e.readLeb128Uint(t).toNumber();return n.decode(t.view.buffer.slice(0,r))}function o(n,r){const o=t.encode(r);e.writeLeb128Uint(n,o.byteLength),new Uint8Array(n.view.buffer).set(o,n.now),n.now+=o.byteLength,n.nowSize+=o.byteLength}function i(n){const r=t.encode(n).byteLength;return e.getLeb128UintLength(r)+r}exports.readUtf8Str=r,exports.writeUtf8String=o,exports.getUtf8StringLength=i;
},{"./leb128":"vx3y"}],"xpa/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../common/error"),e=require("../tool/constant"),i=require("../tool/leb128"),n=require("../tool/utf8"),r=require("./emitter");function s(t){return 0}class o extends r.Emitter{constructor(t,e){super(t,e),this.buffer=new ArrayBuffer(2e4),this.view=new DataView(this.buffer),this.now=0,this.nowSize=0,this.slots=[]}createLengthSlot(){const t=[this.nowSize,this.now];return this.slots.push(t),this.now+=4,t}fillLengthSlot(t){const e=this.nowSize-t[0];this.nowSize+=i.getLeb128UintLength(e),this.view.setUint32(t[1],e)}writeByte(t){this.view.setUint8(this.now++,t),this.nowSize++}writeBytes(t){for(const e of t)this.view.setUint8(this.now++,e),this.nowSize++}emit(r,s){switch(r){case e.WType.none:break;case e.WType.u8:if("string"==typeof s)throw new t.InternalError("unexpected string");this.view.setUint8(this.now,s),this.now+=1,this.nowSize+=1;break;case e.WType.u32:case e.WType.u64:i.writeLeb128Uint(this,s);break;case e.WType.i32:case e.WType.i64:i.writeLeb128Int(this,s);break;case e.WType.f32:if("string"==typeof s)throw new t.InternalError("unexpected string");this.view.setFloat32(this.now,s,!0),this.now+=4,this.nowSize+=4;break;case e.WType.f64:if("string"==typeof s)throw new t.InternalError("unexpected string");this.view.setFloat64(this.now,s,!0),this.now+=8,this.nowSize+=8;break;case e.WType.str:if("number"==typeof s)throw new t.InternalError("unexpected string");n.writeUtf8String(this,s);break;default:throw new t.InternalError("unexpected wtype")}}emitIns(t,i,n,r,o){this.writeByte(t),o&&this.emit(e.WType.u32,s(n)),this.emit(i,n)}enterFunction(t){this.ctx.setCurrentFunc(t)}submitFunction(){this.ctx.setCurrentFunc(null)}toArrayBuffer(){const e=new ArrayBuffer(this.nowSize),n=new Uint8Array(e),r=new DataView(e),s=new Uint8Array(this.buffer),o={view:r,now:0,nowSize:0};let w=0;for(const t of this.slots){t[1]!==w&&(n.set(s.slice(w,t[1]),o.now),o.now+=t[1]-w);const e=this.view.getUint32(t[1]);i.writeLeb128Uint(o,e),w=t[1]+4}if(n.set(s.slice(w,this.now),o.now),o.now+=this.now-w,o.now!==this.nowSize)throw new t.InternalError("something wrong");return e}}exports.WASMEmitter=o;
},{"../../common/error":"nOPH","../tool/constant":"Mjkt","../tool/leb128":"vx3y","../tool/utf8":"IP4m","./emitter":"Oljm"}],"4+4S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../node");class t extends e.WNode{}exports.WStatement=t;
},{"../node":"2721"}],"jyf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../tool/constant"),r=require("./wstatement");class i extends r.WStatement{constructor(e,t){super(t),this.expr=e,null!==e&&(this.expr=e)}emit(r){const i=r.ctx.getCurrentFunc();if(0===i.type.returnTypes.length&&null!==this.expr)throw new e.EmitError("type mismatch at WReturn");if(0!==i.type.returnTypes.length){if(null===this.expr)throw new e.EmitError("type mismatch at WReturn");const n=this.expr.deduceType(r);if(t.getNativeType(n)!==t.getNativeType(i.type.returnTypes[0]))throw new e.EmitError("type mismatch at WReturn")}null!==this.expr&&this.expr.emit(r),r.emitIns(t.Control.return,t.WType.none,0,this.location)}optimize(e){null!==this.expr&&(this.expr=this.expr.fold(),this.expr.optimize(e))}}exports.WReturn=i;
},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wstatement":"4+4S"}],"YvD4":[function(require,module,exports) {
module.exports=t;var i=null;try{i=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(L){}function t(i,t,n){this.low=0|i,this.high=0|t,this.unsigned=!!n}function n(i){return!0===(i&&i.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var h={},s={};function e(i,t){var n,e,r;return t?(r=0<=(i>>>=0)&&i<256)&&(e=s[i])?e:(n=u(i,(0|i)<0?-1:0,!0),r&&(s[i]=n),n):(r=-128<=(i|=0)&&i<128)&&(e=h[i])?e:(n=u(i,i<0?-1:0,!1),r&&(h[i]=n),n)}function r(i,t){if(isNaN(i))return t?N:m;if(t){if(i<0)return N;if(i>=c)return p}else{if(i<=-w)return _;if(i+1>=w)return q}return i<0?r(-i,t).neg():u(i%d|0,i/d|0,t)}function u(i,n,h){return new t(i,n,h)}t.fromInt=e,t.fromNumber=r,t.fromBits=u;var o=Math.pow;function g(i,t,n){if(0===i.length)throw Error("empty string");if("NaN"===i||"Infinity"===i||"+Infinity"===i||"-Infinity"===i)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var h;if((h=i.indexOf("-"))>0)throw Error("interior hyphen");if(0===h)return g(i.substring(1),t,n).neg();for(var s=r(o(n,8)),e=m,u=0;u<i.length;u+=8){var f=Math.min(8,i.length-u),l=parseInt(i.substring(u,u+f),n);if(f<8){var a=r(o(n,f));e=e.mul(a).add(r(l))}else e=(e=e.mul(s)).add(r(l))}return e.unsigned=t,e}function f(i,t){return"number"==typeof i?r(i,t):"string"==typeof i?g(i,t):u(i.low,i.high,"boolean"==typeof t?t:i.unsigned)}t.fromString=g,t.fromValue=f;var l=65536,a=1<<24,d=l*l,c=d*d,w=c/2,v=e(a),m=e(0);t.ZERO=m;var N=e(0,!0);t.UZERO=N;var E=e(1);t.ONE=E;var y=e(1,!0);t.UONE=y;var b=e(-1);t.NEG_ONE=b;var q=u(-1,2147483647,!1);t.MAX_VALUE=q;var p=u(-1,-1,!0);t.MAX_UNSIGNED_VALUE=p;var _=u(0,-2147483648,!1);t.MIN_VALUE=_;var B=t.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},B.toString=function(i){if((i=i||10)<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=r(i),n=this.div(t),h=n.mul(t).sub(this);return n.toString(i)+h.toInt().toString(i)}return"-"+this.neg().toString(i)}for(var s=r(o(i,6),this.unsigned),e=this,u="";;){var g=e.div(s),f=(e.sub(g.mul(s)).toInt()>>>0).toString(i);if((e=g).isZero())return f+u;for(;f.length<6;)f="0"+f;u=""+f+u}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var i=0!=this.high?this.high:this.low,t=31;t>0&&0==(i&1<<t);t--);return 0!=this.high?t+33:t+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return 1==(1&this.low)},B.isEven=function(){return 0==(1&this.low)},B.equals=function(i){return n(i)||(i=f(i)),(this.unsigned===i.unsigned||this.high>>>31!=1||i.high>>>31!=1)&&(this.high===i.high&&this.low===i.low)},B.eq=B.equals,B.notEquals=function(i){return!this.eq(i)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(i){return this.comp(i)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(i){return this.comp(i)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(i){return this.comp(i)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(i){return this.comp(i)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(i){if(n(i)||(i=f(i)),this.eq(i))return 0;var t=this.isNegative(),h=i.isNegative();return t&&!h?-1:!t&&h?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(E)},B.neg=B.negate,B.add=function(i){n(i)||(i=f(i));var t=this.high>>>16,h=65535&this.high,s=this.low>>>16,e=65535&this.low,r=i.high>>>16,o=65535&i.high,g=i.low>>>16,l=0,a=0,d=0,c=0;return d+=(c+=e+(65535&i.low))>>>16,a+=(d+=s+g)>>>16,l+=(a+=h+o)>>>16,l+=t+r,u((d&=65535)<<16|(c&=65535),(l&=65535)<<16|(a&=65535),this.unsigned)},B.subtract=function(i){return n(i)||(i=f(i)),this.add(i.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return m;if(n(t)||(t=f(t)),i)return u(i.mul(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(_))return t.isOdd()?_:m;if(t.eq(_))return this.isOdd()?_:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(v)&&t.lt(v))return r(this.toNumber()*t.toNumber(),this.unsigned);var h=this.high>>>16,s=65535&this.high,e=this.low>>>16,o=65535&this.low,g=t.high>>>16,l=65535&t.high,a=t.low>>>16,d=65535&t.low,c=0,w=0,N=0,E=0;return N+=(E+=o*d)>>>16,w+=(N+=e*d)>>>16,N&=65535,w+=(N+=o*a)>>>16,c+=(w+=s*d)>>>16,w&=65535,c+=(w+=e*a)>>>16,w&=65535,c+=(w+=o*l)>>>16,c+=h*d+s*a+e*l+o*g,u((N&=65535)<<16|(E&=65535),(c&=65535)<<16|(w&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(n(t)||(t=f(t)),t.isZero())throw Error("division by zero");var h,s,e;if(i)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?i.div_u:i.div_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?N:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return N;if(t.gt(this.shru(1)))return y;e=N}else{if(this.eq(_))return t.eq(E)||t.eq(b)?_:t.eq(_)?E:(h=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?E:b:(s=this.sub(t.mul(h)),e=h.add(s.div(t)));if(t.eq(_))return this.unsigned?N:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();e=m}for(s=this;s.gte(t);){h=Math.max(1,Math.floor(s.toNumber()/t.toNumber()));for(var g=Math.ceil(Math.log(h)/Math.LN2),l=g<=48?1:o(2,g-48),a=r(h),d=a.mul(t);d.isNegative()||d.gt(s);)d=(a=r(h-=l,this.unsigned)).mul(t);a.isZero()&&(a=E),e=e.add(a),s=s.sub(d)}return e},B.div=B.divide,B.modulo=function(t){return n(t)||(t=f(t)),i?u((this.unsigned?i.rem_u:i.rem_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return u(~this.low,~this.high,this.unsigned)},B.and=function(i){return n(i)||(i=f(i)),u(this.low&i.low,this.high&i.high,this.unsigned)},B.or=function(i){return n(i)||(i=f(i)),u(this.low|i.low,this.high|i.high,this.unsigned)},B.xor=function(i){return n(i)||(i=f(i)),u(this.low^i.low,this.high^i.high,this.unsigned)},B.shiftLeft=function(i){return n(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?u(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):u(0,this.low<<i-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(i){return n(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?u(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):u(this.high>>i-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(i){if(n(i)&&(i=i.toInt()),0===(i&=63))return this;var t=this.high;return i<32?u(this.low>>>i|t<<32-i,t>>>i,this.unsigned):u(32===i?t:t>>>i-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},B.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var i=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&i,i>>>8&255,i>>>16&255,i>>>24]},B.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24,i>>>16&255,i>>>8&255,255&i,t>>>24,t>>>16&255,t>>>8&255,255&t]},t.fromBytes=function(i,n,h){return h?t.fromBytesLE(i,n):t.fromBytesBE(i,n)},t.fromBytesLE=function(i,n){return new t(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,n)},t.fromBytesBE=function(i,n){return new t(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],n)};
},{}],"eYtb":[function(require,module,exports) {
"use strict";var r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var a in r)Object.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e.default=r,e};Object.defineProperty(exports,"__esModule",{value:!0});const e=r(require("long")),a=require("../../common/error"),n=require("./constant");function s(r,e){switch(r){case n.F32Unary.abs:case n.F64Unary.abs:return Math.abs(e);case n.F32Unary.ceil:case n.F64Unary.ceil:return Math.ceil(e);case n.F32Unary.floor:case n.F64Unary.floor:return Math.floor(e);case n.F32Unary.nearest:case n.F64Unary.nearest:return Math.floor(e+.5);case n.F32Unary.trunc:case n.F64Unary.trunc:return 0|e;case n.F32Unary.sqrt:case n.F64Unary.sqrt:return Math.sqrt(e);case n.I32Unary.eqz:case n.I64Unary.eqz:return+(0===e);case n.F32Unary.neg:case n.F64Unary.neg:return-e}throw new a.RuntimeError(`unsupport operator ${r}`)}function t(r,s){switch(r){case n.I64Unary.eqz:return e.fromNumber(+s.eq(0))}throw new a.RuntimeError(`unsupport operator ${r}`)}function i(r,s,t){switch(r){case n.I64Binary.add:return s.add(t);case n.I64Binary.sub:case n.I64Binary.mul:return s.sub(t);case n.I64Binary.div_s:case n.I64Binary.div_u:return s.div(t);case n.I64Binary.rem_s:case n.I64Binary.rem_u:return s.mod(t);case n.I64Binary.ge_s:case n.I64Binary.ge_u:return e.fromNumber(+s.gte(t));case n.I64Binary.gt_s:case n.I64Binary.gt_u:return e.fromNumber(+s.gt(t));case n.I64Binary.le_s:case n.I64Binary.le_u:return e.fromNumber(+s.lte(t));case n.I64Binary.lt_s:case n.I64Binary.lt_u:return e.fromNumber(+s.lt(t));case n.I64Binary.ne:return e.fromNumber(+s.neq(t));case n.I64Binary.eq:return e.fromNumber(+s.eq(t));case n.I64Binary.and:return s.and(t);case n.I64Binary.or:return s.or(t);case n.I64Binary.xor:return s.xor(t);case n.I64Binary.shl:return s.shl(t);case n.I64Binary.shr_s:return s.shr(t);case n.I64Binary.shr_u:return s.shru(t)}throw new a.RuntimeError(`unsupport operator ${r}`)}function c(r,e,s){switch(r){case n.I32Binary.add:case n.F32Binary.add:case n.F64Binary.add:return e+s;case n.I32Binary.sub:case n.F32Binary.sub:case n.F64Binary.sub:return e-s;case n.I32Binary.mul:case n.F32Binary.mul:case n.F64Binary.mul:return e*s;case n.I32Binary.div_s:case n.I32Binary.div_u:case n.F32Binary.div:case n.F64Binary.div:return e/s;case n.I32Binary.rem_s:case n.I32Binary.rem_u:return e%s;case n.I32Binary.ge_s:case n.I32Binary.ge_u:return+(e>=s);case n.I32Binary.gt_s:case n.I32Binary.gt_u:case n.F32Binary.gt:case n.F64Binary.gt:return+(e>s);case n.I32Binary.le_s:case n.I32Binary.le_u:case n.F32Binary.le:case n.F64Binary.le:return+(e<=s);case n.I32Binary.lt_s:case n.I32Binary.lt_u:case n.F32Binary.lt:case n.F64Binary.lt:return+(e<s);case n.I32Binary.eq:case n.F32Binary.eq:case n.F64Binary.eq:return+(e===s);case n.I32Binary.ne:case n.F32Binary.ne:case n.F64Binary.ne:return+(e!==s);case n.I32Binary.and:return+(e&s);case n.I32Binary.or:return+(e|s);case n.I32Binary.xor:return+(e^s);case n.I32Binary.shl:return e<<s;case n.I32Binary.shr_s:return e>>s;case n.I32Binary.shr_u:return e>>>s;case n.F32Binary.copysign:case n.F64Binary.copysign:return s>0?Math.abs(e):-Math.abs(e);case n.F32Binary.max:case n.F64Binary.max:return Math.max(e,s);case n.F32Binary.min:case n.F64Binary.min:return Math.min(e,s)}throw new a.RuntimeError(`unsupport operator ${r}`)}exports.doUnaryCompute=s,exports.doLongUnaryCompute=t,exports.doLongBinaryCompute=i,exports.doBinaryCompute=c;
},{"long":"YvD4","../../common/error":"nOPH","./constant":"Mjkt"}],"F3ye":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var s={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(s[e]=t[e]);return s.default=t,s};Object.defineProperty(exports,"__esModule",{value:!0});const s=t(require("long")),e=require("../../common/error"),i=require("../tool/calculator"),r=require("../tool/constant"),o=require("./wconst"),n=require("./wexpression");class h extends n.WExpression{constructor(t,s,e,i){super(i),this.ope=t,this.lhs=s,this.rhs=e}emit(t){this.lhs.emit(t),this.rhs.emit(t),t.emitIns(this.ope,r.WType.none,0,this.location)}deduceType(t){const s=r.getNativeType(this.lhs.deduceType(t));if(s!==r.getNativeType(this.rhs.deduceType(t))||r.OpTypeMap.get(this.ope)!==s)throw new e.EmitError("type mismatch in binaryope");return s}fold(){if(this.lhs=this.lhs.fold(),this.rhs=this.rhs.fold(),this.lhs instanceof o.WConst&&this.rhs instanceof o.WConst){const t=r.OpTypeMap.get(this.ope);return t===r.WType.f32||t===r.WType.f64?new o.WConst(t,i.doBinaryCompute(this.ope,parseFloat(this.lhs.constant),parseFloat(this.rhs.constant)).toString(),this.location):t===r.WType.i32?new o.WConst(t,i.doBinaryCompute(this.ope,parseInt(this.lhs.constant),parseInt(this.rhs.constant)).toString(),this.location):new o.WConst(t,i.doLongBinaryCompute(this.ope,s.fromString(this.lhs.constant),s.fromString(this.rhs.constant)).toString(),this.location)}return this}isPure(){return this.lhs.isPure()&&this.rhs.isPure()}}exports.WBinaryOperation=h;
},{"long":"YvD4","../../common/error":"nOPH","../tool/calculator":"eYtb","../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],"7ccR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../emitter/json_emitter"),s=require("../expression/wbinary_operation"),r=require("../expression/wconst"),i=require("../expression/wexpression"),o=require("../tool/constant"),a=require("./wstatement");class n extends a.WStatement{constructor(e,t,s,r=i.WMemoryLocation.RAW,o){super(o),this.type=e,this.address=t,this.value=s,this.offset=0,this.form=r,this.offsetName=""}getOp(){switch(this.type){case o.WType.u8:case o.WType.i8:return o.I32.store8;case o.WType.i16:case o.WType.u16:return o.I32.store16;case o.WType.i32:case o.WType.u32:return o.I32.store;case o.WType.f32:return o.F32.store;case o.WType.f64:return o.F64.store;case o.WType.i64:case o.WType.u64:return o.I64.store}}emit(e){const s=this.computeOffset(e);this.address.emit(e),this.value.emit(e),e.emitIns(this.getOp(),o.WType.u32,s,this.location,!0),e instanceof t.JSONEmitter&&e.memoryInfo.push([e.insBuffer.length,this.form,this.offset])}replaceAddress(){this.address=new s.WBinaryOperation(o.I32Binary.add,this.address,new r.WConst(o.WType.i32,this.offset.toString(),this.location),this.location),this.offset=0}optimize(e){this.value=this.value.fold(),this.value.optimize(e),this.address=this.address.fold(),this.address.optimize(e)}computeOffset(t){if(o.getNativeType(this.value.deduceType(t))!==o.getNativeType(this.type))throw new e.EmitError(`type mismatch at store: ${this.value.deduceType(t)} and ${this.type}`);if(this.address.deduceType(t)!==o.WType.u32&&this.address.deduceType(t)!==o.WType.i32)throw new e.EmitError("type mismatch at store, address");let s=this.offset;return this.form===i.WMemoryLocation.DATA?s+=t.ctx.getCurrentFunc().dataStart:this.form===i.WMemoryLocation.BSS?s+=t.ctx.getCurrentFunc().bssStart:this.form===i.WMemoryLocation.EXTERN&&(s+=t.ctx.getExternLocation(this.offsetName)),s<0&&(this.replaceAddress(),s=0),s}}exports.WStore=n;
},{"../../common/error":"nOPH","../emitter/json_emitter":"NDfV","../expression/wbinary_operation":"F3ye","../expression/wconst":"PxFK","../expression/wexpression":"oShx","../tool/constant":"Mjkt","./wstatement":"4+4S"}],"naKk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wstatement");class s extends t.WStatement{constructor(e,t){super(t),this.labelIdx=e}emit(t){t.emitIns(e.Control.br,e.WType.u32,this.labelIdx,this.location)}}exports.WBr=s;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"0T5+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./wstatement");class t extends e.WStatement{constructor(e,t){super(t),this.expr=e}emit(e){this.expr.emit(e)}optimize(e){this.expr=this.expr.fold(),this.expr.optimize(e)}}exports.WExprStatement=t;
},{"./wstatement":"4+4S"}],"RZJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wstatement");class o extends e.WStatement{constructor(t,e){super(e),this.body=t}emit(e){e.emitIns(t.Control.block,t.WType.u8,64,this.location),this.body.map(t=>t.emit(e)),e.emitIns(t.Control.end,t.WType.none,0,this.location)}optimize(t){this.body.map(e=>e.optimize(t))}}exports.WBlock=o;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"4qtc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wstatement");class s extends e.WStatement{constructor(t,e,s,i){super(i),this.type=t,this.offset=e,this.value=s}emit(e){this.value.emit(e),e.emitIns(t.Control.set_local,t.WType.u32,this.offset,this.location)}optimize(t){this.value=this.value.fold(),this.value.optimize(t)}}exports.WSetLocal=s;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"0pic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../common/error"),e=require("../tool/constant"),o=require("./wstatement");class i extends o.WStatement{constructor(t,e,o,i){super(i),this.type=t,this.name=e,this.value=o}emit(o){if(o.ctx.getGlobalInfo(this.name).type!==this.type)throw new t.EmitError("type mismatch at set_global");this.value.emit(o),o.emitIns(e.Control.set_global,e.WType.u32,o.ctx.getGlobalInfo(this.name).id,this.location)}optimize(t){this.value=this.value.fold(),this.value.optimize(t)}}exports.WSetGlobal=i;
},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wstatement":"4+4S"}],"mruT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wstatement");class o extends e.WStatement{constructor(t,e){super(e),this.body=t}emit(e){e.emitIns(t.Control.loop,t.WType.u8,64,this.location),this.body.map(t=>t.emit(e)),e.emitIns(t.Control.end,t.WType.none,0,this.location)}optimize(t){this.body.map(e=>e.optimize(t))}}exports.WLoop=o;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"Pex/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wstatement");class s extends t.WStatement{constructor(e,t,s){super(s),this.labelIdx=e,this.expression=t}emit(t){this.expression.emit(t),t.emitIns(e.Control.br_if,e.WType.u32,this.labelIdx,this.location)}optimize(e){this.expression=this.expression.fold(),this.expression.optimize(e)}}exports.WBrIf=s;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"ZrC/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wstatement");class i extends e.WStatement{constructor(t,e,i,n){super(n),this.condition=t,this.consequence=e,this.alternative=i}emit(e){this.condition.emit(e),e.emitIns(t.Control.if,t.WType.u8,64,this.location),this.consequence.map(t=>t.emit(e)),null!==this.alternative&&(e.emitIns(t.Control.else,t.WType.none,0,this.location),this.alternative.map(t=>t.emit(e))),e.emitIns(t.Control.end,t.WType.none,0,this.location)}optimize(t){this.condition=this.condition.fold(),this.condition.optimize(t),this.consequence.map(e=>e.optimize(t)),null!==this.alternative&&this.alternative.map(e=>e.optimize(t))}}exports.WIfElseBlock=i;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"/IVp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wstatement");class o extends t.WStatement{constructor(e,t){super(t),this.value=e}emit(t){this.value.emit(t),t.emitIns(e.Control.drop,e.WType.none,0,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}}exports.WDrop=o;
},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"tSX5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../emitter/json_emitter"),e=require("../tool/constant"),r=require("./wexpression");class s extends r.WExpression{constructor(t,e){super(e),this.form=t,this.offset=0,this.offsetName=""}emit(s){let o=this.offset;this.form===r.WMemoryLocation.DATA?o+=s.ctx.getCurrentFunc().dataStart:this.form===r.WMemoryLocation.BSS?o+=s.ctx.getCurrentFunc().bssStart:this.form===r.WMemoryLocation.EXTERN&&(o+=s.ctx.getExternLocation(this.offsetName)),s.emitIns(e.I32.const,e.WType.u32,o,this.location),s instanceof t.JSONEmitter&&s.memoryInfo.push([s.insBuffer.length,this.form,this.offset])}deduceType(t){return e.WType.i32}fold(){return this}isPure(){return!0}}exports.WGetAddress=s;
},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wexpression":"oShx"}],"OYOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wexpression");class s extends t.WExpression{constructor(e,t){super(t),this.name=e}emit(t){t.emitIns(e.I32.const,e.WType.u32,t.ctx.getFuncInfo(this.name).id,this.location)}deduceType(t){return e.WType.i32}isPure(){return!0}}exports.WGetFunctionAddress=s;
},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],"plV9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../tool/constant"),r=require("./wexpression");class o extends r.WExpression{constructor(e,t,r){super(r),this.type=e,this.name=t}emit(e){e.emitIns(t.Control.get_global,t.WType.u32,e.ctx.getGlobalInfo(this.name).id,this.location)}deduceType(t){if(this.type!==t.ctx.getGlobalInfo(this.name).type)throw new e.EmitError("type mismatch at getglobal");return this.type}isPure(){return!0}}exports.WGetGlobal=o;
},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wexpression":"oShx"}],"MsEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../common/error"),e=require("./wexpression");class o extends e.WExpression{constructor(r){super(r)}deduceType(e){throw new r.EmitError("internal error")}emit(e){throw new r.EmitError("internal error")}isPure(){throw new r.EmitError("internal error")}}exports.WEmptyExpression=o;
},{"../../common/error":"nOPH","./wexpression":"oShx"}],"RunS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("./wexpression");class t extends r.WExpression{constructor(e,r){super(r),this.statement=e}deduceType(r){throw new e.EmitError("internal error")}emit(e){this.statement.emit(e)}isPure(){return!1}}exports.WFakeExpression=t;
},{"../../common/error":"nOPH","./wexpression":"oShx"}],"+Xtb":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("long")),o=require("../../common/error"),r=require("../tool/calculator"),n=require("../tool/constant"),i=require("./wconst"),s=require("./wexpression");class p extends s.WExpression{constructor(e,t,o){super(o),this.ope=e,this.operand=t}emit(e){this.operand.emit(e),e.emitIns(this.ope,n.WType.none,0,this.location)}deduceType(e){if(n.getNativeType(this.operand.deduceType(e))!==n.OpTypeMap.get(this.ope))throw new o.EmitError("type mismatch at unary ope");return this.operand.deduceType(e)}fold(){if(this.operand=this.operand.fold(),this.operand instanceof i.WConst){const e=n.OpTypeMap.get(this.ope);return e===n.WType.f32||e===n.WType.f64?new i.WConst(e,r.doUnaryCompute(this.ope,parseFloat(this.operand.constant)).toString(),this.location):e===n.WType.i32?new i.WConst(e,r.doUnaryCompute(this.ope,parseInt(this.operand.constant)).toString(),this.location):new i.WConst(e,r.doLongUnaryCompute(this.ope,t.fromString(this.operand.constant)).toString(),this.location)}return this}isPure(){return this.operand.isPure()}}exports.WUnaryOperation=p;
},{"long":"YvD4","../../common/error":"nOPH","../tool/calculator":"eYtb","../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],"nyM5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../tool/constant"),i=require("./wexpression");class n extends i.WExpression{constructor(e,t,i,n){super(n),this.condition=e,this.consequence=t,this.alternative=i}deduceType(i){const n=this.consequence.deduceType(i),o=this.alternative.deduceType(i);if(t.getNativeType(n)===t.getNativeType(o))return t.getNativeType(n);throw new e.EmitError("type mismatch at contional expression")}isPure(){return this.condition.isPure()&&this.alternative.isPure()&&this.alternative.isPure()}emit(e){this.condition.emit(e),e.emitIns(t.Control.if,t.WType.u8,this.deduceType(e),this.location),this.consequence.emit(e),e.emitIns(t.Control.else,t.WType.none,0,this.location),this.alternative.emit(e),e.emitIns(t.Control.end,t.WType.none,0,this.location)}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.alternative=this.alternative.fold(),this.alternative.optimize(e),this.consequence=this.consequence.fold(),this.consequence.optimize(e)}}exports.WConditionalExpression=n;
},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wexpression":"oShx"}],"by6o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wexpression");class s extends t.WExpression{constructor(e,t,s){super(s),this.type=e,this.offset=t}emit(t){t.emitIns(e.Control.get_local,e.WType.u32,this.offset,this.location)}deduceType(e){return this.type}isPure(){return!0}}exports.WGetLocal=s;
},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],"RUVF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../section/wfunction_type"),e=require("../tool/constant"),i=require("./wexpression");class n extends i.WExpression{constructor(t,e,i,n,r){super(r),this.target=t,this.typeEncoding=e,this.argument=i,this.afterStatements=n}emit(t){this.argument.map(e=>e.emit(t)),this.target.emit(t),t.emitIns(e.Control.call_indirect,e.WType.u8,t.ctx.getTypeIdxFromEncoding(this.typeEncoding),this.location),t.writeByte(0),this.afterStatements.map(e=>e.emit(t))}deduceType(i){return"v"===this.typeEncoding.charAt(0)?e.WType.none:t.WFunctionType.s2n(this.typeEncoding.charAt(0))}fold(){return this.argument=this.argument.map(t=>t.fold()),this}isPure(){return!1}}exports.WCallIndirect=n;
},{"../section/wfunction_type":"ojST","../tool/constant":"Mjkt","./wexpression":"oShx"}],"r5Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../tool/constant"),t=require("./wbinary_operation"),s=require("./wconst"),r=require("./wexpression"),i=require("../emitter/json_emitter");class o extends r.WExpression{constructor(e,t,s=r.WMemoryLocation.RAW,i){super(i),this.type=e,this.address=t,this.form=s,this.offset=0,this.offsetName=""}getOp(){switch(this.type){case e.WType.u8:return e.I32.load8_u;case e.WType.u16:return e.I32.load16_u;case e.WType.i8:return e.I32.load8_s;case e.WType.i16:return e.I32.load16_s;case e.WType.i32:case e.WType.u32:return e.I32.load;case e.WType.f32:return e.F32.load;case e.WType.f64:return e.F64.load;case e.WType.i64:case e.WType.u64:return e.I64.load}}emit(t){let s=this.offset;this.form===r.WMemoryLocation.DATA?s+=t.ctx.getCurrentFunc().dataStart:this.form===r.WMemoryLocation.BSS?s+=t.ctx.getCurrentFunc().bssStart:this.form===r.WMemoryLocation.EXTERN&&(s+=t.ctx.getExternLocation(this.offsetName)),s<0&&(this.replaceAddress(),s=0),this.address.emit(t),t.emitIns(this.getOp(),e.WType.u32,s,this.location,!0),t instanceof i.JSONEmitter&&t.memoryInfo.push([t.insBuffer.length,this.form,this.offset])}replaceAddress(){this.address=new t.WBinaryOperation(e.I32Binary.add,this.address,new s.WConst(e.WType.i32,this.offset.toString(),this.location),this.location),this.offset=0}deduceType(e){return this.type}fold(){return this.address=this.address.fold(),this}isPure(){return this.address.isPure()}}exports.WLoad=o;
},{"../tool/constant":"Mjkt","./wbinary_operation":"F3ye","./wconst":"PxFK","./wexpression":"oShx","../emitter/json_emitter":"NDfV"}],"GMhh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require(".."),t=require("../../common/error");class r extends e.WExpression{constructor(e,t,r,s){super(s),this.target=e,this.argument=t,this.afterStatements=r}emit(t){this.argument.map(e=>e.emit(t)),t.emitIns(e.Control.call,e.WType.u32,t.ctx.getFuncInfo(this.target).id,this.location),this.afterStatements.map(e=>e.emit(t))}deduceType(r){const s=r.ctx.getFuncInfo(this.target).type,n=this.argument.filter(t=>!(t instanceof e.WFakeExpression)).map(e=>e.deduceType(r));if(s.parameters.map(t=>e.getNativeType(t)).join(",")!==n.map(t=>e.getNativeType(t)).join(","))throw new t.EmitError("type mismatch at call");return 0===s.returnTypes.length?e.WType.none:s.returnTypes[0]}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}}exports.WCall=r;
},{"..":"Jo9c","../../common/error":"nOPH"}],"Qt9t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../tool/constant"),e=require("./wconst"),s=require("./wexpression");class n extends s.WExpression{constructor(t,e,s,n,o){super(o),this.srcType=t,this.dstType=e,this.operand=s,this.ope=n}emit(e){this.operand.emit(e),e.emitIns(this.ope,t.WType.none,0,this.location)}deduceType(t){return this.dstType}fold(){return this.operand=this.operand.fold(),this.operand instanceof e.WConst?(this.dstType===t.WType.f32||this.dstType===t.WType.f64?this.operand.constant=parseFloat(this.operand.constant).toString():this.operand.constant=parseInt(this.operand.constant).toString(),this.operand.type=this.dstType,this.operand):this}isPure(){return this.operand.isPure()}}exports.WCovertOperation=n;
},{"../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],"anfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./node"),e=require("./section/wcode_section"),i=require("./section/wdata_section"),o=require("./section/welement_section"),n=require("./section/wexport_function"),c=require("./section/wexport_section"),s=require("./section/wfunction_section"),r=require("./section/wfunction_type"),u=require("./section/wglobal_section"),h=require("./section/wimport_function"),a=require("./section/wimport_section"),l=require("./section/wmemory_section"),p=require("./section/wtable"),m=require("./section/wtable_section"),S=require("./section/wtype_section");class w extends t.WNode{constructor(t,w){super(w),this.functions=t.functions,this.funcTypes=[],this.importFunctions=t.imports.filter(t=>t instanceof h.WImportFunction).map(t=>t);for(const e of[...this.importFunctions,...t.functions])e.signatureId=this.funcTypes.length,this.funcTypes.push(e.type);const f=this.funcTypes.length;for(const e of t.requiredFuncTypes)this.funcTypes.push(r.WFunctionType.fromEncoding(e,this.location));this.generateMemory=t.generateMemory;const y=t.exports.map(t=>new n.WExportFunction(t,this.location));this.globalSection=new u.WGlobalSection(t.globals,this.location),this.importSection=new a.WImportSection(t.imports,this.location),this.memorySection=new l.WMemorySection([[2,null]],this.location),this.functionSection=new s.WFunctionSection(t.functions,this.location),this.typeSection=new S.WTypeSection(this.funcTypes,this.location),this.codeSection=new e.WCodeSection(t.functions,this.location),this.exportSection=new c.WExportSection(y,this.location),this.dataSection=new i.WDataSection(t.data,this.location),this.tableSection=new m.WTableSection([new p.WTable(f,this.location)],this.location),this.elementSection=new o.WElementSection(f,this.location)}emit(t){t.writeBytes([0,97,115,109]),t.writeBytes([1,0,0,0]),this.typeSection.emit(t),this.importSection.emit(t),this.functionSection.emit(t),this.tableSection.emit(t),this.generateMemory&&this.memorySection.emit(t),this.globalSection.emit(t),this.exportSection.emit(t),this.elementSection.emit(t),this.codeSection.emit(t),this.dataSection.emit(t)}optimize(t){this.codeSection.optimize(t)}}exports.WModule=w;
},{"./node":"2721","./section/wcode_section":"F72u","./section/wdata_section":"ZUlG","./section/welement_section":"tUq0","./section/wexport_function":"phuN","./section/wexport_section":"F1I7","./section/wfunction_section":"S9g4","./section/wfunction_type":"ojST","./section/wglobal_section":"fjK8","./section/wimport_function":"ijtQ","./section/wimport_section":"vZqF","./section/wmemory_section":"39xj","./section/wtable":"/p2P","./section/wtable_section":"tP0H","./section/wtype_section":"QzxS"}],"Jo9c":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0});const r=require("./tool/constant");exports.i32=r.WType.i32,exports.i64=r.WType.i64,exports.f32=r.WType.f32,exports.f64=r.WType.f64,exports.u32=r.WType.u32,exports.u64=r.WType.u64,exports.i8=r.WType.i8,exports.u8=r.WType.u8,exports.i16=r.WType.i16,exports.u16=r.WType.u16,e(require("./section/wcode_section")),e(require("./section/wexport_section")),e(require("./section/wimport_memory")),e(require("./section/wfunction")),e(require("./section/wimport_section")),e(require("./section/wdata_section")),e(require("./section/wexport_function")),e(require("./section/wfunction_type")),e(require("./section/wmemory_section")),e(require("./section/wfunction_section")),e(require("./section/wtable")),e(require("./section/wglobal_variable")),e(require("./section/welement_section")),e(require("./section/wimport_item")),e(require("./section/wimport_function")),e(require("./section/wsection")),e(require("./section/wtype_section")),e(require("./section/welement")),e(require("./section/wtable_section")),e(require("./section/wglobal_section")),e(require("./section/wdata_segment")),e(require("./emitter/emitter")),e(require("./emitter/emitter_context")),e(require("./emitter/wasm_emitter")),e(require("./emitter/json_emitter")),e(require("./statement/wreturn")),e(require("./statement/wstore")),e(require("./statement/wbr")),e(require("./statement/wexpr_statement")),e(require("./statement/wblock")),e(require("./statement/wset_local")),e(require("./statement/wset_global")),e(require("./statement/wloop")),e(require("./statement/wbr_if")),e(require("./statement/wif_else_block")),e(require("./statement/wstatement")),e(require("./statement/wdrop")),e(require("./expression/wget_address")),e(require("./expression/wget_function_address")),e(require("./expression/wexpression")),e(require("./expression/wget_global")),e(require("./expression/wempty_expression")),e(require("./expression/wfake_expression")),e(require("./expression/wunary_operation")),e(require("./expression/wbinary_operation")),e(require("./expression/wconst")),e(require("./expression/wconditional_expression")),e(require("./expression/wget_local")),e(require("./expression/wcall_indirect")),e(require("./expression/wload")),e(require("./expression/wcall")),e(require("./expression/wcovert_operation")),e(require("./tool/constant")),e(require("./module"));
},{"./tool/constant":"Mjkt","./section/wcode_section":"F72u","./section/wexport_section":"F1I7","./section/wimport_memory":"NgQr","./section/wfunction":"qolR","./section/wimport_section":"vZqF","./section/wdata_section":"ZUlG","./section/wexport_function":"phuN","./section/wfunction_type":"ojST","./section/wmemory_section":"39xj","./section/wfunction_section":"S9g4","./section/wtable":"/p2P","./section/wglobal_variable":"1gFT","./section/welement_section":"tUq0","./section/wimport_item":"FxaF","./section/wimport_function":"ijtQ","./section/wsection":"l0JX","./section/wtype_section":"QzxS","./section/welement":"uAfS","./section/wtable_section":"tP0H","./section/wglobal_section":"fjK8","./section/wdata_segment":"KHMQ","./emitter/emitter":"Oljm","./emitter/emitter_context":"7DOa","./emitter/wasm_emitter":"xpa/","./emitter/json_emitter":"NDfV","./statement/wreturn":"jyf9","./statement/wstore":"7ccR","./statement/wbr":"naKk","./statement/wexpr_statement":"0T5+","./statement/wblock":"RZJs","./statement/wset_local":"4qtc","./statement/wset_global":"0pic","./statement/wloop":"mruT","./statement/wbr_if":"Pex/","./statement/wif_else_block":"ZrC/","./statement/wstatement":"4+4S","./statement/wdrop":"/IVp","./expression/wget_address":"tSX5","./expression/wget_function_address":"OYOz","./expression/wexpression":"oShx","./expression/wget_global":"plV9","./expression/wempty_expression":"MsEL","./expression/wfake_expression":"RunS","./expression/wunary_operation":"+Xtb","./expression/wbinary_operation":"F3ye","./expression/wconst":"PxFK","./expression/wconditional_expression":"nyM5","./expression/wget_local":"by6o","./expression/wcall_indirect":"RUVF","./expression/wload":"r5Cf","./expression/wcall":"GMhh","./expression/wcovert_operation":"Qt9t","./module":"anfc"}],"xWpI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),r=require("./index");class n extends r.Type{get length(){throw new e.InternalError("undefined behavior")}toMangledName(){throw new e.InternalError("undefined behavior")}toWType(){throw new e.InternalError("undefined behavior")}toString(){throw new e.InternalError("undefined behavior")}}exports.TemplateType=n,n.instance=new n;class t extends r.Type{constructor(e){super(),this.index=e}get length(){throw new e.InternalError("undefined behavior")}toMangledName(){return"^"+this.index}toWType(){throw new e.InternalError("undefined behavior")}toString(){return"^"+this.index}}exports.TemplateParameterPlaceHolderType=t;
},{"../common/error":"nOPH","./index":"Rt13"}],"+hnY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../type/template_type"),t=require("./symbol");class s extends t.OverloadSymbol{constructor(e,t,s,i,a,n,r){super(r),this.shortName=e,this.fullName=t,this.functionConfig=s,this.templateParams=i,this.functionBody=a,this.instanceMap=new Map,this.specializationMap=new Map,this.scopeContext=n}getType(){return e.TemplateType.instance}isDefine(){return!0}getFullName(){return this.fullName}getIndexName(){return this.shortName.split("@")[0]}}exports.FunctionTemplate=s;class i extends t.Symbol{constructor(e,t,s,i,a,n,r){super(r),this.templateParams=i,this.classBody=a,this.shortName=e,this.fileName=s,this.fullName=t,this.specializationMap=new Map,this.scopeContext=n}getType(){return e.TemplateType.instance}isDefine(){return!0}}exports.ClassTemplate=i;
},{"../type/template_type":"xWpI","./symbol":"HcQt"}],"vaEy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/template"),s=require("./index");class i extends s.Type{constructor(e,t,i,r,n,l){super(),this.shortName=e,this.fileName=i,this.fullName=t,this.fields=r,this.isComplete=!1,this.fieldMap=new Map,this.isUnion=n,this.inheritance=l,this.selfSize=0,this.vTablePtr=0,this.objectSize=this.inheritance.map(e=>e.classType.length).reduce((e,t)=>e+t,0),this.requireVPtr=!1,this.VPtrOffset=0,this.accessControl=s.AccessControl.Public,this.vTable={className:t,vFunctions:[]}}initialize(){this.fieldMap=new Map(this.fields.map(e=>[e.name,e])),this.isUnion?this.selfSize=Math.max(...this.fields.map(e=>e.type.length)):this.selfSize=this.fields.map(e=>e.type.length).reduce((e,t)=>e+t,0),this.requireVPtr&&(this.selfSize+=4),this.objectSize=this.selfSize+this.inheritance.map(e=>e.classType.length).reduce((e,t)=>e+t,0),this.isComplete=!0}get length(){if(!this.isComplete)throw new e.InternalError(`class ${this.shortName} is incomplete`);return this.objectSize}toWType(){throw new e.InternalError("could not to Wtype of func")}toString(){return this.shortName}toMangledName(){return"$"+this.fullName.replace(/::/g,"!!")+"$"}isDefine(){return this.isComplete}equals(e){return e===this}isSubClassOf(e){for(const t of this.inheritance)if(t.classType.isSubClassOf(e))return!0;return e===this}compatWith(e){return e===this||e instanceof i&&(e.isSubClassOf(this)||this.isSubClassOf(e))}getField(t){if(!this.isComplete)throw new e.InternalError(`class ${this.shortName} is incomplete`);const s=this.fieldMap.get(t);if(s)return s;for(const e of this.inheritance){const s=e.classType.getField(t);if(s)return s}return null}getMember(e,i){const r=e.scopeManager.lookup(this.fullName+"::"+i);if(null!==r)return r instanceof s.Type||r instanceof t.ClassTemplate?null:r;const n=this.fieldMap.get(i);if(n)return n;for(const t of this.inheritance){const s=t.classType.getMember(e,i);if(s)return s}return null}setUpVPtr(){let e=0;for(const t of this.inheritance){if(t.classType.requireVPtr){this.requireVPtr=!0,this.VPtrOffset=t.classType.VPtrOffset+e,t.classType.vTable.vFunctions.map(e=>this.vTable.vFunctions.push({indexName:e.indexName,fullName:e.fullName}));break}e+=t.classType.objectSize}this.requireVPtr||(this.requireVPtr=!0,this.VPtrOffset=this.objectSize,this.objectSize+=4,this.selfSize+=4)}registerVFunction(e,t,s){const i=this.vTable.vFunctions.filter(e=>e.indexName===t);0===i.length?this.vTable.vFunctions.push({indexName:t,fullName:s}):i[0].fullName=s}getVCallInfo(e){for(let s=0;s<this.vTable.vFunctions.length;s++)if(this.vTable.vFunctions[s].indexName===e)return[this.VPtrOffset,4*s];let t=0;for(const s of this.inheritance){const i=s.classType.vTable.vFunctions;for(let t=0;t<i.length;t++)if(i[t].indexName===e)return[s.classType.VPtrOffset,4*t];t+=s.classType.objectSize}return null}}exports.ClassType=i;
},{"../common/error":"nOPH","../common/template":"+hnY","./index":"Rt13"}],"HxYe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../wasm"),t=require("./index");class n extends t.Type{compatWith(e){return e instanceof n}}exports.PrimitiveType=n;class r extends n{get length(){return 1}toWType(){return e.WType.i32}toMangledName(){return"v"}toString(){return"void"}}exports.VoidType=r;class s extends n{get length(){return 1}toWType(){return e.WType.i32}toMangledName(){return"nullptr"}toString(){return"nullptr"}}exports.NullptrType=s;class o extends n{can(e){return e instanceof o}}exports.ArithmeticType=o;class g extends o{}exports.IntegerType=g;class i extends o{}exports.FloatingType=i;class l extends g{}exports.SignedIntegerType=l;class u extends g{}exports.UnsignedIntegerType=u;class p extends u{get length(){return 1}toWType(){return e.WType.i8}toMangledName(){return"b"}toString(){return"bool"}}exports.BoolType=p;class d extends l{get length(){return 1}toWType(){return e.WType.i8}toMangledName(){return"c"}toString(){return"char"}}exports.CharType=d;class a extends l{get length(){return 2}toWType(){return e.WType.i16}toMangledName(){return"s"}toString(){return"short"}}exports.Int16Type=a;class y extends l{get length(){return 4}toWType(){return e.WType.i32}toMangledName(){return"i"}toString(){return"int"}}exports.Int32Type=y;class T extends l{get length(){return 8}toWType(){return e.WType.i64}toMangledName(){return"l"}toString(){return"long long"}}exports.Int64Type=T;class x extends u{get length(){return 1}toWType(){return e.WType.u8}toMangledName(){return"uc"}toString(){return"unsigned char"}}exports.UnsignedCharType=x;class c extends u{get length(){return 2}toWType(){return e.WType.u16}toMangledName(){return"us"}toString(){return"unsigned short"}}exports.UnsignedInt16Type=c;class h extends u{get length(){return 4}toWType(){return e.WType.u32}toMangledName(){return"ui"}toString(){return"unsigned int"}}exports.UnsignedInt32Type=h;class w extends u{get length(){return 8}toWType(){return e.WType.u64}toMangledName(){return"ul"}toString(){return"unsigned long long"}}exports.UnsignedInt64Type=w;class W extends i{get length(){return 4}toWType(){return e.WType.f32}toMangledName(){return"f"}toString(){return"float"}}exports.FloatType=W;class m extends i{get length(){return 8}toWType(){return e.WType.f64}toMangledName(){return"d"}toString(){return"double"}}exports.DoubleType=m,exports.PrimitiveTypes={void:new r,nullptr:new s,bool:new p,char:new d,uchar:new x,int16:new a,uint16:new c,int32:new y,uint32:new h,int64:new T,uint64:new w,float:new W,double:new m},exports.PrimitiveTypesNameMap=new Map([[[["void"]],()=>new r],[[["bool"]],()=>new p],[[["char"],["signed","char"].sort()],()=>new d],[[["unsigned","char"].sort()],()=>new x],[[["short"],["signed","short"].sort(),["short","int"].sort(),["signed","short","int"].sort()],()=>new a],[[["unsigned","short"].sort(),["unsigned","short","int"].sort()],()=>new c],[[["int"],["signed"],["signed","int"].sort()],()=>new y],[[["unsigned"],["unsigned","int"].sort()],()=>new h],[[["long"],["signed","long"].sort(),["long","int"].sort(),["signed","long","int"].sort()],()=>new y],[[["unsigned","long"].sort(),["unsigned","long","int"].sort()],()=>new h],[[["long","long"],["signed","long","long"].sort(),["long","long","int"].sort(),["signed","long","long","int"].sort()],()=>new T],[[["unsigned","long","long"].sort(),["unsigned","long","long","int"].sort()],()=>new w],[[["float"]],()=>new W],[[["double"]],()=>new m],[[["bool"]],()=>exports.PrimitiveTypes.bool]]);
},{"../wasm":"Jo9c","./index":"Rt13"}],"ZWBU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../wasm"),n=require("./class_type"),s=require("./index"),r=require("./primitive_type"),i=4;class p extends s.Type{constructor(e){super(),this.elementType=e}get length(){return i}equals(e){return super.equals(e)&&e instanceof p&&this.elementType.equals(e.elementType)}compatWith(e){return super.compatWith(e)&&e instanceof p&&this.elementType.compatWith(e.elementType)}}exports.CompoundType=p;class o extends p{toString(){return"const"+this.elementType.toString()}toWType(){return this.elementType.toWType()}toMangledName(){return"c"+this.elementType.toMangledName()}compatWith(e){return this.elementType.equals(r.PrimitiveTypes.void)||e instanceof l&&e.elementType.equals(r.PrimitiveTypes.void)||super.compatWith(e)||e instanceof u&&this.elementType.compatWith(e.elementType)}}exports.ConstType=o;class l extends p{toString(){return this.elementType.toString()+"*"}toWType(){return t.WType.u32}toMangledName(){return this.elementType.toMangledName()+"*"}compatWith(e){return this.elementType.equals(r.PrimitiveTypes.void)||e instanceof l&&e.elementType.equals(r.PrimitiveTypes.void)||super.compatWith(e)||e instanceof u&&this.elementType.compatWith(e.elementType)}}exports.PointerType=l;class a extends p{constructor(t){if(super(t),t instanceof a)throw new e.InternalError("ref to ref is illegal")}}exports.ReferenceType=a;class m extends a{toString(){return this.elementType.toString()+"&"}toWType(){return t.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&"}}exports.LeftReferenceType=m;class y extends a{toString(){return this.elementType.toString()+"&&"}toWType(){return t.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&&"}}exports.RightReferenceType=y;class u extends s.Type{constructor(e,t){super(),this.elementType=e,this.size=t}get length(){return this.elementType.length*this.size}equals(e){return super.equals(e)&&e instanceof u&&this.elementType.equals(e.elementType)&&this.size===e.size}toString(){return this.elementType.toString()+`[${this.length}]`}toWType(){throw new e.InternalError("could not to Wtype of func")}toMangledName(){return this.elementType.toMangledName()+"["+this.size+"]"}compatWith(e){return e.equals(this)||e instanceof u&&this.elementType.compatWith(e.elementType)||e instanceof l&&e.elementType.equals(this.elementType)||this.elementType instanceof n.ClassType&&e instanceof l&&e.elementType.compatWith(this.elementType)}}exports.ArrayType=u;
},{"../common/error":"nOPH","../wasm":"Jo9c","./class_type":"vaEy","./index":"Rt13","./primitive_type":"HxYe"}],"pe9I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../type/primitive_type");function t(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;if(e[0].equals){for(let r=0;r<e.length;r++)if(!e[r].equals(t[r]))return!1;return!0}for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function r(r){for(const[n,o]of e.PrimitiveTypesNameMap.entries())for(const e of n)if(t(r,e))return o();return null}exports.isArrayEqual=t,exports.getPrimitiveTypeFromSpecifiers=r;const n=["void","bool","char","long","int","unsigned","signed","double","float","short"];function o(e){return-1!==n.indexOf(e)}exports.isTypeSpecifier=o;const i=["const","volatile"];function f(e){return-1!==i.indexOf(e)}exports.isTypeQualifier=f;const s="0123456789ABCDEF";function l(e){let t="";for(let r=0;r<8;r++)t=s.charAt(e%16)+t,e=parseInt((e/16).toString());return 7===t.length&&console.log("fuck"),"0x"+t}function u(e,t,r){let n="";if(void 0===r){let r=t,o=e.getUint8(r);for(;0!==o;)n+=String.fromCharCode(o),r++,o=e.getUint8(r)}else for(let o=t;o<t+r;o++)n+=String.fromCharCode(e.getUint8(o));return n}function c(e){let t="";for(let r=0;r<e;r++)t+="\t";return t}exports.toHexString=l,exports.fromBytesToString=u,exports.getIndent=c;
},{"../type/primitive_type":"HxYe"}],"VPTZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/utils"),r=require("./class_type"),n=require("./compound_type"),s=require("./index"),o=require("./primitive_type"),i=require("../wasm");var p;!function(e){e[e.Normal=0]="Normal",e[e.Constructor=1]="Constructor",e[e.Destructor=2]="Destructor",e[e.MemberFunction=3]="MemberFunction"}(p=exports.CppFunctionType||(exports.CppFunctionType={}));class a extends s.Type{constructor(e){super(),this.index=e}get length(){throw new e.InternalError("unexpected")}toMangledName(){return"^$"+this.index+"^"}toWType(){throw new e.InternalError("unexpected")}toString(){return`[${this.index}]`}}exports.TemplatePlaceholderType=a;class u extends s.Type{constructor(e,t,r=!1){super(),this.returnType=e,this.parameterTypes=t,this.variableArguments=r,this.cppFunctionType=p.Normal,this.isVirtual=!1,this.referenceClass=null,this.isTemplateInstance=!1;for(let s=0;s<this.parameterTypes.length;s++){const e=this.parameterTypes[s];e instanceof n.ArrayType&&(this.parameterTypes[s]=new n.PointerType(e.elementType))}}get length(){return 0}equals(e){return super.equals(e)&&e instanceof u&&this.returnType.equals(e.returnType)&&t.isArrayEqual(this.parameterTypes,e.parameterTypes)}toDisplayString(e){"#"===e.charAt(0)&&(e="$"===e.charAt(1)?e.substring(2):"operator"+e.substring(1));const t=e.split("@");return e=t.length>2?t[0]+"<"+t[2]+">":t[0],this.cppFunctionType===p.Constructor?e=this.referenceClass.shortName+"::"+this.referenceClass.shortName:this.cppFunctionType===p.Destructor?e="~"+this.referenceClass.shortName+"::"+this.referenceClass.shortName:this.cppFunctionType===p.MemberFunction&&(e=this.referenceClass.shortName+"::"+e),this.returnType.toString()+" "+e+"("+this.parameterTypes.map(e=>e.toString()).join(", ")+")"}toString(){return this.returnType.toString()+"("+this.parameterTypes.map(e=>e.toString()).join(", ")+")"}toWType(){throw new e.InternalError("could not to Wtype of func")}toMangledName(){return this.parameterTypes.map(e=>e.toMangledName()).join(",")}compatWith(e){return e.equals(this)}isMemberFunction(){return this.cppFunctionType===p.Destructor||this.cppFunctionType===p.MemberFunction}toWASMEncoding(){let e="";return this.returnType.equals(o.PrimitiveTypes.void)||this.returnType instanceof r.ClassType?e+="v":e+=i.WFunctionType.n2s(i.getNativeType(this.returnType.toWType())),this.parameterTypes.filter(e=>!(e instanceof r.ClassType)).map(t=>e+=i.WFunctionType.n2s(i.getNativeType(t.toWType()))),e}}exports.FunctionType=u;class c extends s.Type{constructor(e){super(),this.functionLookupResult=e}equals(e){return!1}compatWith(e){return!1}toString(){return"[UnresolveFunctionOverloadType]"}get length(){return 0}toWType(){throw new e.InternalError("UnresolveFunctionOverloadType()")}toMangledName(){return"[UnresolveFunctionOverloadType]"}}exports.UnresolvedFunctionOverloadType=c;
},{"../common/error":"nOPH","../common/utils":"pe9I","./class_type":"vaEy","./compound_type":"ZWBU","./index":"Rt13","./primitive_type":"HxYe","../wasm":"Jo9c"}],"JsMC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/symbol"),o=require("../type/class_type"),s=require("../type/compound_type"),n=require("../wasm");class r extends n.WExpression{constructor(e,t,o){super(o),this.place=e,this.type=t,this.offset=0}createStore(r,i,a,c=!1){let l=null;if(i instanceof s.ArrayType||i instanceof o.ClassType)throw new e.InternalError("could not assign a array or class");{const o=c?n.getNativeType(i.toWType()):i.toWType();switch(this.type){case t.AddressType.LOCAL:if(l=new n.WSetLocal(o,this.place,a,this.location),0!==this.offset)throw new e.InternalError("illegal offset");break;case t.AddressType.MEMORY_DATA:(l=new n.WStore(o,new n.WConst(n.WType.i32,"0",this.location),a,n.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_BSS:(l=new n.WStore(o,new n.WConst(n.WType.i32,"0",this.location),a,n.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_EXTERN:(l=new n.WStore(o,new n.WConst(n.WType.i32,"0",this.location),a,n.WMemoryLocation.EXTERN,this.location)).offset=this.offset,l.offsetName=this.place;break;case t.AddressType.CONSTANT:throw new e.InternalError("store a constant()");case t.AddressType.STACK:if(null===r.currentFuncContext.currentFunction)throw new e.InternalError("not in function");(l=new n.WStore(o,new n.WGetLocal(n.WType.i32,r.currentFuncContext.currentFunction.$sp,this.location),a,n.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case t.AddressType.GLOBAL:if(l=new n.WSetGlobal(o,this.place,a,this.location),0!==this.offset)throw new e.InternalError("illegal offset");break;case t.AddressType.GLOBAL_SP:(l=new n.WStore(o,new n.WGetGlobal(n.WType.u32,"$sp",this.location),a,n.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case t.AddressType.RVALUE:l=new n.WStore(o,new n.WBinaryOperation(n.I32Binary.add,this.place,new n.WConst(n.WType.i32,this.offset.toString(),this.location),this.location),a,n.WMemoryLocation.RAW,this.location)}}if(null===l)throw new e.InternalError("createStore()");return l}createLoad(r,i){let a=null;if(i instanceof s.ArrayType||i instanceof o.ClassType)throw new e.InternalError("unsupport");switch(this.type){case t.AddressType.LOCAL:if(a=new n.WGetLocal(i.toWType(),this.place,this.location),0!==this.offset)throw new e.InternalError("illegal offset");break;case t.AddressType.MEMORY_DATA:(a=new n.WLoad(i.toWType(),new n.WConst(n.WType.i32,"0",this.location),n.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_BSS:(a=new n.WLoad(i.toWType(),new n.WConst(n.WType.i32,"0",this.location),n.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_EXTERN:(a=new n.WLoad(i.toWType(),new n.WConst(n.WType.i32,"0",this.location),n.WMemoryLocation.EXTERN,this.location)).offsetName=this.place,a.offset=this.offset;break;case t.AddressType.CONSTANT:if(a=new n.WConst(n.WType.i32,this.place.toString(),this.location),0!==this.offset)throw new e.InternalError("illegal offset");break;case t.AddressType.STACK:if(null===r.currentFuncContext.currentFunction)throw new e.InternalError("not in function");(a=new n.WLoad(i.toWType(),new n.WGetLocal(n.WType.i32,r.currentFuncContext.currentFunction.$sp,this.location),n.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case t.AddressType.GLOBAL:if(a=new n.WGetGlobal(i.toWType(),this.place,this.location),0!==this.offset)throw new e.InternalError("illegal offset");break;case t.AddressType.GLOBAL_SP:(a=new n.WLoad(i.toWType(),new n.WGetGlobal(n.WType.u32,"$sp",this.location),n.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case t.AddressType.RVALUE:a=new n.WLoad(i.toWType(),new n.WBinaryOperation(n.I32Binary.add,this.place,new n.WConst(n.WType.i32,this.offset.toString(),this.location),this.location),n.WMemoryLocation.RAW,this.location)}if(null===a)throw new e.InternalError("createLoad()");return a}createLoadAddress(o){let s=null;switch(this.type){case t.AddressType.LOCAL:throw new e.InternalError("could not get address of local variable");case t.AddressType.MEMORY_DATA:(s=new n.WGetAddress(n.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_BSS:(s=new n.WGetAddress(n.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case t.AddressType.MEMORY_EXTERN:(s=new n.WGetAddress(n.WMemoryLocation.EXTERN,this.location)).offset=this.offset,s.offsetName=this.place;break;case t.AddressType.CONSTANT:throw new e.InternalError("store a constant()");case t.AddressType.STACK:if(null===o.currentFuncContext.currentFunction)throw new e.InternalError("not in function");s=new n.WBinaryOperation(n.I32Binary.add,new n.WGetLocal(n.WType.i32,o.currentFuncContext.currentFunction.$sp,this.location),new n.WConst(n.WType.i32,(this.place+this.offset).toString(),this.location),this.location);break;case t.AddressType.GLOBAL_SP:if(null===o.currentFuncContext.currentFunction)throw new e.InternalError("not in function");s=new n.WBinaryOperation(n.I32Binary.add,new n.WGetGlobal(n.WType.i32,"$sp",this.location),new n.WConst(n.WType.i32,(this.place+this.offset).toString(),this.location),this.location);break;case t.AddressType.RVALUE:s=new n.WBinaryOperation(n.I32Binary.add,this.place,new n.WConst(n.WType.i32,this.offset.toString(),this.location),this.location);break;case t.AddressType.GLOBAL:throw new e.InternalError("could not get address of global variable")}if(null===s)throw new e.InternalError("createStore()");return s}makeOffset(o){if(this.type===t.AddressType.LOCAL)throw new e.InternalError("could not get address of local variable");return this.offset+=o,this}deduceType(t){throw new e.EmitError("WAddressHolder()")}emit(t){throw new e.EmitError("WAddressHolder()")}isPure(){return!0}}exports.WAddressHolder=r;
},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../wasm":"Jo9c"}],"y+tL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/symbol"),o=require("../common/template"),n=require("../type");class r{constructor(e){this.functions=e,this.instance=null,this.instanceType=null,this.isDynamicCall=!1,this.templateArguments=[]}}function s(e){const t=e.split("::");return t[t.length-1]}exports.FunctionLookUpResult=r,exports.getShortName=s;class i{constructor(e,t,o){this.shortName=e,null===t?(this.parent=this,this.fullName=""):(this.parent=t,this.fullName=this.parent.fullName+"::"+this.shortName),this.children=[],this.map=new Map,this.isCpp=o,this.isInnerScope=!1,this.classType=null}getScopeOfLookupName(e){"::"===e.slice(0,2)&&(e=e.slice(2));const t=e.split("::");if(1===t.length)return this;for(const o of this.children)if(o.shortName===t[0])return o.getScopeOfLookupName(t.slice(1).join("::"));return null}mergeSymbolInScope(r,s,i){const c=this.map.get(r);if(!c)return void this.map.set(r,[s]);const a=c[0];if(!(a instanceof t.OverloadSymbol)){if(a instanceof t.Variable){if(s.isDefine()&&a.isDefine())throw new e.SyntaxError(`redefine of ${r}`,i);if(s instanceof t.Variable){if(a.type.equals(s.type)&&a.fullName===s.fullName)return void(s.isDefine()&&(s.accessControl===n.AccessControl.Unknown&&(s.accessControl=a.accessControl),c[0]=s));throw new e.SyntaxError(`conflict declaration of ${r}`,i)}throw new e.SyntaxError(`${r} has been declared as variable`+`but a ${s.constructor.name} found`,i)}if(a instanceof n.Type){if(s instanceof n.Type){if(a.equals(s))return;throw new e.SyntaxError(`conflict declaration of ${r}`,i)}throw new e.SyntaxError(`${r} has been declared as type`+`but a ${s.constructor.name} found`,i)}if(a instanceof o.ClassTemplate){if(s.isDefine()&&a.isDefine())throw new e.SyntaxError(`redefine of ${r}`,i);if(s instanceof o.ClassTemplate){if(a.templateParams.length!==s.templateParams.length)throw new e.SyntaxError(`conflict declaration of ${r}`,i);for(let t=0;t<a.templateParams.length;t++)if(!a.templateParams[t].type.equals(s.templateParams[t].type))throw new e.SyntaxError(`conflict declaration of ${r}`,i);return void(s.isDefine()&&(c[0]=s))}throw new e.SyntaxError(`${r} has been declared as class template`+`but a ${s.constructor.name} found`,i)}throw new e.InternalError("assertCompatible()")}if(!(s instanceof t.OverloadSymbol))throw new e.SyntaxError(`${r} has been declared as function`+`but a ${s.constructor.name} found`,i);for(let t=0;t<c.length;t++){const o=c[t];if(o.getFullName()===s.getFullName()){if(o.isDefine()&&!s.isDefine())return;if(o.isDefine()&&s.isDefine())throw new e.SyntaxError(`redefine of ${r}`,i);if(!o.isDefine()&&s.isDefine())return s.accessControl===n.AccessControl.Unknown&&(s.accessControl=o.accessControl),void(c[t]=s);if(!o.isDefine()&&!s.isDefine())return}}c.push(s)}lookupInScope(t){if("::"===t.slice(0,2))throw new e.InternalError("public lookupInScope(anyName: string){");const o=this.getScopeOfLookupName(t),n=s(t);return o&&o.map.get(n)||null}}exports.Scope=i;class c{constructor(e){this.isCpp=e,this.root=new i("",null,e),this.scopeId=0,this.tmpVarId=0,this.contextStack=[],this.currentContext={scope:this.root,activeScopes:[this.root]}}allocTmpVarName(){return"$__"+this.tmpVarId++}getFullName(e){if("::"===e.slice(0,2))return e;for(let t=this.currentContext.activeScopes.length-1;t>=0;t--){const o=this.currentContext.activeScopes[t].getScopeOfLookupName(e),n=s(e);if(o&&o.map.has(n))return o.fullName+"::"+n}return this.currentContext.scope.fullName+"::"+e}lookupFunction(e){const n="::"===e.slice(0,2)?[this.root]:this.currentContext.activeScopes,i="::"===e.slice(0,2)?e.slice(2):e,c=s(i).split("@")[0],a=s(i).includes("@"),l=new Set,u=[];for(let r=n.length-1;r>=0;r--){const e=n[r].getScopeOfLookupName(i);if(e){const n=e.map.get(c);if(n)for(const r of n)(r instanceof o.FunctionTemplate||r instanceof t.FunctionEntity)&&((l.has(r.shortName)||a)&&r.getFullName()!==e.fullName+"::"+s(i)||(l.add(r.shortName),u.push(r)))}}return new r(u)}lookup(e){const o="::"===e.slice(0,2)?[this.root]:this.currentContext.activeScopes,n="::"===e.slice(0,2)?e.slice(2):e;for(let r=o.length-1;r>=0;r--){const o=this.currentContext.activeScopes[r].lookupInScope(n);if(o){const n=o[0];return n instanceof t.OverloadSymbol?this.lookupFunction(e):n}}return null}declare(t,o,n){const r=t.includes("::");if("::"===t.slice(0,2)){const r=t.slice(2),i=this.root.getScopeOfLookupName(r);if(!i)throw new e.SyntaxError(`unresolved name ${t}`,n);const c=i.getScopeOfLookupName(r),a=s(r);if(c&&c.map.has(a))return void i.mergeSymbolInScope(a,o,n);throw new e.SyntaxError(`unresolved name ${t}`,n)}if(r){for(const e of this.currentContext.activeScopes){const r=e.getScopeOfLookupName(t),i=s(t);if(r&&r.map.has(i))return void e.mergeSymbolInScope(i,o,n)}throw new e.SyntaxError(`unresolved name ${t}`,n)}this.currentContext.scope.mergeSymbolInScope(t,o,n)}define(t,o,n){const r=t.includes("::");if("::"===t.slice(0,2)){const r=t.slice(2),i=this.root.getScopeOfLookupName(r);if(!i)throw new e.SyntaxError(`unresolved name ${t}`,n);const c=i.getScopeOfLookupName(r),a=s(r);if(c&&c.map.has(a))return void i.mergeSymbolInScope(a,o,n);throw new e.SyntaxError(`unresolved name ${t}`,n)}if(r){for(const e of this.currentContext.activeScopes){const r=e.getScopeOfLookupName(t),i=s(t);if(r&&r.map.has(i))return void e.mergeSymbolInScope(i,o,n)}throw new e.SyntaxError(`unresolved name ${t}`,n)}this.currentContext.scope.mergeSymbolInScope(t,o,n)}enterScope(t){this.contextStack.push(this.currentContext);const o=this.getFullName(t),n=this.root.getScopeOfLookupName(o);if(!n)throw new e.InternalError(`the scope of ${o} is not exist`);let r=[];for(let e=n;e!==this.root;e=e.parent)r.push(e);r.push(this.root),r=r.reverse();const c=n.children.filter(e=>e.fullName===o);if(c.length)r.push(c[0]),this.currentContext={scope:c[0],activeScopes:r};else{const e=new i(s(o),n,this.isCpp);n.children.push(e),r.push(e),this.currentContext={scope:e,activeScopes:r}}}enterSavedScope(e){this.contextStack.push(this.currentContext),this.currentContext=e}exitScope(){if(0===this.contextStack.length)throw new e.InternalError("this.contextStack.length === 0");this.currentContext=this.contextStack.pop()}enterUnnamedScope(e){const t=new i("$"+this.scopeId++,this.currentContext.scope,this.isCpp);e&&(t.fullName=this.currentContext.scope.fullName),t.isInnerScope=!0,this.currentContext.scope.children.push(t),this.contextStack.push(this.currentContext);const o=this.currentContext.activeScopes.map(e=>e);o.push(t),this.currentContext={scope:t,activeScopes:o}}detachCurrentScope(){const e=this.currentContext.scope.parent;for(let t=0;t<e.children.length;t++)if(e.children[t]===this.currentContext.scope){for(let o=t;o<e.children.length-1;o++)e.children[o]=e.children[o+1];break}e.children.pop()}isRoot(){return this.currentContext.scope===this.root}activeScopes(e){const t=new Set(this.currentContext.activeScopes.map(e=>e.fullName)),o=e.filter(e=>e.isInnerScope||!t.has(e.fullName)),n=this.currentContext.activeScopes.filter(e=>e.fullName!==this.currentContext.scope.fullName);this.currentContext.activeScopes=[...n,...o,this.currentContext.scope]}getOldOverloadSymbol(e){const t=this.lookup(e.split("@")[0]);if(t&&t instanceof r){const o=t.functions.filter(t=>t.fullName===e);if(o.length)return o[0]}return null}}exports.ScopeManager=c;
},{"../common/error":"nOPH","../common/symbol":"HcQt","../common/template":"+hnY","../type":"Rt13"}],"atX+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../type"),n=require("../../type/compound_type"),r=require("../../type/function_type"),i=require("../../type/template_type");function p(a,o){if(a instanceof r.FunctionType){const e=new r.FunctionType(p(a.returnType,o),a.parameterTypes.map(e=>p(e,o)),a.variableArguments);return e.cppFunctionType=a.cppFunctionType,e.referenceClass=a.referenceClass,e.isVirtual=a.isVirtual,e}if(a instanceof n.PointerType)return new n.PointerType(p(a.elementType,o));if(a instanceof n.RightReferenceType)return new n.RightReferenceType(p(a.elementType,o));if(a instanceof n.LeftReferenceType)return new n.LeftReferenceType(p(a.elementType,o));if(a instanceof n.ArrayType)return new n.ArrayType(p(a.elementType,o),a.size);if(a instanceof i.TemplateParameterPlaceHolderType){const n=o[a.index];if(null===n)throw new e.InternalError("deduceFunctionTypeOfTemplate()");if(n instanceof t.Type)return n;throw new e.InternalError("deduceFunctionTypeOfTemplate()")}return a}function a(e,t,n,r){if(n.length>e.templateParams.length)return null;const i=t.parameterTypes.filter(()=>!0);if(e.functionConfig.functionType.parameterTypes.length!==i.length){if(!r)return null;if(i.length>e.functionConfig.functionType.parameterTypes.length)return null;for(let t=i.length;t<e.functionConfig.functionType.parameterTypes.length;t++)null!==e.functionConfig.parameterInits[t]&&i.push(e.functionConfig.functionType.parameterTypes[t])}const p=[];for(let o=0;o<e.templateParams.length;o++)p.push(null);for(let o=0;o<n.length;o++)p[o]=n[o];try{for(let t=0;t<i.length;t++)o(p,e.functionConfig.functionType.parameterTypes[t],i[t],r)}catch(a){return null}for(let o=0;o<e.templateParams.length;o++)if(null===p[o]){if(null===e.templateParams[o].init)return null;p[o]=e.templateParams[o].init}return p}function o(e,p,a,f){if(p instanceof r.FunctionType){if(!(a instanceof r.FunctionType))throw{};if(a.parameterTypes.length!==p.parameterTypes.length)throw{};o(e,p.returnType,a.returnType,f);for(let t=0;t<p.parameterTypes.length;t++)o(e,p.parameterTypes[t],a.parameterTypes[t],f)}else if(p instanceof n.PointerType){if(!(a instanceof n.PointerType))throw{};o(e,p.elementType,a.elementType,f)}else if(p instanceof n.ReferenceType){if(!(a instanceof n.ReferenceType))throw{};o(e,p.elementType,a.elementType,f)}else if(p instanceof n.ArrayType){if(!(a instanceof n.ArrayType))throw{};o(e,p.elementType,a.elementType,f)}else if(p instanceof i.TemplateParameterPlaceHolderType){const n=e[p.index];if(null===n)e[p.index]=a;else{if(!(n instanceof t.Type))throw{};if(a instanceof i.TemplateParameterPlaceHolderType){if(p.index!==a.index)throw{}}else if(f){if(!n.compatWith(a))throw{}}else if(!n.equals(a))throw{}}}else if(f){if(!p.compatWith(a))throw{}}else if(!p.equals(a))throw{}}exports.deduceFunctionTypeOfTemplate=p,exports.deduceFunctionTemplateParameters=a,exports.tryMatchTemplateType=o;
},{"../../common/error":"nOPH","../../type":"Rt13","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/template_type":"xWpI"}],"4WIk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),n=require("../../common/symbol"),o=require("../../common/template"),a=require("../../type"),r=require("../../type/function_type"),c=require("../function/function"),i=require("./template_deduce");class s extends t.ClassDirective{constructor(e,t,n){super(e),this.specifiers=t,this.declarator=n}declare(t,n){throw new e.InternalError("todo")}codegen(t){const n=this.declarator.getNameRequired(),a=n.deduceType(t),c=this.declarator.getType(t,this.specifiers.getType(t));if(!(a instanceof r.UnresolvedFunctionOverloadType&&c instanceof r.FunctionType))throw new e.SyntaxError(`${n.getLookupName(t)} is not a function template`,this);const s=a.functionLookupResult;for(const e of s.functions)if(e instanceof o.FunctionTemplate){const n=i.deduceFunctionTemplateParameters(e,c,s.templateArguments,!1);if(null!==n)return void p(t,e,n,this)}throw new e.SyntaxError("no matched function template",this)}}function p(e,t,o,r){const s=i.deduceFunctionTypeOfTemplate(t.functionConfig.functionType,o),p=o.map(e=>e.toString()).join(","),u=t.shortName+"@"+p,l=u+"@"+s.toMangledName();e.scopeManager.enterSavedScope(t.scopeContext),t.instanceMap.set(p,new n.FunctionEntity(l+"@"+s.toMangledName(),e.scopeManager.getFullName(l),e.fileName,s,t.functionConfig.parameterInits,!1,!0,a.AccessControl.Public,[])),e.scopeManager.enterUnnamedScope(!0);for(let c=0;c<o.length;c++){const i=t.templateParams[c].name,s=o[c];s instanceof a.Type?e.scopeManager.define(i,s,r):e.scopeManager.define(i,new n.Variable(i,e.scopeManager.getFullName(i),e.fileName,t.templateParams[c].type,n.AddressType.CONSTANT,s,a.AccessControl.Public),r)}let m=t.functionBody.body.body;const f=t.specializationMap.get(p);f&&(m=f.body.body),s.isTemplateInstance=!0;const d={name:u,functionType:s,parameterNames:t.functionConfig.parameterNames,parameterInits:t.functionConfig.parameterInits,isLibCall:t.functionConfig.isLibCall,accessControl:t.functionConfig.accessControl};c.defineFunction(e,d,m,[...t.scopeContext.activeScopes,e.scopeManager.currentContext.scope],r),e.scopeManager.currentContext.scope.children.map(t=>e.scopeManager.currentContext.scope.parent.children.push(t)),e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.exitScope()}exports.FunctionTemplateInstantiation=s,exports.instantiateFunctionTemplate=p;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13","../../type/function_type":"VPTZ","../function/function":"rsVP","./template_deduce":"atX+"}],"sV6L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/template"),n=require("../type/compound_type"),r=require("../type/function_type"),i=require("../type/primitive_type"),o=require("./scope"),s=require("./template/function_template_instantiation"),a=require("./template/template_deduce");function c(e,t){return e instanceof n.ReferenceType&&(e=e.elementType),t instanceof n.ReferenceType&&(t=t.elementType),e.equals(t)}function p(e,t){return e instanceof n.ReferenceType&&(e=e.elementType),t instanceof n.ReferenceType&&(t=t.elementType),e.compatWith(t)}function u(e,t,r,i){if(e.type.isMemberFunction()){const o=e.type.parameterTypes[0];return null!==r.instanceType&&o instanceof n.PointerType&&(o.elementType.compatWith(r.instanceType)&&e.type.parameterTypes.slice(1).every((e,n)=>i(e,t[n])))}return e.type.parameterTypes.every((e,n)=>i(e,t[n]))}function l(e){const t=new Set,n=[];for(const r of e)t.has(r.fullName)||(n.push(r),t.add(r.fullName));return n}function f(o,f,m,y){const T=f.templateArguments.map(e=>e.toString()).join(","),g=[],h=[];for(const e of f.functions)if(e instanceof t.FunctionTemplate){h.push(e);for(const t of e.instanceMap.keys())(0===f.templateArguments.length||t.startsWith(T))&&g.push(e.instanceMap.get(t))}const d=l(f.functions.filter(e=>!(e instanceof t.FunctionTemplate)).concat(g).filter(e=>e.type.isMemberFunction()&&e.type.parameterTypes.length===m.length+1||!e.type.isMemberFunction()&&e.type.parameterTypes.length===m.length||e.type.variableArguments)),F=d.filter(e=>u(e,m,f,c));if(F.length>=1)return F.length>1&&o.raiseWarning(`call for ${f.functions[0].shortName} is ambiguous`,y),F[0];const M=d.filter(e=>!e.type.isTemplateInstance).filter(e=>u(e,m,f,p));if(M.length>=1)return M.length>1&&o.raiseWarning(`call for ${f.functions[0].shortName} is ambiguous`,y),M[0];const v=d.filter(e=>e.type.variableArguments);if(v.length>=1)return v.length>1&&o.raiseWarning(`call for ${f.functions[0].shortName} is ambiguous`,y),v[0];const b=f.instanceType?[new n.PointerType(f.instanceType),...m]:m;for(const e of h){const t=new r.FunctionType(i.PrimitiveTypes.void,b,!1),n=a.deduceFunctionTemplateParameters(e,t,f.templateArguments,!0);if(null!==n){const t=n.map(e=>e.toString()).join(",");if(!e.instanceMap.get(t))return s.instantiateFunctionTemplate(o,e,n,y),e.instanceMap.get(t)}}throw new e.SyntaxError(`no matching function for ${f.functions[0].shortName.split("@")[0]}`,y)}function m(e,t,n,r=null){const i=e.scopeManager.lookup(t);if(!(i instanceof o.FunctionLookUpResult))return!1;try{return i.instanceType=r,f(e,i,n,{}),!0}catch(s){return!1}}exports.doStrictTypeMatch=c,exports.doWeakTypeMatch=p,exports.doFunctionFilter=u,exports.removeDuplicatedFunctions=l,exports.doFunctionOverloadResolution=f,exports.isFunctionExists=m;
},{"../common/error":"nOPH","../common/template":"+hnY","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./scope":"y+tL","./template/function_template_instantiation":"4WIk","./template/template_deduce":"atX+"}],"Gzzz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/symbol"),n=require("../type/class_type"),r=require("../type/compound_type"),o=require("../type/function_type"),p=require("../type/primitive_type"),i=require("./address"),s=require("./overload"),y=require("../wasm");function a(e,t){return e instanceof p.FloatingType||t instanceof p.FloatingType?p.PrimitiveTypes.double:e instanceof p.UnsignedInt64Type||t instanceof p.UnsignedInt64Type?p.PrimitiveTypes.uint64:e instanceof p.Int64Type||t instanceof p.Int64Type?p.PrimitiveTypes.int64:e instanceof p.UnsignedIntegerType||t instanceof p.UnsignedIntegerType?p.PrimitiveTypes.uint32:p.PrimitiveTypes.int32}function f(e){return e instanceof r.ArrayType&&(e=new r.PointerType(e.elementType)),e instanceof r.ReferenceType&&(e=e.elementType),e}function c(e,n,o){return n.type instanceof r.LeftReferenceType&&(n.isLeft&&n.expr instanceof i.WAddressHolder?(n.type=n.type.elementType,n.expr=new i.WAddressHolder(n.expr.createLoad(e,p.PrimitiveTypes.uint32),t.AddressType.RVALUE,o.location)):(n.type=n.type.elementType,n.expr=new i.WAddressHolder(n.expr,t.AddressType.RVALUE,o.location))),n}function T(o,s,y,a=!1){if(!s.isLeft&&s.type instanceof r.LeftReferenceType)throw new e.InternalError("LeftReferenceType could not be rvalue");if(s.isLeft){if(s.isLeft=!1,s.type instanceof r.LeftReferenceType&&!(s.expr instanceof i.WAddressHolder)&&(s.type=s.type.elementType,s.expr=new i.WAddressHolder(s.expr,t.AddressType.RVALUE,y.location)),!(s.expr instanceof i.WAddressHolder))throw new e.InternalError("if( !(expr.expr instanceof WAddressHolder)) {");if(s.type instanceof n.ClassType&&!a)throw new e.SyntaxError("you should not convert a class to rvalue",y);if(s.type instanceof r.ArrayType){if(a)throw new e.SyntaxError("no reference to array",y);s.type=new r.PointerType(s.type.elementType),s.expr=s.expr.createLoadAddress(o)}else s.type instanceof r.LeftReferenceType?a?s.expr=s.expr.createLoad(o,p.PrimitiveTypes.uint32):(s.type=s.type.elementType,s.expr=new i.WAddressHolder(s.expr.createLoad(o,p.PrimitiveTypes.uint32),t.AddressType.RVALUE,y.location).createLoad(o,s.type)):a?(s.type=new r.LeftReferenceType(s.type),s.expr=s.expr.createLoadAddress(o)):s.expr=s.expr.createLoad(o,s.type)}return s.type instanceof r.ArrayType&&(s.type=new r.PointerType(s.type.elementType)),s}function d(t,i,a,f,c=!1,d=!1){if((a=T(t,a,f,d&&i instanceof r.LeftReferenceType)).type instanceof o.UnresolvedFunctionOverloadType){if(i instanceof r.PointerType&&i.elementType instanceof o.FunctionType){const e=s.doFunctionOverloadResolution(t,a.type.functionLookupResult,i.elementType.parameterTypes,f);return new y.WGetFunctionAddress(e.fullName,f.location)}throw new e.SyntaxError("unsupport function name",f)}if(i instanceof r.LeftReferenceType&&a.type instanceof r.LeftReferenceType&&i.equals(a.type))return a.expr;if(i instanceof r.ArrayType&&(i=new r.PointerType(i.elementType)),i instanceof p.ArithmeticType&&a.type instanceof p.ArithmeticType){const e=a.type.toWType(),t=i.toWType(),n=y.getTypeConvertOpe(e,t);return null!==n?new y.WCovertOperation(e,t,a.expr,n,a.expr.location):a.expr}if(i instanceof r.PointerType&&a.type instanceof r.PointerType){const e=i.elementType,t=a.type.elementType;if(e.equals(p.PrimitiveTypes.void)||t.equals(e))return a.expr;if(e instanceof n.ClassType&&t instanceof n.ClassType&&t.isSubClassOf(e))return a.expr}if(i instanceof r.PointerType&&a.type instanceof p.IntegerType&&(a.expr=a.expr.fold(),a.expr instanceof y.WConst&&0===parseInt(a.expr.constant)))return a.expr;if(c){if((i instanceof r.PointerType||i instanceof p.IntegerType)&&(a.type instanceof r.PointerType||a.type instanceof p.IntegerType))return a.expr;if(i instanceof r.PointerType&&a.type instanceof r.PointerType)return a.expr}throw new e.TypeError(`unsupport convert from ${a.type} to ${i}`,f)}function u(e){return e%4==0?e:e+4-e%4}function l(e,t,n){return(t=T(e,t,n,!1)).type instanceof p.IntegerType&&t.type.length<4&&(t.type=p.PrimitiveTypes.int32),t.type instanceof p.FloatType&&(t.expr=d(e,p.PrimitiveTypes.double,t,n),t.type=p.PrimitiveTypes.double),t}function m(e,t,n){return t instanceof r.ArrayType&&(t=new r.PointerType(t.elementType)),t instanceof p.IntegerType&&t.length<4&&(t=p.PrimitiveTypes.int32),t instanceof p.FloatType&&(t=p.PrimitiveTypes.double),t}exports.arithmeticDeduce=a,exports.doTypeTransfrom=f,exports.doReferenceTransform=c,exports.doValueTransform=T,exports.doConversion=d,exports.getInStackSize=u,exports.doValuePromote=l,exports.doTypePromote=m;
},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./address":"JsMC","./overload":"sV6L","../wasm":"Jo9c"}],"TaUa":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("long")),n=require("../../common/error"),r=require("../../common/node"),s=require("../../type/primitive_type"),o=require("../../wasm");class a extends r.Node{constructor(e){super(e)}evaluate(e){const t=this.codegen(e);if(!(t.type instanceof s.ArithmeticType))throw new n.SyntaxError("illegal template parameter",this);const r=t.expr.fold();if(!(r instanceof o.WConst))throw new n.SyntaxError("template parameter must be static value",this);return r.constant}}function i(e,t,n){n.isLeft&&n.expr.isPure()||(n.type.equals(s.PrimitiveTypes.void)?e.submitStatement(new o.WExprStatement(n.expr.fold(),t.location)):e.submitStatement(new o.WDrop(n.expr.fold(),t.location)))}function m(e,r,o,a,i,m){if(r instanceof s.UnsignedCharType)e.memory.data.setUint8(a,parseInt(i));else if(r instanceof s.CharType)e.memory.data.setInt8(a,parseInt(i));else if(r instanceof s.UnsignedInt16Type)e.memory.data.setUint16(a,parseInt(i),!0);else if(r instanceof s.UnsignedInt32Type)e.memory.data.setUint32(a,parseInt(i),!0);else if(r instanceof s.UnsignedInt64Type)e.memory.data.setUint32(a,t.fromString(i).low,!0),e.memory.data.setUint32(a+4,t.fromString(i).low,!0);else if(r instanceof s.Int16Type)e.memory.data.setInt16(a,parseInt(i),!0);else if(r instanceof s.Int32Type)e.memory.data.setInt32(a,parseInt(i),!0);else if(r instanceof s.Int64Type)e.memory.data.setInt32(a,t.fromString(i).low),e.memory.data.setInt32(a+4,t.fromString(i).high,!0);else if(r instanceof s.FloatType)e.memory.data.setFloat32(a,parseFloat(i),!0);else{if(!(r instanceof s.DoubleType))throw new n.InternalError("unsupport type assignment");e.memory.data.setFloat64(a,parseFloat(i),!0)}}exports.Expression=a,exports.recycleExpressionResult=i,exports.doVarInit=m;
},{"long":"YvD4","../../common/error":"nOPH","../../common/node":"PoXi","../../type/primitive_type":"HxYe","../../wasm":"Jo9c"}],"x+Tr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./expression");class s extends e.Expression{constructor(e){super(e)}}exports.Constant=s;
},{"./expression":"TaUa"}],"aB1x":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("long")),i=require("../../common/node"),r=require("../../type/primitive_type"),n=require("../../wasm"),s=require("./constant");class o extends s.Constant{static fromNumber(e,i){return new o(e,10,t.fromInt(i),i.toString(),null)}constructor(e,t,i,r,n){super(e),this.base=t,this.value=i,this.raw=r,this.suffix=n}codegen(e){const t=this.deduceType(e);return{type:t,expr:new n.WConst(t.toWType(),this.raw,this.location),isLeft:!1}}deduceType(e){let t=r.PrimitiveTypes.int32;return this.suffix&&(t=-1!==this.suffix.toUpperCase().indexOf("U")?-1!==this.suffix.toUpperCase().indexOf("LL")?r.PrimitiveTypes.uint64:r.PrimitiveTypes.uint32:-1!==this.suffix.toUpperCase().indexOf("LL")?r.PrimitiveTypes.int64:r.PrimitiveTypes.int32),t}}exports.IntegerConstant=o,o.ZeroConstant=o.fromNumber(i.EmptyLocation,0),o.OneConstant=o.fromNumber(i.EmptyLocation,1),o.NegOneConstant=o.fromNumber(i.EmptyLocation,-1);
},{"long":"YvD4","../../common/node":"PoXi","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],"/aCp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./expression");class s extends e.Expression{constructor(e,s){super(e),this.expr=s}codegen(e){return this.expr}deduceType(e){return this.expr.type}}exports.AnonymousExpression=s;class t extends e.Expression{constructor(e,s,t){super(e),this.expr=s,this.type=t}codegen(e){const s=this.expr.codegen(e);return s.type=this.type,s}deduceType(e){return this.type}}exports.AnonymousCastExpression=t;
},{"./expression":"TaUa"}],"sKlM":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("long")),n=require("../../common/error"),i=require("../../common/symbol"),o=require("../../type/class_type"),r=require("../../type/compound_type"),s=require("../../type/function_type"),a=require("../../type/primitive_type"),l=require("../../wasm"),c=require("../address"),p=require("../class/member_expression"),y=require("../conversion"),u=require("../expression/anonymous_expression"),h=require("../expression/expression"),d=require("../expression/identifier"),m=require("../expression/integer_constant"),f=require("../expression/unary_expression"),T=require("../overload");class g extends h.Expression{constructor(e,t,n){super(e),this.callee=t,this.arguments=n}getTargetFunction(e){let t=this.callee.deduceType(e);if(t instanceof o.ClassType&&(this.callee=new p.MemberExpression(this.location,this.callee,!1,d.Identifier.fromString(this.location,"#()")),t=this.callee.deduceType(e)),t instanceof r.PointerType&&t.elementType instanceof s.FunctionType)return t.elementType;if(!(t instanceof s.UnresolvedFunctionOverloadType))throw new n.TypeError("the callee is not function",this);const a=t.functionLookupResult,l=a.functions.filter(e=>e instanceof i.FunctionEntity);let c=0===l.length?null:l[0];if(e.isCpp()&&(c=T.doFunctionOverloadResolution(e,a,this.arguments.map(t=>t.deduceType(e)),this)),null===c)throw new n.SyntaxError(`no matching function for ${a.functions[0].shortName}`,this);return c}generateFunctionBody(e,s,a){const p=s instanceof i.FunctionEntity?s.type:s;let h=0;const w=[...a.map(e=>e.type),...this.arguments.map(t=>t.deduceType(e))];if(p.variableArguments)for(let t=w.length-1;t>p.parameterTypes.length-1;t--){const i=w[t];if(i instanceof o.ClassType)throw new n.SyntaxError("class type could not be variable arguments",this);const r=y.doTypePromote(e,i,this);h+=y.getInStackSize(r.length)}for(let t=p.parameterTypes.length-1;t>=0;t--){let e=p.parameterTypes[t];e instanceof r.ArrayType&&(e=new r.PointerType(e.elementType)),e instanceof o.ClassType?h+=y.getInStackSize(e.length):p.variableArguments&&(h+=y.getInStackSize(e.length))}e.memory.currentState.stackPtr-=h;const W=[...a,...this.arguments.map(t=>t.codegen(e))];if(e.memory.currentState.stackPtr+=h,s instanceof i.FunctionEntity&&p.parameterTypes.length>W.length)for(let t=W.length;t<p.parameterTypes.length;t++){const e=s.parameterInits[t];if(null===e)throw new n.SyntaxError("function call parameters number mismatch",this);W.push({type:p.parameterTypes[t],expr:new l.WConst(p.parameterTypes[t].toWType(),e,this.location),isLeft:!1})}const S=[];let x=e.memory.currentState.stackPtr;if(p.variableArguments)for(let t=W.length-1;t>p.parameterTypes.length-1;t--){const r=W[t];if(r.type instanceof o.ClassType)throw new n.SyntaxError("class type could not be variable arguments",this);const s=y.doValuePromote(e,r,this);x-=y.getInStackSize(s.type.length),S.push(new l.WFakeExpression(new c.WAddressHolder(x,i.AddressType.GLOBAL_SP,this.location).createStore(e,s.type,s.expr,!0),this.location))}else if(p.parameterTypes.length<this.arguments.length)throw new n.SyntaxError("function call parameters number mismatch",this);for(let n=p.parameterTypes.length-1;n>=0;n--){let s=p.parameterTypes[n];s instanceof r.ArrayType&&(s=new r.PointerType(s.elementType));const a=W[n];if(s instanceof o.ClassType){const n=a.type,o=new r.PointerType(s);x-=y.getInStackSize(s.length);const l=new u.AnonymousExpression(this.location,{type:o,isLeft:!1,expr:new c.WAddressHolder(x,i.AddressType.GLOBAL_SP,this.location).createLoadAddress(e)}),p=new u.AnonymousExpression(this.location,a),h=s.fullName+"::#"+s.shortName;let w;if(T.isFunctionExists(e,h,[o,n],null))w=new g(this.location,d.Identifier.fromString(this.location,h),[l,p]).codegen(e);else{const n=s.length;w=new g(this.location,d.Identifier.fromString(this.location,"::memcpy"),[new f.UnaryExpression(this.location,"&",l),new f.UnaryExpression(this.location,"&",p),new m.IntegerConstant(this.location,10,t.fromInt(n),n.toString(),null)]).codegen(e)}S.push(w.expr)}else{const t=y.doConversion(e,s,a,this,!1,!0).fold();p.variableArguments?(x-=y.getInStackSize(s.length),S.push(new l.WFakeExpression(new c.WAddressHolder(x,i.AddressType.GLOBAL_SP,this.location).createStore(e,a.type,t,!0),this.location))):S.push(t)}}S.reverse();const E=[];return 0!==x&&(S.push(new l.WFakeExpression(new l.WSetGlobal(l.WType.u32,"$sp",new l.WBinaryOperation(l.I32Binary.add,new l.WGetGlobal(l.WType.u32,"$sp",this.location),new l.WConst(l.WType.i32,x.toString(),this.location),this.location),this.location),this.location)),E.push(new l.WFakeExpression(new l.WSetGlobal(l.WType.u32,"$sp",new l.WBinaryOperation(l.I32Binary.sub,new l.WGetGlobal(l.WType.u32,"$sp",this.location),new l.WConst(l.WType.i32,x.toString(),this.location),this.location),this.location),this.location))),[S,E]}codegen(e){const t=this.getTargetFunction(e),p=t instanceof i.FunctionEntity?t.type:t,u=this.callee.codegen(e),h=[];let d=null;if(t instanceof i.FunctionEntity&&t.type.isMemberFunction()){if(!(u.type instanceof s.UnresolvedFunctionOverloadType))throw new n.InternalError("callee.type instanceof UnresolvedFunctionOverloadType");const i=u.type.functionLookupResult;if(null===i.instance||null===i.instanceType)throw new n.SyntaxError("call a member function must bind a object",this);if(h.push({expr:i.instance.createLoadAddress(e),type:new r.PointerType(i.instanceType),isLeft:!1}),t.type.isVirtual&&i.isDynamicCall){const o=t.type.cppFunctionType===s.CppFunctionType.Destructor?"~":t.shortName.split("@")[0]+"@"+t.type.parameterTypes.slice(1).map(e=>e.toString()).join(","),r=i.instanceType.getVCallInfo(o);if(null===r)throw new n.SyntaxError(`${t.shortName} is not a virtual function`,this);const[a,c]=r,p=new l.WLoad(l.WType.i32,new l.WBinaryOperation(l.I32Binary.add,i.instance.createLoadAddress(e),new l.WConst(l.WType.i32,a.toString(),this.location),this.location),l.WMemoryLocation.RAW,this.location);d=new l.WLoad(l.WType.i32,new l.WBinaryOperation(l.I32Binary.add,p,new l.WConst(l.WType.i32,c.toString(),this.location),this.location),l.WMemoryLocation.RAW,this.location)}}const[m,f]=this.generateFunctionBody(e,t,h);let T;return null!==d?(e.requiredWASMFuncTypes.add(p.toWASMEncoding()),T=new l.WCallIndirect(d,p.toWASMEncoding(),m,f,this.location)):t instanceof i.FunctionEntity?T=new l.WCall(t.fullName,m,f,this.location):(u.type=a.PrimitiveTypes.int32,e.requiredWASMFuncTypes.add(p.toWASMEncoding()),T=new l.WCallIndirect(y.doConversion(e,a.PrimitiveTypes.int32,u,this),p.toWASMEncoding(),m,f,this.location)),p.returnType instanceof o.ClassType?{type:p.returnType,expr:new c.WAddressHolder(T,i.AddressType.RVALUE,this.location),isLeft:!0}:{type:p.returnType,expr:T,isLeft:!1}}deduceType(e){const t=this.getTargetFunction(e);return t instanceof i.FunctionEntity?t.type.returnType:t.returnType}}exports.CallExpression=g;
},{"long":"YvD4","../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../conversion":"Gzzz","../expression/anonymous_expression":"/aCp","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../overload":"sV6L"}],"BUJe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../type/class_type"),r=require("../type/compound_type"),n=require("../type/primitive_type"),o=require("./address"),s=require("./scope");function p(p,i,l,a){if(i.expr instanceof s.FunctionLookUpResult||l.expr instanceof s.FunctionLookUpResult)throw new e.InternalError("unsupport function name");if(!(i.type instanceof r.LeftReferenceType))throw new e.InternalError("you could only bind to a reference");if(!(i.isLeft&&i.expr instanceof o.WAddressHolder))throw new e.InternalError("the reference is not a left value");if(l.type instanceof r.ReferenceType){const r=l.type.elementType,s=i.type.elementType;if(r instanceof t.ClassType&&s instanceof t.ClassType){if(!r.isSubClassOf(s))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`)}else if(!l.type.elementType.equals(i.type.elementType))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`);l.expr instanceof o.WAddressHolder&&(l.expr=l.expr.createLoad(p,l.type)),p.submitStatement(i.expr.createStore(p,n.PrimitiveTypes.uint32,l.expr))}else{const r=l.type,s=i.type.elementType;if(r instanceof t.ClassType&&s instanceof t.ClassType){if(!r.isSubClassOf(s))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`)}else if(!l.type.equals(i.type.elementType))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`);if(!(l.isLeft&&l.expr instanceof o.WAddressHolder))throw new e.InternalError("you could only bind to a left value");p.submitStatement(i.expr.createStore(p,n.PrimitiveTypes.uint32,l.expr.createLoadAddress(p)))}}exports.doReferenceBinding=p;
},{"../common/error":"nOPH","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","./address":"JsMC","./scope":"y+tL"}],"sfIM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../type/class_type"),r=require("../../type/compound_type"),i=require("../../type/primitive_type"),o=require("../../wasm"),n=require("../class/member_expression"),s=require("../conversion"),p=require("../function/call_expression"),a=require("./expression"),h=require("./identifier");class c extends a.Expression{constructor(e,t,r,i){super(e),void 0===t[1]?this.operator=t[0]:this.operator=t,this.left=r,this.right=i}codegen(c){if(","===this.operator)return a.recycleExpressionResult(c,this,this.left.codegen(c)),this.right.codegen(c);const y=this.left.deduceType(c),l=this.right.deduceType(c);if(y instanceof t.ClassType)return new p.CallExpression(this.location,new n.MemberExpression(this.location,this.left,!1,h.Identifier.fromString(this.location,"#"+this.operator)),[this.right]).codegen(c);if(l instanceof t.ClassType)throw new e.SyntaxError("current not support right overload",this);let f=this.left.codegen(c),u=this.right.codegen(c);const T=this.deduceType(c),d=o.getOpFromStr(this.operator,T.toWType());if(null===d)throw new e.InternalError(`unsupport op ${this.operator}`);T instanceof r.PointerType&&(f.type instanceof i.IntegerType?(f=s.doValueTransform(c,f,this),f={type:T,isLeft:!1,expr:new o.WBinaryOperation(o.I32Binary.mul,f.expr,new o.WConst(o.WType.u32,T.elementType.length.toString(),this.location),this.location)}):u.type instanceof i.IntegerType&&(u=s.doValueTransform(c,u,this),u={type:T,isLeft:!1,expr:new o.WBinaryOperation(o.I32Binary.mul,u.expr,new o.WConst(o.WType.u32,T.elementType.length.toString(),this.location),this.location)}));let w=s.doConversion(c,T,f,this),g=s.doConversion(c,T,u,this);return"&&"!==this.operator&&"||"!==this.operator||(w=new o.WBinaryOperation(o.I32Binary.ne,w,new o.WConst(o.WType.i32,"0",this.location),this.location),g=new o.WBinaryOperation(o.I32Binary.ne,g,new o.WConst(o.WType.i32,"0",this.location),this.location)),{type:T,isLeft:!1,expr:new o.WBinaryOperation(d,w,g,this.location)}}deduceType(o){const a=s.doTypeTransfrom(this.left.deduceType(o)),c=s.doTypeTransfrom(this.right.deduceType(o));if(a instanceof t.ClassType)return new p.CallExpression(this.location,new n.MemberExpression(this.location,this.left,!1,h.Identifier.fromString(this.location,"#"+this.operator)),[this.right]).deduceType(o);if("+-*%/".includes(this.operator)){if(a instanceof i.ArithmeticType&&c instanceof i.ArithmeticType)return s.arithmeticDeduce(a,c);if(a instanceof r.PointerType||c instanceof r.PointerType){if(a instanceof r.PointerType&&c instanceof r.PointerType)throw new e.TypeError("could not apply ope on two pointer",this);if(a instanceof r.PointerType){if(!(c instanceof i.IntegerType))throw new e.TypeError(`could not apply ${c.toString()} to pointer`,this);return a}if(c instanceof r.PointerType){if(!(a instanceof i.IntegerType))throw new e.TypeError(`could not apply ${a.toString()} to pointer`,this);if("-"===this.operator)throw new e.TypeError("could - a pointer",this);return c}throw new e.TypeError("bad operator on pointer",this)}throw new e.TypeError(`could not apply ${this.operator} on ${a.toString()}`+` and ${c.toString()}`,this)}if([">=","<=",">","<","==","!="].includes(this.operator)){if(a instanceof i.ArithmeticType&&c instanceof i.ArithmeticType)return i.PrimitiveTypes.bool;if(a instanceof r.PointerType&&c instanceof r.PointerType)return i.PrimitiveTypes.bool;throw new e.TypeError("unsupport relation compute",this)}if(["&&","||"].includes(this.operator))return i.PrimitiveTypes.bool;if(["&","|","^",">>","<<"].includes(this.operator)){if(!(a instanceof i.IntegerType&&c instanceof i.IntegerType))throw new e.TypeError("binary operator could only be applied on integer",this);return i.PrimitiveTypes.int32}if(","===this.operator)return this.right.deduceType(o);throw new e.InternalError("no impl at BinaryExpression()")}}exports.BinaryExpression=c;
},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../class/member_expression":"5MB0","../conversion":"Gzzz","../function/call_expression":"sKlM","./expression":"TaUa","./identifier":"5fRK"}],"Laai":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("long")),r=require("../../common/error"),i=require("../../common/symbol"),n=require("../../type/class_type"),s=require("../../type/compound_type"),o=require("../../type/primitive_type"),a=require("../../wasm"),p=require("../address"),c=require("../class/member_expression"),l=require("../conversion"),h=require("../function/call_expression"),f=require("../overload"),u=require("../reference"),y=require("./binary_expression"),d=require("./expression"),x=require("./identifier"),m=require("./integer_constant"),g=require("./unary_expression"),q=new s.PointerType(new o.CharType),w=new s.PointerType(new o.CharType);class E extends d.Expression{constructor(e,t,r,i){super(e),this.operator=t,this.left=r,this.right=i,this.isInitExpr=!1}codegen(e){if("="!==this.operator){const e=this.operator.split("=")[0];this.operator="=",this.right=new y.BinaryExpression(this.location,e,this.left,this.right)}const E=this.left.deduceType(e),T=this.right.deduceType(e);if(E instanceof n.ClassType){const r=E.fullName+"::#=";if(f.isFunctionExists(e,r,[T],E))return new h.CallExpression(this.location,new c.MemberExpression(this.location,this.left,!1,x.Identifier.fromString(this.location,"#=")),[this.right]).codegen(e);if(T.equals(E)){const r=E.length;return new h.CallExpression(this.location,x.Identifier.fromString(this.location,"::memcpy"),[new g.UnaryExpression(this.location,"&",this.left),new g.UnaryExpression(this.location,"&",this.right),new m.IntegerConstant(this.location,10,t.fromInt(r),r.toString(),null)]).codegen(e)}{const t=E.fullName+"::#"+E.shortName,r=x.Identifier.fromString(this.location,t);return new h.CallExpression(this.location,r,[new g.UnaryExpression(this.location,"&",this.left),this.right]).codegen(e)}}let _=this.left.codegen(e);const I=this.right.codegen(e);if(this.isInitExpr&&_.type instanceof s.LeftReferenceType)return u.doReferenceBinding(e,_,I,this),_;if(!((_=l.doReferenceTransform(e,_,this)).isLeft&&_.expr instanceof p.WAddressHolder))throw new r.SyntaxError("could not assign to a right value",this);if(_.type instanceof s.ArrayType)throw new r.SyntaxError("unsupport array assignment",this);if(this.isInitExpr&&this.left instanceof x.Identifier&&_.expr.type===i.AddressType.MEMORY_DATA){if(I.expr instanceof a.WConst&&(I.type instanceof o.IntegerType||I.type instanceof o.FloatingType))return d.doVarInit(e,_.type,I.type,_.expr.place,I.expr.constant,this),_;if(I.expr instanceof a.WGetAddress&&I.expr.form===a.WMemoryLocation.DATA&&I.type.equals(w)){if(!_.type.equals(q)&&!_.type.equals(w))throw new r.SyntaxError(`unsupport init from ${_.type} to ${I.type}`,this);return e.memory.data.setUint32(_.expr.place,I.expr.offset,!0),_}}return e.submitStatement(_.expr.createStore(e,_.type,l.doConversion(e,_.type,I,this).fold())),_}deduceType(e){return this.left.deduceType(e)}}exports.AssignmentExpression=E;
},{"long":"YvD4","../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../conversion":"Gzzz","../function/call_expression":"sKlM","../overload":"sV6L","../reference":"BUJe","./binary_expression":"sfIM","./expression":"TaUa","./identifier":"5fRK","./integer_constant":"aB1x","./unary_expression":"6Etb"}],"22up":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./binary_expression"),r=require("./expression"),s=require("./unary_expression"),i=require("../../type/class_type"),n=require("../function/call_expression"),t=require("../class/member_expression"),o=require("./identifier");class a extends r.Expression{constructor(r,i,n){super(r),this.array=i,this.subscript=n,this.unaryExpr=new s.UnaryExpression(this.location,"*",new e.BinaryExpression(this.location,"+",this.array,this.subscript))}codegen(e){const r=this.array.deduceType(e);if(r instanceof i.ClassType){if(null!=e.scopeManager.lookup(r.fullName+"::#[]"))return new n.CallExpression(this.location,new t.MemberExpression(this.location,this.array,!1,o.Identifier.fromString(this.location,"#[]")),[this.subscript]).codegen(e)}return this.unaryExpr.codegen(e)}deduceType(e){const r=this.array.deduceType(e);if(r instanceof i.ClassType){if(null!=e.scopeManager.lookup(r.fullName+"::#[]"))return new n.CallExpression(this.location,new t.MemberExpression(this.location,this.array,!1,o.Identifier.fromString(this.location,"#[]")),[this.subscript]).deduceType(e)}return this.unaryExpr.deduceType(e)}}exports.SubscriptExpression=a;
},{"./binary_expression":"sfIM","./expression":"TaUa","./unary_expression":"6Etb","../../type/class_type":"vaEy","../function/call_expression":"sKlM","../class/member_expression":"5MB0","./identifier":"5fRK"}],"6Etb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../type/class_type"),t=require("../../type/compound_type"),n=require("../../type/primitive_type"),o=require("../../wasm"),i=require("../address"),s=require("../class/member_expression"),p=require("../conversion"),a=require("../function/call_expression"),c=require("./assignment_expression"),h=require("./binary_expression"),y=require("./expression"),d=require("./identifier"),u=require("./integer_constant"),f=require("./subscript_expression");class l extends y.Expression{constructor(e,r,t){super(e),this.operator=r,this.operand=t}codegen(y){if("sizeof"===this.operator)return{type:n.PrimitiveTypes.uint32,expr:new o.WConst(o.WType.u32,this.operand.deduceType(y).length.toString(),this.location),isLeft:!1};const T=this.operand.deduceType(y);if(T instanceof r.ClassType){if(null!=y.scopeManager.lookup(T.fullName+"::#"+this.operator))return new a.CallExpression(this.location,new s.MemberExpression(this.location,this.operand,!1,d.Identifier.fromString(this.location,"#"+this.operator)),[]).codegen(y)}if("++"===this.operator||"--"===this.operator)return new c.AssignmentExpression(this.location,"=",this.operand,new h.BinaryExpression(this.location,this.operator.charAt(0),this.operand,u.IntegerConstant.OneConstant)).codegen(y);if("&"===this.operator){if(this.operand instanceof f.SubscriptExpression)return new h.BinaryExpression(this.location,"+",this.operand.array,this.operand.subscript).codegen(y);if(this.operand instanceof l&&"*"===this.operand.operator)return this.operand.operand.codegen(y)}let m=this.operand.codegen(y);if("*"===this.operator){if(m.type instanceof t.ReferenceType&&(m=p.doReferenceTransform(y,m,this)),m.type instanceof t.PointerType)return{isLeft:!0,type:new t.LeftReferenceType(m.type.elementType),expr:m.expr};throw new e.SyntaxError(`you could not apply * on ${m.type.toString()} `,this)}if("&"===this.operator){if(!(m.isLeft&&m.expr instanceof i.WAddressHolder))throw new e.SyntaxError("you could not get address of a right value ",this);return m.type instanceof t.ArrayType&&(m.type=m.type.elementType),{isLeft:!1,type:new t.PointerType(m.type),expr:m.expr.createLoadAddress(y)}}if("+"===this.operator)return p.doValueTransform(y,this.operand.codegen(y),this);if("-"===this.operator)return new h.BinaryExpression(this.location,"-",u.IntegerConstant.ZeroConstant,this.operand).codegen(y);if("!"===this.operator){const e=p.doConversion(y,n.PrimitiveTypes.int32,this.operand.codegen(y),this);return{type:n.PrimitiveTypes.int32,isLeft:!1,expr:new o.WUnaryOperation(o.I32Unary.eqz,e,this.location)}}if("~"===this.operator)return new h.BinaryExpression(this.location,"^",u.IntegerConstant.NegOneConstant,this.operand).codegen(y);throw new e.InternalError(`no_impl at unary ope=${this.operator}`)}deduceType(o){if("sizeof"===this.operator)return n.PrimitiveTypes.uint32;if("++"===this.operator||"--"===this.operator)return new h.BinaryExpression(this.location,this.operator.charAt(0),this.operand,u.IntegerConstant.OneConstant).deduceType(o);const i=this.operand.deduceType(o);if(i instanceof r.ClassType){if(null!=o.scopeManager.lookup(i.fullName+"::#"+this.operator))return new a.CallExpression(this.location,new s.MemberExpression(this.location,this.operand,!1,d.Identifier.fromString(this.location,"#"+this.operator)),[]).deduceType(o)}const c=p.doTypeTransfrom(i);if("*"===this.operator){if(c instanceof t.PointerType||c instanceof t.ArrayType)return c.elementType;if(c instanceof t.LeftReferenceType&&(c.elementType instanceof t.PointerType||c.elementType instanceof t.ArrayType))return c.elementType.elementType;throw new e.TypeError(`could not apply * on ${c.toString()}`,this)}if("&"===this.operator)return new t.PointerType(c);if("!"===this.operator||"~"===this.operator)return n.PrimitiveTypes.int32;if("+"===this.operator||"-"===this.operator)return this.operand.deduceType(o);throw new e.InternalError("no imple at UnaryExpression().deduce")}}exports.UnaryExpression=l;
},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../conversion":"Gzzz","../function/call_expression":"sKlM","./assignment_expression":"Laai","./binary_expression":"sfIM","./expression":"TaUa","./identifier":"5fRK","./integer_constant":"aB1x","./subscript_expression":"22up"}],"5MB0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/symbol"),n=require("../../type/class_type"),s=require("../../type/compound_type"),r=require("../../type/function_type"),o=require("../../wasm"),i=require("../address"),c=require("../conversion"),a=require("../expression/expression"),p=require("../expression/unary_expression"),y=require("../scope");class l extends a.Expression{constructor(e,t,n,s){super(e),this.object=t,this.pointed=n,this.member=s,this.forceDynamic=!1}codegen(a){const l=this.member.getPlainName(a);let m=this.pointed?new p.UnaryExpression(this.location,"*",this.object).codegen(a):this.object.codegen(a);const u=m.type instanceof s.ReferenceType;if(!((m=c.doReferenceTransform(a,m,this)).isLeft&&m.expr instanceof i.WAddressHolder))throw new e.InternalError("unsupport rvalue of member expression");if(!(m.type instanceof n.ClassType))throw new e.SyntaxError("only struct/class could be get member",this);const d=m.type.getMember(a,l);if(null===d)throw new e.SyntaxError(`name ${this.member.getLookupName(a)} is not on class `+`${m.type.shortName}`,this);return d instanceof t.Variable?{type:d.type,expr:new i.WAddressHolder(d.location,d.addressType,this.location),isLeft:!0}:d instanceof y.FunctionLookUpResult?(d.instance=m.expr,d.instanceType=m.type,(this.pointed||u)&&(l.includes("~")?d.isDynamicCall=this.forceDynamic:d.isDynamicCall=!0),{type:new r.UnresolvedFunctionOverloadType(d),expr:new o.WConst(o.WType.any,"0",this.location),isLeft:!1}):{isLeft:!0,type:d.type,expr:m.expr.makeOffset(d.startOffset)}}deduceType(o){const i=this.member.getPlainName(o),c=this.pointed?new p.UnaryExpression(this.location,"*",this.object).deduceType(o):this.object.deduceType(o),a=c instanceof s.ReferenceType;let l=c;if(l instanceof s.LeftReferenceType&&(l=l.elementType),!(l instanceof n.ClassType))throw new e.SyntaxError("only struct/class could be get member",this);const m=l.getMember(o,i);if(null===m)throw new e.SyntaxError(`name ${this.member.getLookupName(o)} is not on class ${l.shortName}`,this);return m instanceof t.Variable?m.type:m instanceof y.FunctionLookUpResult?(m.instanceType=l,(this.pointed||a)&&(i.includes("~")?m.isDynamicCall=this.forceDynamic:m.isDynamicCall=!0),new r.UnresolvedFunctionOverloadType(m)):m.type}}exports.MemberExpression=l;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../wasm":"Jo9c","../address":"JsMC","../conversion":"Gzzz","../expression/expression":"TaUa","../expression/unary_expression":"6Etb","../scope":"y+tL"}],"QzhC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),n=require("../../common/node"),t=require("../../common/symbol"),a=require("../../common/template"),o=require("../../type");class r extends n.ClassDirective{constructor(e,n){super(e),this.specifier=n}codegen(n){const t=this.specifier.identifier,o=t.getLookupName(n),r=n.scopeManager.lookup(o);if(!(r instanceof a.ClassTemplate))throw new e.SyntaxError(`${o} is not a class template`,this);const i=t.fillInBlank(n,t.getLastID().args,r),c="<"+i.map(e=>e.toString).join(",")+">";n.scopeManager.lookup(r.fullName+c)||s(n,r,i,this)}declare(n,t){throw new e.InternalError("todo")}}function s(e,n,a,r){const s=a.map(e=>e.toString()).join(",");e.scopeManager.enterSavedScope(n.scopeContext),e.scopeManager.enterUnnamedScope(!0);for(let d=0;d<a.length;d++){const s=n.templateParams[d].name,i=a[d];i instanceof o.Type?e.scopeManager.define(s,i,r):e.scopeManager.define(s,new t.Variable(s,e.scopeManager.getFullName(s),e.fileName,n.templateParams[d].type,t.AddressType.CONSTANT,i,o.AccessControl.Public),r)}let i=n.classBody;const c=n.specializationMap.get(s);c&&(i=c);const p=i.identifier.name[i.identifier.name.length-1].name;i.identifier.name[i.identifier.name.length-1].name+="<"+s+">";const l=i.identifier.getShortName(e),m=i.codegen(e);return i.identifier.name[i.identifier.name.length-1].name=p,e.scopeManager.currentContext.scope.children.map(n=>e.scopeManager.currentContext.scope.parent.children.push(n)),e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.define(l,m,r),e.scopeManager.exitScope(),m}exports.ClassTemplateInstantiation=r,exports.instantiateClassTemplate=s;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13"}],"5fRK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),n=require("../../common/symbol"),i=require("../../common/template"),r=require("../../type"),s=require("../../type/class_type"),o=require("../../type/function_type"),a=require("../../wasm"),l=require("../address"),u=require("../class/member_expression"),h=require("../scope"),p=require("../template/class_template_instantiation"),m=require("./expression");var c;!function(e){e[e.ID=0]="ID",e[e.TYPE=1]="TYPE",e[e.T_FUNC=2]="T_FUNC",e[e.T_FUNC_INS=3]="T_FUNC_INS",e[e.T_CLASS=4]="T_CLASS",e[e.T_CLASS_INS=5]="T_CLASS_INS"}(c=exports.IDType||(exports.IDType={}));class f extends t.Node{static fromString(e,t){return new f(e,t,c.ID,[])}constructor(e,t,n,i){super(e),this.name=t,this.type=n,this.args=i}clone(){return new f(this.location,this.name,this.type,this.args)}}exports.SingleIdentifier=f;class y extends m.Expression{static fromString(e,t){return new y(e,[new f(e,t,c.ID,[])],!1)}constructor(e,t,n){super(e),this.name=t,this.isFullName=n}getLastID(){return this.name[this.name.length-1]}getType(){return this.getLastID().type}clone(){return new y(this.location,this.name.map(e=>e.clone()),this.isFullName)}getPlainName(t){if(1!==this.name.length||this.name[0].type!==c.ID&&this.name[0].type!==c.TYPE)throw new e.SyntaxError(`${this.getLookupName(t)} is not a valid identifier`,this);return this.getShortName(t)}getShortName(e){return this.getLastID().name}getFullName(e){return this.isFullName?this.getLookupName(e):e.scopeManager.getFullName(this.getLookupName(e))}fillInBlank(t,n,i){const r=n.map(e=>e.evaluate(t));for(;r.length<i.templateParams.length;){const t=i.templateParams[r.length].init;if(null===t)throw new e.SyntaxError(`template number mismatch of template ${i.shortName}`,this);r.push(t)}return r}getLookupName(t){let n="";this.isFullName&&(n+="::");for(let r=0;r<this.name.length;r++)if(0!==r&&(n+="::"),n+=this.name[r].name,r!==this.name.length-1&&(this.name[r].type===c.T_FUNC_INS||this.name[r].type===c.T_CLASS_INS)){const s=new y(this.location,this.name.slice(0,r+1),this.isFullName).getLookupName(t),o=t.scopeManager.lookup(s);if(!o)throw new e.SyntaxError(`undefined template name ${n}`,this);if(this.name[r].type===c.T_FUNC_INS)throw new e.SyntaxError(`illegal function template name ${n}`,this);{if(!(o instanceof i.ClassTemplate))throw new e.SyntaxError(`${n} is not class template name`,this);const a=this.fillInBlank(t,this.name[r].args,o),l=s+"<"+a.join(",")+">";t.scopeManager.lookup(l)||p.instantiateClassTemplate(t,o,a,this),n=l}}return n}tryLookupImplicitThis(t){if(null===t.scopeManager.lookup("this"))throw new e.SyntaxError(`Unresolve Name ${this.getLookupName(t)}`,this);try{return new u.MemberExpression(this.location,y.fromString(this.location,"this"),!0,this)}catch(n){throw new e.SyntaxError(`Unresolve Name ${this.getLookupName(t)}`,this)}}codegen(t){const i=this.getLookupName(t);let r=t.scopeManager.lookup(i);if(r=this.filterMemberFunction(r)){if(r instanceof n.Variable)return{type:r.type,expr:new l.WAddressHolder(r.location,r.addressType,this.location),isLeft:!0};if(r instanceof h.FunctionLookUpResult)return{type:new o.UnresolvedFunctionOverloadType(r),expr:new a.WConst(a.WType.any,"0",this.location),isLeft:!1};throw new e.SyntaxError(`name ${i} is a ${r.constructor.name}`,this)}return this.tryLookupImplicitThis(t).codegen(t)}filterMemberFunction(e){return e&&e instanceof h.FunctionLookUpResult&&(e.functions=e.functions.filter(e=>!(e instanceof n.FunctionEntity&&e.type.cppFunctionType===o.CppFunctionType.MemberFunction)),0===e.functions.length&&(e=null)),e}deduceType(t){const a=this.getLookupName(t);let l=t.scopeManager.lookup(a);if(!(l=this.filterMemberFunction(l)))return this.tryLookupImplicitThis(t).deduceType(t);if(this.getLastID().type===c.ID){if(l instanceof n.Variable)return l.type;if(l instanceof h.FunctionLookUpResult)return new o.UnresolvedFunctionOverloadType(l);throw new e.SyntaxError(`name ${a} should be variable`+` but it is a ${l.constructor.name}`,this)}if(this.getLastID().type===c.TYPE){if(l instanceof r.Type)return l;throw new e.SyntaxError(`name ${a} should be type`+` but it is a ${l.constructor.name}`,this)}if(this.getLastID().type===c.T_FUNC)throw new e.SyntaxError(`name ${a} is a function template`,this);if(this.getLastID().type===c.T_FUNC_INS){if(l instanceof h.FunctionLookUpResult)return l.templateArguments=this.getLastID().args.map(e=>e.evaluate(t)),new o.UnresolvedFunctionOverloadType(l);throw new e.SyntaxError(`name ${a} should be template function`+` but it is a ${l.constructor.name}`,this)}if(this.getLastID().type===c.T_CLASS)throw new e.SyntaxError(`name ${a} is a class template`,this);if(this.getLastID().type===c.T_CLASS_INS){if(l instanceof i.ClassTemplate){const n=this.fillInBlank(t,this.getLastID().args,l),i=a+"<"+n.join(",")+">",r=t.scopeManager.lookup(i);if(!r)return p.instantiateClassTemplate(t,l,n,this);if(!(r instanceof s.ClassType))throw new e.SyntaxError(`name ${a} should be class template`+` but it is a ${l.constructor.name}`,this);return r}throw new e.SyntaxError(`name ${a} should be template function`+` but it is a ${l.constructor.name}`,this)}throw new e.InternalError("unreachable")}}exports.Identifier=y;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13","../../type/class_type":"vaEy","../../type/function_type":"VPTZ","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../scope":"y+tL","../template/class_template_instantiation":"QzhC","./expression":"TaUa"}],"ef0b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../common/symbol"),o=require("../../type/class_type"),t=require("../expression/expression"),n=require("../expression/identifier"),s=require("../function/call_expression"),i=require("./member_expression");function c(r,c,a){const l=c.type;if(!(l instanceof o.ClassType))throw new e.InternalError("triggerDestructor()");const p=l.fullName+"::~"+l.shortName;null!==r.scopeManager.lookup(p)&&t.recycleExpressionResult(r,a,new s.CallExpression(a.location,new i.MemberExpression(a.location,n.Identifier.fromString(a.location,c.shortName),!1,n.Identifier.fromString(a.location,"~"+l.shortName)),[]).codegen(r))}function a(e,t){for(const n of e.scopeManager.currentContext.scope.map.values()){const s=n[0];s instanceof r.Variable&&s.type instanceof o.ClassType&&c(e,s,t)}}exports.triggerDestructor=c,exports.triggerAllDestructor=a;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../function/call_expression":"sKlM","./member_expression":"5MB0"}],"0pYg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node");class t extends e.Directive{constructor(e){super(e)}}exports.Statement=t;
},{"../../common/node":"PoXi"}],"k1ya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../type/class_type"),r=require("../../type/compound_type"),n=require("../../type/primitive_type"),i=require("../../wasm"),s=require("../address"),o=require("../class/destructor"),u=require("../conversion"),c=require("../statement/statement");class a extends c.Statement{constructor(e,t){super(e),this.argument=t}codegen(c){if(null===c.currentFuncContext.currentFunction)throw new e.SyntaxError("return outside function",this);if(o.triggerAllDestructor(c,this),c.submitStatement(new i.WSetGlobal(i.WType.u32,"$sp",new i.WGetLocal(i.WType.u32,c.currentFuncContext.currentFunction.$sp,this.location),this.location)),null!==this.argument){const o=c.currentFuncContext.currentFunction.type.returnType;if(o.equals(n.PrimitiveTypes.void))throw new e.SyntaxError("return type mismatch",this);let a=this.argument.codegen(c);if(o instanceof t.ClassType||o instanceof r.ReferenceType){if(a.type instanceof r.LeftReferenceType&&(a=u.doReferenceTransform(c,a,this)),!(a.isLeft&&a.expr instanceof s.WAddressHolder))throw new e.SyntaxError("return a rvalue of reference",this);c.submitStatement(new i.WReturn(a.expr.createLoadAddress(c),this.location))}else a.expr=u.doConversion(c,c.currentFuncContext.currentFunction.type.returnType,a,this),c.submitStatement(new i.WReturn(a.expr.fold(),this.location))}else{if(!c.currentFuncContext.currentFunction.type.returnType.equals(n.PrimitiveTypes.void))throw new e.SyntaxError("return type mismatch",this);c.submitStatement(new i.WReturn(null,this.location))}}}exports.ReturnStatement=a;
},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/destructor":"ef0b","../conversion":"Gzzz","../statement/statement":"0pYg"}],"rsVP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/symbol"),n=require("../../type"),a=require("../../type/class_type"),o=require("../../type/compound_type"),r=require("../../type/primitive_type"),s=require("../../wasm"),i=require("../conversion"),p=require("../expression/integer_constant"),l=require("../scope"),c=require("./return_statement");function y(e,n,a){const o=l.getShortName(n.name)+"@"+n.functionType.toMangledName(),r=e.scopeManager.currentContext.scope.fullName+"::"+o;return new t.FunctionEntity(o,r,e.fileName,n.functionType,n.parameterInits,n.isLibCall,a,n.accessControl,e.scopeManager.currentContext.activeScopes)}function u(e,t,n){const i=y(e,t,!1);if(t.isLibCall){i.shortName=i.shortName.split("@")[0],i.fullName=i.fullName.split("@")[0];const t=[],p=[];for(let e=i.type.parameterTypes.length-1;e>=0;e--){const t=i.type.parameterTypes[e];t instanceof a.ClassType||t instanceof o.ArrayType||i.type.variableArguments&&e===i.type.parameterTypes.length-1||p.push(t.toWType())}const l=i.type.returnType;l.equals(r.PrimitiveTypes.void)||(l instanceof a.ClassType||l instanceof o.ArrayType?t.push(s.WType.i32):t.push(s.getNativeType(l.toWType()))),e.scopeManager.lookup(i.fullName)||e.imports.push({name:i.fullName,type:new s.WFunctionType(t,p,n.location)})}e.scopeManager.declare(t.name,i,n)}function m(l,u,m,f,g){if(u.parameterInits.length!==u.parameterNames.length||u.parameterNames.length!==u.functionType.parameterTypes.length)throw new e.SyntaxError("parameter length mismatch",g);const T=y(l,u,!0);l.scopeManager.define(u.name,T,g),l.enterFunction(T),l.scopeManager.activeScopes(f);const h=[],W=[];let w=0;for(let n=T.type.parameterTypes.length-1;n>=0;n--){const o=T.type.parameterTypes[n],r=u.parameterNames[n];if(!r)throw new e.SyntaxError("unnamed parameter",g);(o instanceof a.ClassType||T.type.variableArguments)&&(l.scopeManager.define(r,new t.Variable(r,l.scopeManager.getFullName(r),l.fileName,o,t.AddressType.STACK,w,u.accessControl),g),w+=i.getInStackSize(o.length))}for(let o=0;o<T.type.parameterTypes.length;o++){const r=T.type.parameterTypes[o],s=u.parameterNames[o];if(!s)throw new e.SyntaxError("unnamed parameter",g);r instanceof a.ClassType||T.type.variableArguments||(W.push(r.toWType()),l.scopeManager.define(s,new t.Variable(s,l.scopeManager.getFullName(s),l.fileName,r,t.AddressType.LOCAL,l.memory.allocLocal(r.toWType(),!0),n.AccessControl.Public),g))}const N=T.type.returnType;N.equals(r.PrimitiveTypes.void)||(N instanceof a.ClassType||N instanceof o.ArrayType?h.push(s.WType.i32):h.push(s.getNativeType(N.toWType()))),T.$sp=l.memory.allocLocal(s.WType.u32),l.submitStatement(new s.WSetLocal(s.WType.u32,T.$sp,new s.WGetGlobal(s.WType.u32,"$sp",g.location),g.location));const d=new s.WConst(s.WType.i32,"0",g.location);l.submitStatement(new s.WSetGlobal(s.WType.u32,"$sp",new s.WBinaryOperation(s.I32Binary.add,new s.WGetLocal(s.WType.u32,T.$sp,g.location),d,g.location),g.location)),m.map(e=>e.codegen(l)),d.constant=l.memory.currentState.stackPtr.toString();const S=l.getStatementContainer();if(!T.type.returnType.equals(r.PrimitiveTypes.void)){let t=S;for(;t.length>0&&t[t.length-1]instanceof s.WBlock||t[t.length-1]instanceof s.WIfElseBlock||t[t.length-1]instanceof s.WLoop;){const n=t[t.length-1];if(n instanceof s.WBlock||n instanceof s.WLoop)t=n.body;else{if(!(n instanceof s.WIfElseBlock))throw new e.SyntaxError(`not all path of function contains return in ${T.fullName}`,g);if(null===n.alternative)throw new e.SyntaxError("not all path of function contains return in "+`${T.fullName}`,g);t=n.alternative}}if(0===t.length||!(t[t.length-1]instanceof s.WReturn))throw new e.SyntaxError(`not all path of function contains return in ${T.fullName}`,g);S.length>0&&S[S.length-1]instanceof s.WIfElseBlock&&new c.ReturnStatement(g.location,p.IntegerConstant.ZeroConstant).codegen(l)}const v=l.memory.currentState.localTypes;l.exitFunction(),l.submitFunction(new s.WFunction(T.fullName,u.functionType.toDisplayString(T.shortName),h,W,v,S,g.location))}exports.createFunctionEntity=y,exports.declareFunction=u,exports.defineFunction=m;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../conversion":"Gzzz","../expression/integer_constant":"aB1x","../scope":"y+tL","./return_statement":"k1ya"}],"FIFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../type"),i=require("../type/compound_type"),t=require("../type/function_type"),n=require("../type/primitive_type"),r=require("./function/function");function p(i,n,p,o,c){r.declareFunction(i,{name:n,functionType:new t.FunctionType(p,o,!1),parameterInits:o.map(e=>null),parameterNames:o.map(e=>""),accessControl:e.AccessControl.Public,isLibCall:!0},c)}function o(e,t){const r=n.PrimitiveTypes.void,o=new i.PointerType(n.PrimitiveTypes.void);t.isCpp()&&(p(t,"memcpy",r,[o,o,n.PrimitiveTypes.uint32],e),p(t,"memset",r,[o,n.PrimitiveTypes.int32,n.PrimitiveTypes.uint32],e),p(t,"malloc",o,[n.PrimitiveTypes.uint32],e),p(t,"malloc_array",o,[n.PrimitiveTypes.uint32,n.PrimitiveTypes.uint32],e),p(t,"free",r,[o],e)),e.codegen(t)}exports.codegen=o;
},{"../type":"Rt13","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./function/function":"rsVP"}],"KRc9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t){this.dataPtr=0,this.bssPtr=0,this.dataBuffer=new ArrayBuffer(t),this.data=new DataView(this.dataBuffer),this.stringMap=new Map,this.MEMORY_$BP=0,this.MEMORY_$SP=0,this.currentState={stackPtr:0,localPtr:0,localTypes:[]},this.states=[]}allocData(t){const s=this.dataPtr;return this.dataPtr+=t,s}allocBss(t){const s=this.bssPtr;return this.bssPtr+=t,s}allocLocal(t,s=!1){return s||this.currentState.localTypes.push(t),this.currentState.localPtr++}allocStack(t){return t%4!=0&&(t+=4-t%4),this.currentState.stackPtr-=t,this.currentState.stackPtr}allocString(t){const s=this.stringMap.get(t);if(void 0!==s)return s;const a=this.allocData(t.length+1);return this.setDataString(a,t),this.stringMap.set(t,a),a}setDataString(t,s){for(let a=0;a<s.length;a++)this.data.setUint8(t+a,s.charCodeAt(a));this.data.setUint8(t+s.length,0)}enterFunction(){this.states.push(this.currentState),this.currentState={stackPtr:0,localPtr:0,localTypes:[]}}exitFunction(){this.currentState=this.states.pop()}}exports.MemoryLayout=t;
},{}],"cKzO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../common/error"),e=require("../common/symbol"),n=require("../type"),r=require("./class/destructor"),s=require("./memory"),o=require("./scope");class i{constructor(t,e={},n,r){this.scopeManager=new o.ScopeManager(!!e.isCpp),this.functionMap=new Map,this.memory=new s.MemoryLayout(1e3),this.options=e,this.fileName=t,this.sourceMap=r,this.source=n,this.functions=[],this.imports=[],this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:null},this.funcContexts=[],this.requiredWASMFuncTypes=new Set}isCpp(){return!!this.options.isCpp}enterFunction(t){this.functionMap.set(t.shortName,t),this.scopeManager.enterScope(t.fullName),this.memory.enterFunction(),this.funcContexts.push(this.currentFuncContext),this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:t}}exitFunction(){if(this.funcContexts.length<=0)throw new t.InternalError("this.currentFunction==null");this.memory.exitFunction(),this.scopeManager.exitScope(),this.currentFuncContext=this.funcContexts.pop()}enterScope(){this.scopeManager.enterUnnamedScope(!1)}exitScope(t){r.triggerAllDestructor(this,t),this.scopeManager.exitScope()}setStatementContainer(t){this.currentFuncContext.statementContainer=t}getStatementContainer(){return this.currentFuncContext.statementContainer}submitStatement(t){this.currentFuncContext.statementContainer.push(t)}submitFunction(t){this.functions.push(t)}raiseWarning(t,e){console.log("[Warning]: "+t)}toCompiledObject(){return{fileName:this.fileName,dataSize:this.memory.dataPtr,functions:this.functions,imports:this.imports,exports:[],data:this.memory.dataBuffer,globalStatements:this.currentFuncContext.statementContainer,source:this.source,sourceMap:this.sourceMap,requiredWASMFuncTypes:this.requiredWASMFuncTypes,scope:this.scopeManager.root}}allocTmpVar(t,r){const s=this.scopeManager.allocTmpVarName(),o=new e.Variable(s,s,r.location.fileName,t,e.AddressType.STACK,this.memory.allocStack(t.length),n.AccessControl.Public);return this.scopeManager.define(s,o,r),[s,o]}}exports.CompileContext=i;
},{"../common/error":"nOPH","../common/symbol":"HcQt","../type":"Rt13","./class/destructor":"ef0b","./memory":"KRc9","./scope":"y+tL"}],"uhSO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Headers=new Map([["arduino.h","\n#ifndef _ARDUINO_H\n#define _ARDUINO_H\n\n#define HIGH 1\n#define LOW  0\n\n#define INPUT 0\n#define OUTPUT 1\n#define INPUT_PULLUP 2\n\n#define PI 3.1415926535897932384626433832795\n#define HALF_PI 1.5707963267948966192313216916398\n#define TWO_PI 6.283185307179586476925286766559\n#define DEG_TO_RAD 0.017453292519943295769236907684886\n#define RAD_TO_DEG 57.295779513082320876798154814105\n#define EULER 2.718281828459045235360287471352\n\n#define SERIAL  0\n#define DISPLAY 1\n\n#define LSBFIRST 0\n#define MSBFIRST 1\n\n#define CHANGE 1\n#define FALLING 2\n#define RISING 3\n\nstatic const int A0 = 100;\nstatic const int A1 = 101;\nstatic const int A2 = 102;\nstatic const int A3 = 103;\nstatic const int A4 = 104;\nstatic const int A5 = 105;\n\n#endif\n\n__libcall void pinMode(int pin, int mode);\n__libcall void digitalWrite(int pin, int state);\n"],["assert.h","#ifndef _ASSERT_H\n#define _ASSERT_H\n\n#ifdef NDEBUG\n#define assert(EX)\n#else\n#define assert(EX) (void)((EX) || (__assert (#EX, __FILE__, __LINE__),0))\n#endif\n\nvoid __assert (const char *msg, const char *file, int line);\n\n#endif"],["ctype.h","#ifndef _CTYPE_H\n#define _CTYPE_H\n\n__libcall int isalnum(int);\n__libcall int isalpha(int);\n__libcall int isblank(int);\n__libcall int iscntrl(int);\n__libcall int isdigit(int);\n__libcall int isgraph(int);\n__libcall int islower(int);\n__libcall int isprint(int);\n__libcall int ispunct(int);\n__libcall int isspace(int);\n__libcall int isupper(int);\n__libcall int isxdigit(int);\n__libcall int tolower(int);\n__libcall int toupper(int);\n\n#undef"],["limit.h","#ifndef _LIMIT_H\n#define _LIMIT_H\n\n#define CHAR_BIT 8\n#define SCHAR_MIN -128\n#define SCHAR_MAX 127\n#define UCHAR_MAX 255\n#define CHAR_MIN 0\n#define CHAR_MAX 255\n#define MB_LEN_MAX 1\n#define SHRT_MIN  -32768\n#define SHRT_MAX  32767\n#define USHRT_MAX 65535\n#define INT_MIN  -2147483648\n#define INT_MAX  2147483647\n#define UINT_MAX 4294967296U\n#define LONG_MIN -2147483648\n#define LONG_MAX 2147483647\n#define ULONG_MAX 4294967296U\n#define LLONG_MIN -9223372036854775807LL\n#define LLONG_MAX 9223372036854775808LL\n#define ULLONG_MAX 18446744073709551616\n\n#endif"],["math.h","#ifndef _MATH_H\n#define _MATH_H\n\n__libcall double cos(double);\n__libcall double sin(double);\n__libcall double tan(double);\n__libcall double acos(double);\n__libcall double asin(double);\n__libcall double atan(double);\n__libcall double atan2(double, double);\n\n__libcall double cosh(double);\n__libcall double sinh(double);\n__libcall double tanh(double);\n__libcall double acosh(double);\n__libcall double asinh(double);\n__libcall double atanh(double);\n\n__libcall double cbrt(double);\n__libcall double ceil(double);\n__libcall double exp(double);\n__libcall double expm1(double);\n__libcall double fabs(double);\n__libcall double floor(double);\n__libcall double fmax(double, double);\n__libcall double fmin(double, double);\n//__libcall double fmod(double, double);\n__libcall double hypot(double, double);\n__libcall double log(double);\n__libcall double log10(double);\n__libcall double log1p(double);\n__libcall double log2(double);\n__libcall double logb(double);\n__libcall double pow(double, double);\n__libcall double round(double);\n__libcall double sinh(double);\n__libcall double sqrt(double);\n__libcall double trunc(double);\n\n#endif"],["stdarg.h","#ifndef _STDARG_H\n#define _STDARG_H\n\ntypedef void* va_list;\n#define va_start(ptr,arg) (ptr) = &(arg) + sizeof(arg) + 4\n#define va_arg(ptr,type) ((ptr) += sizeof(type), *((type *)(ptr - sizeof(type))))\n#define va_end(ptr) (ptr) = 0;\n\n#endif"],["stdio.h","#ifndef _STDIO_H\n#define _STDIO_H\n\n__libcall void dump_stack_info();\n\n\n__libcall int scanf(const char * format, ...);\n__libcall int printf(const char * format, ...);\n__libcall int getchar();\nint puts(const char * str);\n\n#endif"],["stdlib.h","#ifndef _STDLIB_H\n#define _STDLIB_H\n\n__libcall void *malloc(unsigned int num_bytes);\n__libcall void *memset(void * ptr, int ch, unsigned int num_bytes);\n__libcall void free(void * ptr);\n__libcall void srand( unsigned seed ):\n__libcall int rand():\n\n#endif"],["syscall.h","#ifndef _SYSCALL_H\n#define _SYSCALL_H\n\n__libcall int write(unsigned int fd, void * buffer, unsigned int size);\n__libcall int read(unsigned int fd, void * buffer, unsigned int size);\n__libcall void memcpy(void * dst, void * src, unsigned int size);\n__libcall void * malloc(unsigned int size);\n__libcall void free(void * ptr);\n__libcall void * malloc_array(unsigned int element_size, unsigned int length);\n__libcall void __print_stack();\n#endif"],["time.h","#ifndef _TIME_H\n#define _TIME_H\n\n__libcall int time(void * time_ptr);\n\n#endif"],["string.h","#ifndef _STRING_H\n#define _STRING_H\n\ntypedef unsigned int size_t;\n__libcall int    memcmp(const void *, const void *, size_t);\n__libcall void*  memcpy(void *, const void *, size_t);\n__libcall void*  memset(void *, int, size_t);\n__libcall void*  memmove(void *, const void *, size_t);\n\n__libcall char*  strcpy(char *, const char *);\n__libcall int    strcmp(const char *, const char *);\n__libcall char*  strcat(char *, const char *);\n__libcall size_t strlen(const char *);\n__libcall char*  strchr(const char *, int);\n__libcall char*  strncat(char *, const char *, size_t);\n__libcall int    strncmp(const char *, const char *, size_t);\n__libcall char*  strncpy(char *, const char *, size_t);\n\n/*\n__libcall void*  memccpy(void *, const void *, int, size_t);\n__libcall void*  memchr(const void *, int, size_t);\n__libcall int    strcoll(const char *, const char *);\n__libcall size_t strcspn(const char *, const char *);\n__libcall char*  strdup(const char *);\n__libcall char*  strerror(int);\n__libcall char*  strpbrk(const char *, const char *);\n__libcall char*  strrchr(const char *, int);\n__libcall size_t strspn(const char *, const char *);\n__libcall char*  strstr(const char *, const char *);\n__libcall char*  strtok(char *, const char *);\n__libcall char*  strtok_r(char *, const char *, char **);\n__libcall size_t strxfrm(char *, const char *, size_t);\n*/\n\n#endif"]]),exports.Impls=new Map([["assert.cpp",'#include <stdio.h>\n\nvoid __assert (const char *msg, const char *file, int line){\n    //printf("assert failed in %s#%d: %s", file, line, msg);\n    //exit(255);\n}']]);
},{}],"Ysx2":[function(require,module,exports) {
"use strict";function o(o){return function(t){return Math[o](t)}}function t(o){return function(t,s){return Math[o](t,s)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=o("abs"),exports.cos=o("cos"),exports.sin=o("sin"),exports.tan=o("tan"),exports.acos=o("acos"),exports.asin=o("asin"),exports.atan=o("atan"),exports.cosh=o("cosh"),exports.sinh=o("sinh"),exports.tanh=o("tanh"),exports.acosh=o("acosh"),exports.asinh=o("asinh"),exports.atanh=o("atanh"),exports.cbrt=o("cbrt"),exports.ceil=o("ceil"),exports.exp=o("exp"),exports.expm1=o("expm1"),exports.fabs=o("abs"),exports.floor=o("floor"),exports.log=o("log"),exports.log10=o("log10"),exports.log1p=o("log1p"),exports.log2=o("log2"),exports.logb=o("logb"),exports.round=o("round"),exports.sqrt=o("sqrt"),exports.trunc=o("trunc"),exports.atan2=t("atan2"),exports.pow=t("pow"),exports.fmax=t("max"),exports.fmin=t("min"),exports.hypot=t("pow");
},{}],"DfLT":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});const e=t(require("long")),i=new ArrayBuffer(1e3),r=new DataView(i);function o(){let t=this.sp,i=this.memory.getUint32(t,!0);t+=4;let o=this.memory.getUint8(i),s=0;for(;0!==o;){if(o==="%".charCodeAt(0)){i++;let o=String.fromCharCode(this.memory.getUint8(i)),n=0,h=0,m=!1;if("."===o||o.charCodeAt(0)>="0".charCodeAt(0)&&o.charCodeAt(0)<="9".charCodeAt(0))for(;"."===o||o.charCodeAt(0)>="0".charCodeAt(0)&&o.charCodeAt(0)<="9".charCodeAt(0);)"."===o?m=!0:m?h=10*h+ +o:n=10*n+ +o,i++,o=String.fromCharCode(this.memory.getUint8(i));let l=!1;if("l"===o&&(l=!0,i++,o=String.fromCharCode(this.memory.getUint8(i))),"%"===o)r.setUint8(s,"%".charCodeAt(0)),s++;else if("d"===o||"i"===o||"u"===o||"X"===o||"x"===o||"o"===o||"p"===o||"n"===o){let i;if("u"===o||"X"===o||"x"===o||"o"===o||"p"===o){let r=10;if("X"===o||"x"===o||"p"===o?r=16:"o"===o&&(r=8),l){const o=this.memory.getUint32(t,!0),s=this.memory.getUint32(t+4,!0);i=e.fromBits(o,s).toString(r),t+=8}else i=this.memory.getUint32(t,!0).toString(r),t+=4}else if(l){const r=this.memory.getUint32(t,!0),o=this.memory.getInt32(t+4,!0);i=e.fromBits(r,o).toString(),t+=8}else i=this.memory.getInt32(t,!0).toString(),t+=4;"n"===o&&(i="");for(let t=0;t<i.length;t++)r.setUint8(s,i.charCodeAt(t)),s++}else if("s"===o){let e=this.memory.getInt32(t,!0);t+=4;let i=this.memory.getUint8(e);for(;0!==i;)r.setUint8(s,i),s++,e++,i=this.memory.getUint8(e)}else if("f"===o){let e;if(e=this.memory.getFloat64(t,!0).toString(),t+=8,0!==h){const t=e.split(".");t.length>=2&&(t[1]=t[1].substr(0,h)),e=t.join(".")}for(let t=0;t<e.length;t++)r.setUint8(s,e.charCodeAt(t)),s++}else r.setUint8(s,"%".charCodeAt(0)),s++,r.setUint8(s,o.charCodeAt(0)),s++}else r.setUint8(s,o),s++;i++,o=this.memory.getUint8(i)}return s}function s(){const t=o.apply(this);return this.files[1].write(i.slice(0,t))}function n(){const t=this.memory.getUint32(this.sp,!0);this.sp+=4;const e=o.apply(this);this.sp-=4;for(let i=0;i<e;i++)this.memory.setUint8(t+i,r.getUint8(i));return e}exports.printf=s,exports.sprintf=n;const h=new ArrayBuffer(10),m=new DataView(h);function l(){return 0===this.files[0].read(h,0,1)?-1:m.getUint8(0)}exports.getchar=l;const a="0".charCodeAt(0),f="9".charCodeAt(0),y=" ".charCodeAt(0),c="\t".charCodeAt(0),g="\n".charCodeAt(0),p="-".charCodeAt(0),d=".".charCodeAt(0);function U(){let t=0,i=this.sp,r=this.memory.getUint32(i,!0);i+=4;let o=this.memory.getUint8(r);for(;0!==o;){if(o==="%".charCodeAt(0)){r++;let o=String.fromCharCode(this.memory.getUint8(r)),s=!1;if("l"===o&&(s=!0,r++,o=String.fromCharCode(this.memory.getUint8(r))),"d"===o||"i"===o||"u"===o){const r=o;let n=e.fromNumber(0),h=0,m=l.apply(this),y=0;for(;-1!==m&&!(m>=a&&m<=f);)y=m,m=l.apply(this);for(y===p&&(h=1);-1!==m&&m>=a&&m<=f;)n=n.mul(10).add(m-a),m=l.apply(this);const c=this.memory.getInt32(i,!0);i+=4,h&&(n=n.neg()),"u"===r?s?(this.memory.setUint32(c,n.low,!0),this.memory.setUint32(c+4,n.high,!0)):this.memory.setUint32(c,n.toNumber(),!0):s?(this.memory.setInt32(c,n.low,!0),this.memory.setUint32(c+4,n.high,!0)):this.memory.setInt32(c,n.toNumber(),!0),t++}else if("s"===o){let e=this.memory.getInt32(i,!0),r=l.apply(this);for(;-1!==r&&r!==g&&r!==y&&r!==c;)this.memory.setUint8(e++,r),r=l.apply(this);t++}else if("f"===o){let e=0,r=0,o=l.apply(this),n=0;for(;-1!==o&&!(o>=a&&o<=f||o===d);)n=o,o=l.apply(this);n===p&&(r=1);let h=0,m=.1;for(;-1!==o&&(o>=a&&o<=f||!h&&o===d);)o===d?h=1:h?(e+=(o-a)*m,m/=10):e=10*e+o-a,o=l.apply(this);const y=this.memory.getInt32(i,!0);i+=4,r&&(e=-e),s?this.memory.setFloat64(y,e,!0):this.memory.setFloat32(y,e,!0),t++}}r++,o=this.memory.getUint8(r)}return t}exports.scanf=U;
},{"long":"YvD4"}],"IiVC":[function(require,module,exports) {
"use strict";function t(t,e,r){const i=this.memoryUint8Array.slice(e,e+r);return this.memoryUint8Array.set(i,t),t}function e(t,e,r){return t}function r(t,e,r){const i=255&e;for(let n=0;n<r;n++)this.memory.setUint8(t+n,i);return t}function i(t){let e=this.memory.getUint8(t),r=0;for(;0!==e;)t++,r++,e=this.memory.getUint8(t);return r}function n(t,e){let r=t,i=e,n=this.memory.getUint8(i);for(;0!==n;)this.memory.setUint8(r,n),i++,r++,n=this.memory.getUint8(i);return t}function o(t,e){let r=this.memory.getUint8(e),i=this.memory.getUint8(t);for(;i===r&&0!==i;)e++,t++,r=this.memory.getUint8(e),i=this.memory.getUint8(t);return r>i?1:r===i?0:-1}function m(t,e){let r=t,i=this.memory.getUint8(r);for(;0!==i;)r++,i=this.memory.getUint8(r);for(i=this.memory.getUint8(e);0!==i;)this.memory.setUint8(r,i),r++,e++,i=this.memory.getUint8(e);return this.memory.setUint8(r,0),t}function s(t,e){let r=this.memory.getUint8(t);for(;0!==r;){if(r===e)return t;t++,r=this.memory.getUint8(t)}return 0}function y(t,e,r){let i=0;for(let n=0;n<r;n++){const r=this.memory.getUint8(e+n);0===r&&(i=1),i?this.memory.setUint8(t+n,0):this.memory.setUint8(t+n,r)}return t}function h(t,e,r){for(let i=0;i<r;i++){const t=this.memory.getUint8(e+i),r=this.memory.getUint8(e+i);if(t<r)return-1;if(r>t)return 1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.memcpy=t,exports.memmove=e,exports.memset=r,exports.strlen=i,exports.strcpy=n,exports.strcmp=o,exports.strcat=m,exports.strchr=s,exports.strncpy=y,exports.strncmp=h;
},{}],"HM34":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t="a".charCodeAt(0),r="A".charCodeAt(0),e="z".charCodeAt(0),n="Z".charCodeAt(0),o="0".charCodeAt(0),i="9".charCodeAt(0),s=" ".charCodeAt(0),c="\t".charCodeAt(0);function u(t){return-1===t?0:+(t>=o&&t<=i)}function l(r){return-1===r?0:+(r>=t&&r<=e)}function a(t){return-1===t?0:+(t>=r&&t<=n)}function p(t){return-1===t?0:+(t===s||t===c)}function h(t){return-1===t?0:+(t===s||t>=9&&t<=13)}function x(t){return-1===t?0:+(t<=32||127===t)}function f(t){return-1===t?0:+(t>=33||t<=126)}function d(t){return-1===t?0:+(t>=32||t<=126)}function A(t){return l.call(this,t)||a.call(this,t)}function C(t){return A.call(this,t)||u.call(this,t)}function g(t){return f.call(this,t)&&+!C.call(this,t)}function b(t){return-1===t?-1:u.call(this,t)||+(t>=65&&t<=70)||+(t>=91&&t<=96)}function w(t){return-1===t?-1:l.call(this,t)?t-32:t}function _(t){return-1===t?-1:a.call(this,t)?t+32:t}exports.isdigit=u,exports.islower=l,exports.isupper=a,exports.isblank=p,exports.isspace=h,exports.iscntrl=x,exports.isgraph=f,exports.isprint=d,exports.isalpha=A,exports.isalnum=C,exports.ispunct=g,exports.isxdigit=b,exports.toupper=w,exports.tolower=_;
},{}],"QMgZ":[function(require,module,exports) {
"use strict";function t(t){return this.heapAllocator.allocHeap(this,t)}function e(t){return this.heapAllocator.freeHeap(this,t)}function r(t,e){const r=this.heapAllocator.allocHeap(this,t*e+4);return this.memory.setInt32(r,e,!0),r+4}function o(t){}function a(){return parseInt(2147483647*Math.random()+"")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.malloc=t,exports.free=e,exports.malloc_array=r,exports.srand=o,exports.rand=a;
},{}],"B0dQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this._state=0,this._mode=!1,this._type=!1}get state(){return this._state}set state(t){this._state=t}get mode(){return this._mode}set mode(t){this._mode=t}}exports.default=t;
},{}],"iDAt":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const e=t(require("./pin"));class i{constructor(t){this.digitalPins=new Array(13),this.analogPins=new Array(6),this.id="",this.id=t;for(let i=0;i<=18;i++)this.digitalPins[i]=new e.default;for(let i=0;i<=6;i++)this.analogPins[i]=new e.default}}const s=new i("global_board");exports.default=s;
},{"./pin":"B0dQ"}],"MQJg":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("../arduino/arduinoBoard"));function i(e){console.log("[42mliveduino: "+e+"[0m")}function a(e,a){e>=100?e-100<=6?(t.default.analogPins[e-100].mode=a,i(`setting analog pin ${e-100}, new mode: ${t.default.analogPins[e-100].mode?"output":"input"}`)):i("This pin does not exist! Arduino UNO only has 6 analog pins!"):e<=13?(t.default.digitalPins[e].mode=a,i(`setting digital pin ${e}, new mode: ${t.default.digitalPins[e].mode?"output":"input"}`)):i("This pin does not exist! Arduino UNO only has 13 digital pins!")}function n(e,i){if(0==t.default.digitalPins[e].mode)return console.log(`digitalWrite - pin number: ${e}, Wrong pin mode detected! Current mode is: ${t.default.digitalPins[e].mode?"output":"input"}`),void(0==e?self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:"RX0",setVal:i,pinType:!1},id:1e3*Math.random()}):1==e?self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:"TX1",setVal:i,pinType:!1},id:1e3*Math.random()}):self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:e,setVal:i,pinType:!1},id:1e3*Math.random()}));e<=13?(t.default.digitalPins[e].state=i,console.log(`digitalWrite - pin number: ${e}, - new value is ${t.default.digitalPins[e].state}`),0==e?self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:"RX0",setVal:i,pinType:!1},id:1e3*Math.random()}):1==e?self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:"TX1",setVal:i,pinType:!1},id:1e3*Math.random()}):self.postMessage({err:0,type:"arduino.digitalSet",data:{setPin:e,setVal:i,pinType:!1},id:1e3*Math.random()})):(console.log(`digitalWrite - pin number: ${e}, This pin does not exist! Arduino Uno only has 13 digital pins!`),self.postMessage({err:1,type:"arduino.digitalSet",data:{setPin:e,setVal:i,pinType:!1},id:1e3*Math.random()}))}exports.pinMode=a,exports.digitalWrite=n;
},{"../arduino/arduinoBoard":"iDAt"}],"PyPK":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}function r(e,r,t){if(e>=this.files.length)return-1;return this.files[e].write(this.memory.buffer.slice(r,r+t))}function t(e,r,t){if(e>=this.files.length)return-1;return this.files[e].read(this.memory.buffer,r,t)}function i(){console.log("$sp = "+this.sp)}function s(e){return Math.round((new Date).getTime()/1e3)}function n(){this.printStack()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.write=r,exports.read=t,exports.dump_stack_info=i,exports.time=s,exports.__print_stack=n,e(require("./math")),e(require("./stdio")),e(require("./string")),e(require("./ctype")),e(require("./stdlib")),e(require("./arduino"));
},{"./math":"Ysx2","./stdio":"DfLT","./string":"IiVC","./ctype":"HM34","./stdlib":"QMgZ","./arduino":"MQJg"}],"bjS5":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r.default=e,r};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./library");exports.Headers=r.Headers,exports.Impls=r.Impls;const s=e(require("./syscall"));exports.JsAPIMap=Object.assign({},s);
},{"./library":"uhSO","./syscall":"PyPK"}],"EoHT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require(".."),o=require("../../common/node");function n(e){let o="";for(let n=0;n<e;n++)o+=" ";return o}function r(r,t){let c="",s=0,u="";for(const a of r.functions){const r=t.get(a.fileName);let f=a.sourceRange[0]-1;const p=e.WFunctionType.fromEncoding(a.type,o.EmptyLocation);c+=`func ${a.name} (param ${p.parameters.map(o=>e.WType[o])})`,c+=`(ret ${p.returnTypes.map(o=>e.WType[o])}) (\n`,c+=(u=n(s+=1))+`(locals ${a.locals.map(o=>e.WType[o])})\n`;for(const o of a.codes){if(a.fileName&&r)for(;f<=a.sourceRange[1]&&f<=o[2];)c+="# "+r.source[f++]+"\n";c+=u+`${e.OpCodes.get(o[0])} ${o[1]}\n`}if(a.fileName&&r)for(;f<=a.sourceRange[1];)c+="# "+r.source[f++]+"\n";c+=")\n",u=n(s-=1)}return c}exports.dumpWASMJSON=r;
},{"..":"Jo9c","../../common/node":"PoXi"}],"dGoJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../common/node"),o=require("../wasm"),n=require("../wasm/tool/dumper");function s(s,r,a){const p=[],i=[],m=[],c=[],u=[],f=new Map,l=new Map,y=new Set;for(const e of r)l.set(e.fileName,{source:e.source.split("\n"),sourceMap:e.sourceMap,lastLine:0}),Array.from(e.requiredWASMFuncTypes.keys()).map(e=>y.add(e));const w=[];let d=0;for(const e of r){for(const t of e.functions)t.dataStart=d,t.fileName=e.fileName,/^::main@.*/.test(t.name)&&w.push(t.name),m.push(t);c.push(new o.WDataSegment(d,e.data.slice(0,e.dataSize),t.EmptyLocation));const n=`$init$${e.fileName}`,s=new o.WFunction(n,n,[],[],[],e.globalStatements,t.EmptyLocation);s.dataStart=d,m.push(s),u.push(n),d+=e.dataSize}let W=d;for(const e of r){for(const t of e.functions)t.bssStart=W;W+=e.dataSize}const E=new o.WFunction("$start","__start",[],[],[],u.map(e=>new o.WCall(e,[],[],t.EmptyLocation)),t.EmptyLocation);m.push(E);for(const t of r)for(const o of t.exports){if(f.get(o.name))throw new e.LinkerError(`duplicated symbol of ${o.name}`);f.set(o.name,o.location)}for(const e of r)for(const n of e.imports)p.includes(n.name)||(p.push(n.name),i.push(new o.WImportFunction("system",n.name,n.type.returnTypes,n.type.parameters,t.EmptyLocation)));const L=r[r.length-1].scope;if(i.push(new o.WImportMemory("system","memory",1,10,t.EmptyLocation)),m.push(new o.WFunction("$get_sp","get_sp",[o.WType.u32],[],[],[new o.WReturn(new o.WGetGlobal(o.WType.u32,"$sp",t.EmptyLocation),t.EmptyLocation)],t.EmptyLocation)),m.push(new o.WFunction("$set_sp","set_sp",[],[o.WType.u32],[],[new o.WSetGlobal(o.WType.u32,"$sp",new o.WGetLocal(o.WType.u32,0,t.EmptyLocation),t.EmptyLocation)],t.EmptyLocation)),0===w.length)throw new e.LinkerError("no main function found");if(w.length>1)throw new e.LinkerError("multiple main function found");const h=new o.WModule({functions:m,imports:i,exports:["$start",w[0],"$get_sp","$set_sp"],globals:[new o.WGlobalVariable("$sp",o.u32,new o.WConst(o.u32,"1000",t.EmptyLocation),t.EmptyLocation)],data:c,generateMemory:!1,requiredFuncTypes:Array.from(y.keys())},t.EmptyLocation),S=new o.WASMEmitter(f,l);h.optimize(S),h.emit(S);const g=new o.JSONEmitter(f,l);h.optimize(g),h.emit(g);let $="";return a.debug&&($=n.dumpWASMJSON(g.getJSON(),l),console.log($)),{fileName:s,heapStart:4*(parseInt((W+1)/4)+1),entry:w[0],sourceMap:l,scope:L,binary:S.toArrayBuffer(),json:g.getJSON(),dumpInfo:$}}exports.link=s;
},{"../common/error":"nOPH","../common/node":"PoXi","../wasm":"Jo9c","../wasm/tool/dumper":"EoHT"}],"Btp4":[function(require,module,exports) {
"use strict";var r={range:function(r,n){var e,t,f=n-r,u=new Array(f);for(e=0,t=r;e<f;e++,t++)u[e]=t;return u},find:function(r,n){var e,t=r.length;if("function"==typeof n){for(e=0;e<t;e++)if(n(r[e]))return r[e]}else for(e=0;e<t;e++)if(r[e]===n)return r[e]},indexOf:function(r,n){var e,t=r.length;if("function"==typeof n){for(e=0;e<t;e++)if(n(r[e]))return e}else for(e=0;e<t;e++)if(r[e]===n)return e;return-1},contains:function(n,e){return-1!==r.indexOf(n,e)},each:function(r,n){var e,t=r.length;for(e=0;e<t;e++)n(r[e],e)},map:function(r,n){var e,t=r.length,f=new Array(t);for(e=0;e<t;e++)f[e]=n(r[e],e);return f},pluck:function(n,e){return r.map(n,function(r){return r[e]})},every:function(r,n){var e,t=r.length;for(e=0;e<t;e++)if(!n(r[e]))return!1;return!0},some:function(r,n){var e,t=r.length;for(e=0;e<t;e++)if(n(r[e]))return!0;return!1}};module.exports=r;
},{}],"Saqe":[function(require,module,exports) {
"use strict";var r={keys:function(r){var n,o=[];for(n in r)r.hasOwnProperty(n)&&o.push(n);return o},values:function(r){var n,o=[];for(n in r)r.hasOwnProperty(n)&&o.push(r[n]);return o},clone:function(r){var n,o={};for(n in r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o},defaults:function(r,n){var o;for(o in n)n.hasOwnProperty(o)&&(o in r||(r[o]=n[o]))}};module.exports=r;
},{}],"T5R9":[function(require,module,exports) {
"use strict";var t={subclass:function(t,o){function r(){this.constructor=t}r.prototype=o.prototype,t.prototype=new r}};module.exports=t;
},{}],"RCHO":[function(require,module,exports) {
"use strict";var r=require("./utils/classes");function s(r,t){this.name="GrammarError",this.message=r,this.location=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,s)}r.subclass(s,Error),module.exports=s;
},{"./utils/classes":"T5R9"}],"DLue":[function(require,module,exports) {
"use strict";function u(u,A){function r(){this.constructor=u}r.prototype=A.prototype,u.prototype=new r}function A(u,r,t,n){this.message=u,this.expected=r,this.found=t,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,A)}function r(u,r){r=void 0!==r?r:{};var t,n={},C={Grammar:Nt},E=Nt,e=function(u,A){return{type:"grammar",initializer:(r=u,t=0,r?r[t]:null),rules:Sn(A,0),location:Tt()};var r,t},F=function(u){return{type:"initializer",code:u,location:Tt()}},B="=",o=Zt("=",!1),D=function(u,A,r){return{type:"rule",name:u,expression:null!==A?{type:"named",name:A[0],expression:r,location:Tt()}:r,location:Tt()}},c="/",a=Zt("/",!1),i=function(u,A){return A.length>0?{type:"choice",alternatives:kn(u,A,3),location:Tt()}:u},f=function(u,A){return null!==A?{type:"action",expression:u,code:A[1],location:Tt()}:u},s=function(u,A){return A.length>0?{type:"sequence",elements:kn(u,A,1),location:Tt()}:u},v=":",h=Zt(":",!1),l=function(u,A){return{type:"labeled",label:u,expression:A,location:Tt()}},d=function(u,A){return{type:yn[u],expression:A,location:Tt()}},p="$",b=Zt("$",!1),g="&",x=Zt("&",!1),y="!",m=Zt("!",!1),w=function(u,A){return{type:mn[A],expression:u,location:Tt()}},_="?",S=Zt("?",!1),k="*",z=Zt("*",!1),R="+",j=Zt("+",!1),$="(",q=Zt("(",!1),I=")",M=Zt(")",!1),T=function(u){return"labeled"===u.type||"sequence"===u.type?{type:"group",expression:u}:u},Z=function(u){return{type:"rule_ref",name:u,location:Tt()}},G=function(u,A){return{type:wn[u],code:A,location:Tt()}},U={type:"any"},H=Ut("whitespace"),J="\t",K=Zt("\t",!1),L="\v",N=Zt("\v",!1),O="\f",P=Zt("\f",!1),Q=" ",V=Zt(" ",!1),W="",X=Zt("",!1),Y="\ufeff",uu=Zt("\ufeff",!1),Au=/^[\n\r\u2028\u2029]/,ru=Gt(["\n","\r","\u2028","\u2029"],!1,!1),tu=Ut("end of line"),nu="\n",Cu=Zt("\n",!1),Eu="\r\n",eu=Zt("\r\n",!1),Fu="\r",Bu=Zt("\r",!1),ou="\u2028",Du=Zt("\u2028",!1),cu="\u2029",au=Zt("\u2029",!1),iu=Ut("comment"),fu="/*",su=Zt("/*",!1),vu="*/",hu=Zt("*/",!1),lu="//",du=Zt("//",!1),pu=function(u){return u},bu=Ut("identifier"),gu=function(u,A){return u+A.join("")},xu="_",yu=Zt("_",!1),mu="\\",wu=Zt("\\",!1),_u=function(u){return u},Su="",ku=Zt("",!1),zu="",Ru=Zt("",!1),ju=Ut("literal"),$u="i",qu=Zt("i",!1),Iu=function(u,A){return{type:"literal",value:u,ignoreCase:null!==A,location:Tt()}},Mu=Ut("string"),Tu='"',Zu=Zt('"',!1),Gu=function(u){return u.join("")},Uu="'",Hu=Zt("'",!1),Ju=function(){return Mt()},Ku=Ut("character class"),Lu="[",Nu=Zt("[",!1),Ou="^",Pu=Zt("^",!1),Qu="]",Vu=Zt("]",!1),Wu=function(u,A,r){return{type:"class",parts:_n(A),inverted:null!==u,ignoreCase:null!==r,location:Tt()}},Xu="-",Yu=Zt("-",!1),uA=function(u,r){return u.charCodeAt(0)>r.charCodeAt(0)&&function(u,r){throw r=void 0!==r?r:Jt(Rt,zt),function(u,r){return new A(u,null,null,r)}(u,r)}("Invalid character range: "+Mt()+"."),[u,r]},AA=function(){return""},rA="0",tA=Zt("0",!1),nA=function(){return"\0"},CA="b",EA=Zt("b",!1),eA=function(){return"\b"},FA="f",BA=Zt("f",!1),oA=function(){return"\f"},DA="n",cA=Zt("n",!1),aA=function(){return"\n"},iA="r",fA=Zt("r",!1),sA=function(){return"\r"},vA="t",hA=Zt("t",!1),lA=function(){return"\t"},dA="v",pA=Zt("v",!1),bA=function(){return"\v"},gA="x",xA=Zt("x",!1),yA="u",mA=Zt("u",!1),wA=function(u){return String.fromCharCode(parseInt(u,16))},_A=/^[0-9]/,SA=Gt([["0","9"]],!1,!1),kA=/^[0-9a-f]/i,zA=Gt([["0","9"],["a","f"]],!1,!0),RA=".",jA=Zt(".",!1),$A=function(){return{type:"any",location:Tt()}},qA=Ut("code block"),IA="{",MA=Zt("{",!1),TA="}",ZA=Zt("}",!1),GA=function(u){return u},UA=/^[{}]/,HA=Gt(["{","}"],!1,!1),JA=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,KA=Gt([["a","z"],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","",["",""],"","","","","",["",""],"","","","",["",""],["",""],"","","","","","","","","","",["",""],"","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"","","","","",["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],"","","","","","","","","","","",["",""],"","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","","","",["",""],["",""],"","",["",""],"",["",""],"","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","",["",""],"","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),LA=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,NA=Gt([["",""],["",""],["",""],"","","","","","",["",""],["",""],"","","","","","","","","","","",["",""],["",""],"",["",""],"","",["",""],["",""],"","","",["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],"","",["",""],"","","","",["",""],["",""],"",["",""]],!1,!1),OA=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,PA=Gt(["","","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),QA=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,VA=Gt(["","","","",["",""],["",""],["",""],"","",""],!1,!1),WA=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,XA=Gt([["A","Z"],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""],"","","","","","","","","",["",""],"",["",""],["",""],["",""],"",["",""],"","","","","","","","","","","","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],"","",["",""],"",["",""],"","","",["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""]],!1,!1),YA=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,ur=Gt(["","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],"","","",["",""],["",""],"","",["",""],"","",["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],"",["",""],["",""],["",""],""],!1,!1),Ar=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,rr=Gt([["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],"","",["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","",["",""],"","",["",""],"","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],"",["",""],"",["",""],"",["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","","","",["",""],["",""],["",""],"",["",""],"","","","","",["",""],["",""]],!1,!1),tr=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,nr=Gt([["0","9"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Cr=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,Er=Gt([["",""],["",""],["",""],"",["",""],["",""],["",""]],!1,!1),er=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Fr=Gt(["_",["",""],"",["",""],["",""],""],!1,!1),Br=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,or=Gt([" ","","",["",""],"","",""],!1,!1),Dr="break",cr=Zt("break",!1),ar="case",ir=Zt("case",!1),fr="catch",sr=Zt("catch",!1),vr="class",hr=Zt("class",!1),lr="const",dr=Zt("const",!1),pr="continue",br=Zt("continue",!1),gr="debugger",xr=Zt("debugger",!1),yr="default",mr=Zt("default",!1),wr="delete",_r=Zt("delete",!1),Sr="do",kr=Zt("do",!1),zr="else",Rr=Zt("else",!1),jr="enum",$r=Zt("enum",!1),qr="export",Ir=Zt("export",!1),Mr="extends",Tr=Zt("extends",!1),Zr="false",Gr=Zt("false",!1),Ur="finally",Hr=Zt("finally",!1),Jr="for",Kr=Zt("for",!1),Lr="function",Nr=Zt("function",!1),Or="if",Pr=Zt("if",!1),Qr="import",Vr=Zt("import",!1),Wr="instanceof",Xr=Zt("instanceof",!1),Yr="in",ut=Zt("in",!1),At="new",rt=Zt("new",!1),tt="null",nt=Zt("null",!1),Ct="return",Et=Zt("return",!1),et="super",Ft=Zt("super",!1),Bt="switch",ot=Zt("switch",!1),Dt="this",ct=Zt("this",!1),at="throw",it=Zt("throw",!1),ft="true",st=Zt("true",!1),vt="try",ht=Zt("try",!1),lt="typeof",dt=Zt("typeof",!1),pt="var",bt=Zt("var",!1),gt="void",xt=Zt("void",!1),yt="while",mt=Zt("while",!1),wt="with",_t=Zt("with",!1),St=";",kt=Zt(";",!1),zt=0,Rt=0,jt=[{line:1,column:1}],$t=0,qt=[],It=0;if("startRule"in r){if(!(r.startRule in C))throw new Error("Can't start parsing from rule \""+r.startRule+'".');E=C[r.startRule]}function Mt(){return u.substring(Rt,zt)}function Tt(){return Jt(Rt,zt)}function Zt(u,A){return{type:"literal",text:u,ignoreCase:A}}function Gt(u,A,r){return{type:"class",parts:u,inverted:A,ignoreCase:r}}function Ut(u){return{type:"other",description:u}}function Ht(A){var r,t=jt[A];if(t)return t;for(r=A-1;!jt[r];)r--;for(t={line:(t=jt[r]).line,column:t.column};r<A;)10===u.charCodeAt(r)?(t.line++,t.column=1):t.column++,r++;return jt[A]=t,t}function Jt(u,A){var r=Ht(u),t=Ht(A);return{start:{offset:u,line:r.line,column:r.column},end:{offset:A,line:t.line,column:t.column}}}function Kt(u){zt<$t||(zt>$t&&($t=zt,qt=[]),qt.push(u))}function Lt(u,r,t){return new A(A.buildMessage(u,r),u,r,t)}function Nt(){var u,A,r,t,C,E;if(u=zt,gn()!==n)if(A=zt,(r=function(){var u,A;u=zt,(A=bn())!==n&&xn()!==n?(Rt=u,A=F(A),u=A):(zt=u,u=n);return u}())!==n&&(t=gn())!==n?A=r=[r,t]:(zt=A,A=n),A===n&&(A=null),A!==n){if(r=[],t=zt,(C=Ot())!==n&&(E=gn())!==n?t=C=[C,E]:(zt=t,t=n),t!==n)for(;t!==n;)r.push(t),t=zt,(C=Ot())!==n&&(E=gn())!==n?t=C=[C,E]:(zt=t,t=n);else r=n;r!==n?(Rt=u,u=e(A,r)):(zt=u,u=n)}else zt=u,u=n;else zt=u,u=n;return u}function Ot(){var A,r,t,C,E,e;return A=zt,(r=en())!==n&&gn()!==n?(t=zt,(C=on())!==n&&(E=gn())!==n?t=C=[C,E]:(zt=t,t=n),t===n&&(t=null),t!==n?(61===u.charCodeAt(zt)?(C=B,zt++):(C=n,0===It&&Kt(o)),C!==n&&(E=gn())!==n&&(e=Pt())!==n&&xn()!==n?(Rt=A,A=r=D(r,t,e)):(zt=A,A=n)):(zt=A,A=n)):(zt=A,A=n),A}function Pt(){var A,r,t,C,E,e,F,B;if(A=zt,(r=Qt())!==n){for(t=[],C=zt,(E=gn())!==n?(47===u.charCodeAt(zt)?(e=c,zt++):(e=n,0===It&&Kt(a)),e!==n&&(F=gn())!==n&&(B=Qt())!==n?C=E=[E,e,F,B]:(zt=C,C=n)):(zt=C,C=n);C!==n;)t.push(C),C=zt,(E=gn())!==n?(47===u.charCodeAt(zt)?(e=c,zt++):(e=n,0===It&&Kt(a)),e!==n&&(F=gn())!==n&&(B=Qt())!==n?C=E=[E,e,F,B]:(zt=C,C=n)):(zt=C,C=n);t!==n?(Rt=A,A=r=i(r,t)):(zt=A,A=n)}else zt=A,A=n;return A}function Qt(){var u,A,r,t,C;return u=zt,(A=function(){var u,A,r,t,C,E;if(u=zt,(A=Vt())!==n){for(r=[],t=zt,(C=gn())!==n&&(E=Vt())!==n?t=C=[C,E]:(zt=t,t=n);t!==n;)r.push(t),t=zt,(C=gn())!==n&&(E=Vt())!==n?t=C=[C,E]:(zt=t,t=n);r!==n?(Rt=u,A=s(A,r),u=A):(zt=u,u=n)}else zt=u,u=n;return u}())!==n?(r=zt,(t=gn())!==n&&(C=bn())!==n?r=t=[t,C]:(zt=r,r=n),r===n&&(r=null),r!==n?(Rt=u,u=A=f(A,r)):(zt=u,u=n)):(zt=u,u=n),u}function Vt(){var A,r,t,C;return A=zt,(r=function(){var A,r,t;A=zt,r=zt,It++,t=function(){var A;return(A=function(){var A;return(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===Dr?(r=Dr,zt+=5):(r=n,0===It&&Kt(cr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===ar?(r=ar,zt+=4):(r=n,0===It&&Kt(ir)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===fr?(r=fr,zt+=5):(r=n,0===It&&Kt(sr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,8)===pr?(r=pr,zt+=8):(r=n,0===It&&Kt(br)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,8)===gr?(r=gr,zt+=8):(r=n,0===It&&Kt(xr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,7)===yr?(r=yr,zt+=7):(r=n,0===It&&Kt(mr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===wr?(r=wr,zt+=6):(r=n,0===It&&Kt(_r)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,2)===Sr?(r=Sr,zt+=2):(r=n,0===It&&Kt(kr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===zr?(r=zr,zt+=4):(r=n,0===It&&Kt(Rr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,7)===Ur?(r=Ur,zt+=7):(r=n,0===It&&Kt(Hr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,3)===Jr?(r=Jr,zt+=3):(r=n,0===It&&Kt(Kr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,8)===Lr?(r=Lr,zt+=8):(r=n,0===It&&Kt(Nr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,2)===Or?(r=Or,zt+=2):(r=n,0===It&&Kt(Pr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,10)===Wr?(r=Wr,zt+=10):(r=n,0===It&&Kt(Xr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,2)===Yr?(r=Yr,zt+=2):(r=n,0===It&&Kt(ut)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,3)===At?(r=At,zt+=3):(r=n,0===It&&Kt(rt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===Ct?(r=Ct,zt+=6):(r=n,0===It&&Kt(Et)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===Bt?(r=Bt,zt+=6):(r=n,0===It&&Kt(ot)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===Dt?(r=Dt,zt+=4):(r=n,0===It&&Kt(ct)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===at?(r=at,zt+=5):(r=n,0===It&&Kt(it)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,3)===vt?(r=vt,zt+=3):(r=n,0===It&&Kt(ht)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===lt?(r=lt,zt+=6):(r=n,0===It&&Kt(dt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,3)===pt?(r=pt,zt+=3):(r=n,0===It&&Kt(bt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===gt?(r=gt,zt+=4):(r=n,0===It&&Kt(xt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===yt?(r=yt,zt+=5):(r=n,0===It&&Kt(mt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===wt?(r=wt,zt+=4):(r=n,0===It&&Kt(_t)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}()),A}())===n&&(A=function(){var A;return(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===vr?(r=vr,zt+=5):(r=n,0===It&&Kt(hr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===lr?(r=lr,zt+=5):(r=n,0===It&&Kt(dr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===jr?(r=jr,zt+=4):(r=n,0===It&&Kt($r)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===qr?(r=qr,zt+=6):(r=n,0===It&&Kt(Ir)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,7)===Mr?(r=Mr,zt+=7):(r=n,0===It&&Kt(Tr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,6)===Qr?(r=Qr,zt+=6):(r=n,0===It&&Kt(Vr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===et?(r=et,zt+=5):(r=n,0===It&&Kt(Ft)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}()),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===tt?(r=tt,zt+=4):(r=n,0===It&&Kt(nt)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A;return(A=function(){var A,r,t,C;return A=zt,u.substr(zt,4)===ft?(r=ft,zt+=4):(r=n,0===It&&Kt(st)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}())===n&&(A=function(){var A,r,t,C;return A=zt,u.substr(zt,5)===Zr?(r=Zr,zt+=5):(r=n,0===It&&Kt(Gr)),r!==n?(t=zt,It++,C=Bn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A}()),A}()),A}(),It--,t===n?r=void 0:(zt=r,r=n);r!==n&&(t=en())!==n?(Rt=A,r=pu(t),A=r):(zt=A,A=n);return A}())!==n&&gn()!==n?(58===u.charCodeAt(zt)?(t=v,zt++):(t=n,0===It&&Kt(h)),t!==n&&gn()!==n&&(C=Wt())!==n?(Rt=A,A=r=l(r,C)):(zt=A,A=n)):(zt=A,A=n),A===n&&(A=Wt()),A}function Wt(){var A,r,t;return A=zt,(r=function(){var A;36===u.charCodeAt(zt)?(A=p,zt++):(A=n,0===It&&Kt(b));A===n&&(38===u.charCodeAt(zt)?(A=g,zt++):(A=n,0===It&&Kt(x)),A===n&&(33===u.charCodeAt(zt)?(A=y,zt++):(A=n,0===It&&Kt(m))));return A}())!==n&&gn()!==n&&(t=Xt())!==n?(Rt=A,A=r=d(r,t)):(zt=A,A=n),A===n&&(A=Xt()),A}function Xt(){var A,r,t;return A=zt,(r=Yt())!==n&&gn()!==n&&(t=function(){var A;63===u.charCodeAt(zt)?(A=_,zt++):(A=n,0===It&&Kt(S));A===n&&(42===u.charCodeAt(zt)?(A=k,zt++):(A=n,0===It&&Kt(z)),A===n&&(43===u.charCodeAt(zt)?(A=R,zt++):(A=n,0===It&&Kt(j))));return A}())!==n?(Rt=A,A=r=w(r,t)):(zt=A,A=n),A===n&&(A=Yt()),A}function Yt(){var A,r,t,C;return(A=function(){var A,r,t;It++,A=zt,(r=on())!==n?(105===u.charCodeAt(zt)?(t=$u,zt++):(t=n,0===It&&Kt(qu)),t===n&&(t=null),t!==n?(Rt=A,r=Iu(r,t),A=r):(zt=A,A=n)):(zt=A,A=n);It--,A===n&&(r=n,0===It&&Kt(ju));return A}())===n&&(A=function(){var A,r,t,C,E,e;It++,A=zt,91===u.charCodeAt(zt)?(r=Lu,zt++):(r=n,0===It&&Kt(Nu));if(r!==n)if(94===u.charCodeAt(zt)?(t=Ou,zt++):(t=n,0===It&&Kt(Pu)),t===n&&(t=null),t!==n){for(C=[],(E=an())===n&&(E=fn());E!==n;)C.push(E),(E=an())===n&&(E=fn());C!==n?(93===u.charCodeAt(zt)?(E=Qu,zt++):(E=n,0===It&&Kt(Vu)),E!==n?(105===u.charCodeAt(zt)?(e=$u,zt++):(e=n,0===It&&Kt(qu)),e===n&&(e=null),e!==n?(Rt=A,r=Wu(t,C,e),A=r):(zt=A,A=n)):(zt=A,A=n)):(zt=A,A=n)}else zt=A,A=n;else zt=A,A=n;It--,A===n&&(r=n,0===It&&Kt(Ku));return A}())===n&&(A=function(){var A,r;A=zt,46===u.charCodeAt(zt)?(r=RA,zt++):(r=n,0===It&&Kt(jA));r!==n&&(Rt=A,r=$A());return A=r}())===n&&(A=function(){var A,r,t,C,E,e,F,D;A=zt,(r=en())!==n?(t=zt,It++,C=zt,(E=gn())!==n?(e=zt,(F=on())!==n&&(D=gn())!==n?e=F=[F,D]:(zt=e,e=n),e===n&&(e=null),e!==n?(61===u.charCodeAt(zt)?(F=B,zt++):(F=n,0===It&&Kt(o)),F!==n?C=E=[E,e,F]:(zt=C,C=n)):(zt=C,C=n)):(zt=C,C=n),It--,C===n?t=void 0:(zt=t,t=n),t!==n?(Rt=A,r=Z(r),A=r):(zt=A,A=n)):(zt=A,A=n);return A}())===n&&(A=function(){var A,r,t;A=zt,(r=function(){var A;return 38===u.charCodeAt(zt)?(A=g,zt++):(A=n,0===It&&Kt(x)),A===n&&(33===u.charCodeAt(zt)?(A=y,zt++):(A=n,0===It&&Kt(m))),A}())!==n&&gn()!==n&&(t=bn())!==n?(Rt=A,r=G(r,t),A=r):(zt=A,A=n);return A}())===n&&(A=zt,40===u.charCodeAt(zt)?(r=$,zt++):(r=n,0===It&&Kt(q)),r!==n&&gn()!==n&&(t=Pt())!==n&&gn()!==n?(41===u.charCodeAt(zt)?(C=I,zt++):(C=n,0===It&&Kt(M)),C!==n?(Rt=A,A=r=T(t)):(zt=A,A=n)):(zt=A,A=n)),A}function un(){var A;return u.length>zt?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(U)),A}function An(){var A;return It++,9===u.charCodeAt(zt)?(A=J,zt++):(A=n,0===It&&Kt(K)),A===n&&(11===u.charCodeAt(zt)?(A=L,zt++):(A=n,0===It&&Kt(N)),A===n&&(12===u.charCodeAt(zt)?(A=O,zt++):(A=n,0===It&&Kt(P)),A===n&&(32===u.charCodeAt(zt)?(A=Q,zt++):(A=n,0===It&&Kt(V)),A===n&&(160===u.charCodeAt(zt)?(A=W,zt++):(A=n,0===It&&Kt(X)),A===n&&(65279===u.charCodeAt(zt)?(A=Y,zt++):(A=n,0===It&&Kt(uu)),A===n&&(A=function(){var A;Br.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(or));return A}())))))),It--,A===n&&(n,0===It&&Kt(H)),A}function rn(){var A;return Au.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(ru)),A}function tn(){var A;return It++,10===u.charCodeAt(zt)?(A=nu,zt++):(A=n,0===It&&Kt(Cu)),A===n&&(u.substr(zt,2)===Eu?(A=Eu,zt+=2):(A=n,0===It&&Kt(eu)),A===n&&(13===u.charCodeAt(zt)?(A=Fu,zt++):(A=n,0===It&&Kt(Bu)),A===n&&(8232===u.charCodeAt(zt)?(A=ou,zt++):(A=n,0===It&&Kt(Du)),A===n&&(8233===u.charCodeAt(zt)?(A=cu,zt++):(A=n,0===It&&Kt(au)))))),It--,A===n&&(n,0===It&&Kt(tu)),A}function nn(){var A;return It++,(A=function(){var A,r,t,C,E,e;A=zt,u.substr(zt,2)===fu?(r=fu,zt+=2):(r=n,0===It&&Kt(su));if(r!==n){for(t=[],C=zt,E=zt,It++,u.substr(zt,2)===vu?(e=vu,zt+=2):(e=n,0===It&&Kt(hu)),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);C!==n;)t.push(C),C=zt,E=zt,It++,u.substr(zt,2)===vu?(e=vu,zt+=2):(e=n,0===It&&Kt(hu)),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);t!==n?(u.substr(zt,2)===vu?(C=vu,zt+=2):(C=n,0===It&&Kt(hu)),C!==n?A=r=[r,t,C]:(zt=A,A=n)):(zt=A,A=n)}else zt=A,A=n;return A}())===n&&(A=En()),It--,A===n&&(n,0===It&&Kt(iu)),A}function Cn(){var A,r,t,C,E,e;if(A=zt,u.substr(zt,2)===fu?(r=fu,zt+=2):(r=n,0===It&&Kt(su)),r!==n){for(t=[],C=zt,E=zt,It++,u.substr(zt,2)===vu?(e=vu,zt+=2):(e=n,0===It&&Kt(hu)),e===n&&(e=rn()),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);C!==n;)t.push(C),C=zt,E=zt,It++,u.substr(zt,2)===vu?(e=vu,zt+=2):(e=n,0===It&&Kt(hu)),e===n&&(e=rn()),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);t!==n?(u.substr(zt,2)===vu?(C=vu,zt+=2):(C=n,0===It&&Kt(hu)),C!==n?A=r=[r,t,C]:(zt=A,A=n)):(zt=A,A=n)}else zt=A,A=n;return A}function En(){var A,r,t,C,E,e;if(A=zt,u.substr(zt,2)===lu?(r=lu,zt+=2):(r=n,0===It&&Kt(du)),r!==n){for(t=[],C=zt,E=zt,It++,e=rn(),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);C!==n;)t.push(C),C=zt,E=zt,It++,e=rn(),It--,e===n?E=void 0:(zt=E,E=n),E!==n&&(e=un())!==n?C=E=[E,e]:(zt=C,C=n);t!==n?A=r=[r,t]:(zt=A,A=n)}else zt=A,A=n;return A}function en(){var u,A,r,t;if(It++,u=zt,(A=Fn())!==n){for(r=[],t=Bn();t!==n;)r.push(t),t=Bn();r!==n?(Rt=u,u=A=gu(A,r)):(zt=u,u=n)}else zt=u,u=n;return It--,u===n&&(A=n,0===It&&Kt(bu)),u}function Fn(){var A,r,t;return(A=function(){var A;(A=function(){var A;return WA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(XA)),A}())===n&&(A=function(){var A;JA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(KA));return A}())===n&&(A=function(){var A;QA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(VA));return A}())===n&&(A=function(){var A;LA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(NA));return A}())===n&&(A=function(){var A;OA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(PA));return A}())===n&&(A=function(){var A;Cr.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(Er));return A}());return A}())===n&&(36===u.charCodeAt(zt)?(A=p,zt++):(A=n,0===It&&Kt(b)),A===n&&(95===u.charCodeAt(zt)?(A=xu,zt++):(A=n,0===It&&Kt(yu)),A===n&&(A=zt,92===u.charCodeAt(zt)?(r=mu,zt++):(r=n,0===It&&Kt(wu)),r!==n&&(t=ln())!==n?(Rt=A,A=r=_u(t)):(zt=A,A=n)))),A}function Bn(){var A;return(A=Fn())===n&&(A=function(){var A;(A=function(){var A;return Ar.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(rr)),A}())===n&&(A=function(){var A;YA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(ur));return A}());return A}())===n&&(A=function(){var A;tr.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(nr));return A}())===n&&(A=function(){var A;er.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(Fr));return A}())===n&&(8204===u.charCodeAt(zt)?(A=Su,zt++):(A=n,0===It&&Kt(ku)),A===n&&(8205===u.charCodeAt(zt)?(A=zu,zt++):(A=n,0===It&&Kt(Ru)))),A}function on(){var A,r,t,C;if(It++,A=zt,34===u.charCodeAt(zt)?(r=Tu,zt++):(r=n,0===It&&Kt(Zu)),r!==n){for(t=[],C=Dn();C!==n;)t.push(C),C=Dn();t!==n?(34===u.charCodeAt(zt)?(C=Tu,zt++):(C=n,0===It&&Kt(Zu)),C!==n?(Rt=A,A=r=Gu(t)):(zt=A,A=n)):(zt=A,A=n)}else zt=A,A=n;if(A===n)if(A=zt,39===u.charCodeAt(zt)?(r=Uu,zt++):(r=n,0===It&&Kt(Hu)),r!==n){for(t=[],C=cn();C!==n;)t.push(C),C=cn();t!==n?(39===u.charCodeAt(zt)?(C=Uu,zt++):(C=n,0===It&&Kt(Hu)),C!==n?(Rt=A,A=r=Gu(t)):(zt=A,A=n)):(zt=A,A=n)}else zt=A,A=n;return It--,A===n&&(r=n,0===It&&Kt(Mu)),A}function Dn(){var A,r,t;return A=zt,r=zt,It++,34===u.charCodeAt(zt)?(t=Tu,zt++):(t=n,0===It&&Kt(Zu)),t===n&&(92===u.charCodeAt(zt)?(t=mu,zt++):(t=n,0===It&&Kt(wu)),t===n&&(t=rn())),It--,t===n?r=void 0:(zt=r,r=n),r!==n&&(t=un())!==n?(Rt=A,A=r=Ju()):(zt=A,A=n),A===n&&(A=zt,92===u.charCodeAt(zt)?(r=mu,zt++):(r=n,0===It&&Kt(wu)),r!==n&&(t=vn())!==n?(Rt=A,A=r=_u(t)):(zt=A,A=n),A===n&&(A=sn())),A}function cn(){var A,r,t;return A=zt,r=zt,It++,39===u.charCodeAt(zt)?(t=Uu,zt++):(t=n,0===It&&Kt(Hu)),t===n&&(92===u.charCodeAt(zt)?(t=mu,zt++):(t=n,0===It&&Kt(wu)),t===n&&(t=rn())),It--,t===n?r=void 0:(zt=r,r=n),r!==n&&(t=un())!==n?(Rt=A,A=r=Ju()):(zt=A,A=n),A===n&&(A=zt,92===u.charCodeAt(zt)?(r=mu,zt++):(r=n,0===It&&Kt(wu)),r!==n&&(t=vn())!==n?(Rt=A,A=r=_u(t)):(zt=A,A=n),A===n&&(A=sn())),A}function an(){var A,r,t,C;return A=zt,(r=fn())!==n?(45===u.charCodeAt(zt)?(t=Xu,zt++):(t=n,0===It&&Kt(Yu)),t!==n&&(C=fn())!==n?(Rt=A,A=r=uA(r,C)):(zt=A,A=n)):(zt=A,A=n),A}function fn(){var A,r,t;return A=zt,r=zt,It++,93===u.charCodeAt(zt)?(t=Qu,zt++):(t=n,0===It&&Kt(Vu)),t===n&&(92===u.charCodeAt(zt)?(t=mu,zt++):(t=n,0===It&&Kt(wu)),t===n&&(t=rn())),It--,t===n?r=void 0:(zt=r,r=n),r!==n&&(t=un())!==n?(Rt=A,A=r=Ju()):(zt=A,A=n),A===n&&(A=zt,92===u.charCodeAt(zt)?(r=mu,zt++):(r=n,0===It&&Kt(wu)),r!==n&&(t=vn())!==n?(Rt=A,A=r=_u(t)):(zt=A,A=n),A===n&&(A=sn())),A}function sn(){var A,r;return A=zt,92===u.charCodeAt(zt)?(r=mu,zt++):(r=n,0===It&&Kt(wu)),r!==n&&tn()!==n?(Rt=A,A=r=AA()):(zt=A,A=n),A}function vn(){var A,r,t,C;return(A=function(){var A;(A=hn())===n&&(A=function(){var A,r,t;A=zt,r=zt,It++,(t=function(){var A;return(A=hn())===n&&(A=dn())===n&&(120===u.charCodeAt(zt)?(A=gA,zt++):(A=n,0===It&&Kt(xA)),A===n&&(117===u.charCodeAt(zt)?(A=yA,zt++):(A=n,0===It&&Kt(mA)))),A}())===n&&(t=rn());It--,t===n?r=void 0:(zt=r,r=n);r!==n&&(t=un())!==n?(Rt=A,r=Ju(),A=r):(zt=A,A=n);return A}());return A}())===n&&(A=zt,48===u.charCodeAt(zt)?(r=rA,zt++):(r=n,0===It&&Kt(tA)),r!==n?(t=zt,It++,C=dn(),It--,C===n?t=void 0:(zt=t,t=n),t!==n?(Rt=A,A=r=nA()):(zt=A,A=n)):(zt=A,A=n),A===n&&(A=function(){var A,r,t,C,E,e;A=zt,120===u.charCodeAt(zt)?(r=gA,zt++):(r=n,0===It&&Kt(xA));r!==n?(t=zt,C=zt,(E=pn())!==n&&(e=pn())!==n?C=E=[E,e]:(zt=C,C=n),(t=C!==n?u.substring(t,zt):C)!==n?(Rt=A,r=wA(t),A=r):(zt=A,A=n)):(zt=A,A=n);return A}())===n&&(A=ln())),A}function hn(){var A,r;return 39===u.charCodeAt(zt)?(A=Uu,zt++):(A=n,0===It&&Kt(Hu)),A===n&&(34===u.charCodeAt(zt)?(A=Tu,zt++):(A=n,0===It&&Kt(Zu)),A===n&&(92===u.charCodeAt(zt)?(A=mu,zt++):(A=n,0===It&&Kt(wu)),A===n&&(A=zt,98===u.charCodeAt(zt)?(r=CA,zt++):(r=n,0===It&&Kt(EA)),r!==n&&(Rt=A,r=eA()),(A=r)===n&&(A=zt,102===u.charCodeAt(zt)?(r=FA,zt++):(r=n,0===It&&Kt(BA)),r!==n&&(Rt=A,r=oA()),(A=r)===n&&(A=zt,110===u.charCodeAt(zt)?(r=DA,zt++):(r=n,0===It&&Kt(cA)),r!==n&&(Rt=A,r=aA()),(A=r)===n&&(A=zt,114===u.charCodeAt(zt)?(r=iA,zt++):(r=n,0===It&&Kt(fA)),r!==n&&(Rt=A,r=sA()),(A=r)===n&&(A=zt,116===u.charCodeAt(zt)?(r=vA,zt++):(r=n,0===It&&Kt(hA)),r!==n&&(Rt=A,r=lA()),(A=r)===n&&(A=zt,118===u.charCodeAt(zt)?(r=dA,zt++):(r=n,0===It&&Kt(pA)),r!==n&&(Rt=A,r=bA()),A=r)))))))),A}function ln(){var A,r,t,C,E,e,F,B;return A=zt,117===u.charCodeAt(zt)?(r=yA,zt++):(r=n,0===It&&Kt(mA)),r!==n?(t=zt,C=zt,(E=pn())!==n&&(e=pn())!==n&&(F=pn())!==n&&(B=pn())!==n?C=E=[E,e,F,B]:(zt=C,C=n),(t=C!==n?u.substring(t,zt):C)!==n?(Rt=A,A=r=wA(t)):(zt=A,A=n)):(zt=A,A=n),A}function dn(){var A;return _A.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(SA)),A}function pn(){var A;return kA.test(u.charAt(zt))?(A=u.charAt(zt),zt++):(A=n,0===It&&Kt(zA)),A}function bn(){var A,r,t,C;return It++,A=zt,123===u.charCodeAt(zt)?(r=IA,zt++):(r=n,0===It&&Kt(MA)),r!==n&&(t=function A(){var r,t,C,E,e,F;r=zt;t=[];C=[];E=zt;e=zt;It++;UA.test(u.charAt(zt))?(F=u.charAt(zt),zt++):(F=n,0===It&&Kt(HA));It--;F===n?e=void 0:(zt=e,e=n);e!==n&&(F=un())!==n?E=e=[e,F]:(zt=E,E=n);if(E!==n)for(;E!==n;)C.push(E),E=zt,e=zt,It++,UA.test(u.charAt(zt))?(F=u.charAt(zt),zt++):(F=n,0===It&&Kt(HA)),It--,F===n?e=void 0:(zt=e,e=n),e!==n&&(F=un())!==n?E=e=[e,F]:(zt=E,E=n);else C=n;C===n&&(C=zt,123===u.charCodeAt(zt)?(E=IA,zt++):(E=n,0===It&&Kt(MA)),E!==n&&(e=A())!==n?(125===u.charCodeAt(zt)?(F=TA,zt++):(F=n,0===It&&Kt(ZA)),F!==n?C=E=[E,e,F]:(zt=C,C=n)):(zt=C,C=n));for(;C!==n;){if(t.push(C),C=[],E=zt,e=zt,It++,UA.test(u.charAt(zt))?(F=u.charAt(zt),zt++):(F=n,0===It&&Kt(HA)),It--,F===n?e=void 0:(zt=e,e=n),e!==n&&(F=un())!==n?E=e=[e,F]:(zt=E,E=n),E!==n)for(;E!==n;)C.push(E),E=zt,e=zt,It++,UA.test(u.charAt(zt))?(F=u.charAt(zt),zt++):(F=n,0===It&&Kt(HA)),It--,F===n?e=void 0:(zt=e,e=n),e!==n&&(F=un())!==n?E=e=[e,F]:(zt=E,E=n);else C=n;C===n&&(C=zt,123===u.charCodeAt(zt)?(E=IA,zt++):(E=n,0===It&&Kt(MA)),E!==n&&(e=A())!==n?(125===u.charCodeAt(zt)?(F=TA,zt++):(F=n,0===It&&Kt(ZA)),F!==n?C=E=[E,e,F]:(zt=C,C=n)):(zt=C,C=n))}r=t!==n?u.substring(r,zt):t;return r}())!==n?(125===u.charCodeAt(zt)?(C=TA,zt++):(C=n,0===It&&Kt(ZA)),C!==n?(Rt=A,A=r=GA(t)):(zt=A,A=n)):(zt=A,A=n),It--,A===n&&(r=n,0===It&&Kt(qA)),A}function gn(){var u,A;for(u=[],(A=An())===n&&(A=tn())===n&&(A=nn());A!==n;)u.push(A),(A=An())===n&&(A=tn())===n&&(A=nn());return u}function xn(){var A,r,t,C;return A=zt,(r=gn())!==n?(59===u.charCodeAt(zt)?(t=St,zt++):(t=n,0===It&&Kt(kt)),t!==n?A=r=[r,t]:(zt=A,A=n)):(zt=A,A=n),A===n&&(A=zt,(r=function(){var u,A;for(u=[],(A=An())===n&&(A=Cn());A!==n;)u.push(A),(A=An())===n&&(A=Cn());return u}())!==n?((t=En())===n&&(t=null),t!==n&&(C=tn())!==n?A=r=[r,t,C]:(zt=A,A=n)):(zt=A,A=n),A===n&&(A=zt,(r=gn())!==n&&(t=function(){var A,r;A=zt,It++,u.length>zt?(r=u.charAt(zt),zt++):(r=n,0===It&&Kt(U));It--,r===n?A=void 0:(zt=A,A=n);return A}())!==n?A=r=[r,t]:(zt=A,A=n))),A}var yn={$:"text","&":"simple_and","!":"simple_not"},mn={"?":"optional","*":"zero_or_more","+":"one_or_more"},wn={"&":"semantic_and","!":"semantic_not"};function _n(u){var A,r=[];for(A=0;A<u.length;A++)""!==u[A]&&r.push(u[A]);return r}function Sn(u,A){var r,t=new Array(u.length);for(r=0;r<u.length;r++)t[r]=u[r][A];return t}function kn(u,A,r){return[u].concat(Sn(A,r))}if((t=E())!==n&&zt===u.length)return t;throw t!==n&&zt<u.length&&Kt({type:"end"}),Lt(qt,$t<u.length?u.charAt($t):null,$t<u.length?Jt($t,$t+1):Jt($t,$t))}u(A,Error),A.buildMessage=function(u,A){var r={literal:function(u){return'"'+n(u.text)+'"'},class:function(u){var A,r="";for(A=0;A<u.parts.length;A++)r+=u.parts[A]instanceof Array?C(u.parts[A][0])+"-"+C(u.parts[A][1]):C(u.parts[A]);return"["+(u.inverted?"^":"")+r+"]"},any:function(u){return"any character"},end:function(u){return"end of input"},other:function(u){return u.description}};function t(u){return u.charCodeAt(0).toString(16).toUpperCase()}function n(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+t(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+t(u)})}function C(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+t(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+t(u)})}return"Expected "+function(u){var A,t,n,C=new Array(u.length);for(A=0;A<u.length;A++)C[A]=(n=u[A],r[n.type](n));if(C.sort(),C.length>0){for(A=1,t=1;A<C.length;A++)C[A-1]!==C[A]&&(C[t]=C[A],t++);C.length=t}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(u)+" but "+function(u){return u?'"'+n(u)+'"':"end of input"}(A)+" found."},module.exports={SyntaxError:A,parse:r};
},{}],"N/0e":[function(require,module,exports) {
"use strict";var e=require("../utils/objects"),n=require("../utils/arrays"),r={build:function(r){function l(e){return r[e.type].apply(null,arguments)}function t(){}function a(e){var n=Array.prototype.slice.call(arguments,1);l.apply(null,[e.expression].concat(n))}function i(e){return function(r){var t=Array.prototype.slice.call(arguments,1);n.each(r[e],function(e){l.apply(null,[e].concat(t))})}}var o={grammar:function(e){var r=Array.prototype.slice.call(arguments,1);e.initializer&&l.apply(null,[e.initializer].concat(r)),n.each(e.rules,function(e){l.apply(null,[e].concat(r))})},initializer:t,rule:a,named:a,choice:i("alternatives"),action:a,sequence:i("elements"),labeled:a,text:a,simple_and:a,simple_not:a,optional:a,zero_or_more:a,one_or_more:a,group:a,semantic_and:t,semantic_not:t,rule_ref:t,literal:t,class:t,any:t};return e.defaults(r,o),l}};module.exports=r;
},{"../utils/objects":"Saqe","../utils/arrays":"Btp4"}],"ckuz":[function(require,module,exports) {
"use strict";var e=require("../utils/arrays"),n=require("./visitor"),r={findRule:function(n,r){return e.find(n.rules,function(e){return e.name===r})},indexOfRule:function(n,r){return e.indexOf(n.rules,function(e){return e.name===r})},alwaysConsumesOnSuccess:function(u,t){function i(){return!0}function o(){return!1}function s(e){return a(e.expression)}var a=n.build({rule:s,named:s,choice:function(n){return e.every(n.alternatives,a)},action:s,sequence:function(n){return e.some(n.elements,a)},labeled:s,text:s,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:s,group:s,semantic_and:o,semantic_not:o,rule_ref:function(e){return a(r.findRule(u,e.name))},literal:function(e){return""!==e.value},class:i,any:i});return a(t)}};module.exports=r;
},{"../utils/arrays":"Btp4","./visitor":"N/0e"}],"6Wkb":[function(require,module,exports) {
"use strict";var e=require("../../grammar-error"),r=require("../asts"),i=require("../visitor");function n(n){i.build({rule_ref:function(i){if(!r.findRule(n,i.name))throw new e('Rule "'+i.name+'" is not defined.',i.location)}})(n)}module.exports=n;
},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],"nPjr":[function(require,module,exports) {
"use strict";var e=require("../../grammar-error"),r=require("../visitor");function n(n){var a={};r.build({rule:function(r){if(a.hasOwnProperty(r.name))throw new e('Rule "'+r.name+'" is already defined at line '+a[r.name].start.line+", column "+a[r.name].start.column+".",r.location);a[r.name]=r.location}})(n)}module.exports=n;
},{"../../grammar-error":"RCHO","../visitor":"N/0e"}],"nn7N":[function(require,module,exports) {
"use strict";var e=require("../../grammar-error"),r=require("../../utils/arrays"),o=require("../../utils/objects"),i=require("../visitor");function n(n){function l(e,r){t(e.expression,o.clone(r))}var t=i.build({rule:function(e){t(e.expression,{})},choice:function(e,i){r.each(e.alternatives,function(e){t(e,o.clone(i))})},action:l,labeled:function(r,o){if(o.hasOwnProperty(r.label))throw new e('Label "'+r.label+'" is already defined at line '+o[r.label].start.line+", column "+o[r.label].start.column+".",r.location);t(r.expression,o),o[r.label]=r.location},text:l,simple_and:l,simple_not:l,optional:l,zero_or_more:l,one_or_more:l,group:l});t(n)}module.exports=n;
},{"../../grammar-error":"RCHO","../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../visitor":"N/0e"}],"50GR":[function(require,module,exports) {
"use strict";var e=require("../../utils/arrays"),n=require("../../grammar-error"),r=require("../asts"),i=require("../visitor");function s(s){var u=[],o=i.build({rule:function(e){u.push(e.name),o(e.expression),u.pop(e.name)},sequence:function(n){e.every(n.elements,function(e){return o(e),!r.alwaysConsumesOnSuccess(s,e)})},rule_ref:function(i){if(e.contains(u,i.name))throw u.push(i.name),new n("Possible infinite loop when parsing (left recursion: "+u.join(" -> ")+").",i.location);o(r.findRule(s,i.name))}});o(s)}module.exports=s;
},{"../../utils/arrays":"Btp4","../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],"VZe4":[function(require,module,exports) {
"use strict";var e=require("../../grammar-error"),n=require("../asts"),o=require("../visitor");function i(i){o.build({zero_or_more:function(o){if(!n.alwaysConsumesOnSuccess(i,o.expression))throw new e("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",o.location)},one_or_more:function(o){if(!n.alwaysConsumesOnSuccess(i,o.expression))throw new e("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",o.location)}})(i)}module.exports=i;
},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],"E6LJ":[function(require,module,exports) {
"use strict";var e=require("../../utils/arrays"),r=require("../visitor");function n(n,u){var s=[];e.each(n.rules,function(i,a){var t;"rule"===(t=i).type&&"rule_ref"===t.expression.type&&(!function(e,n,u){r.build({rule_ref:function(e){e.name===n&&(e.name=u)}})(e)}(n,i.name,i.expression.name),e.contains(u.allowedStartRules,i.name)||s.push(a))}),s.reverse(),e.each(s,function(e){n.rules.splice(e,1)})}module.exports=n;
},{"../../utils/arrays":"Btp4","../visitor":"N/0e"}],"TA/v":[function(require,module,exports) {
"use strict";var _={PUSH:0,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};module.exports=_;
},{}],"LEGa":[function(require,module,exports) {
"use strict";function e(e){return e.charCodeAt(0).toString(16).toUpperCase()}var r={stringEscape:function(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(r){return"\\x"+e(r)}).replace(/[\u0100-\u0FFF]/g,function(r){return"\\u0"+e(r)}).replace(/[\u1000-\uFFFF]/g,function(r){return"\\u"+e(r)})},regexpClassEscape:function(r){return r.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\x0B").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(r){return"\\x"+e(r)}).replace(/[\u0100-\u0FFF]/g,function(r){return"\\u0"+e(r)}).replace(/[\u1000-\uFFFF]/g,function(r){return"\\u"+e(r)})}};module.exports=r;
},{}],"9PmR":[function(require,module,exports) {
"use strict";var n=require("../../utils/arrays"),e=require("../../utils/objects"),t=require("../asts"),r=require("../visitor"),s=require("../opcodes"),o=require("../js");function i(i){var c=[];function a(e){var t=n.indexOf(c,e);return-1===t?c.push(e)-1:t}function u(n,e){return a("function("+n.join(", ")+") {"+e+"}")}function l(){return Array.prototype.concat.apply([],arguments)}function p(n,e,t){return n.concat([e.length,t.length],e,t)}function P(t,r,o,i){var c=n.map(e.values(o),function(n){return i-n});return[s.CALL,t,r,c.length].concat(c)}function _(n,t,r){return l([s.PUSH_CURR_POS],[s.SILENT_FAILS_ON],E(n,{sp:r.sp+1,env:e.clone(r.env),action:null}),[s.SILENT_FAILS_OFF],p([t?s.IF_ERROR:s.IF_NOT_ERROR],l([s.POP],[t?s.POP:s.POP_CURR_POS],[s.PUSH_UNDEFINED]),l([s.POP],[t?s.POP_CURR_POS:s.POP],[s.PUSH_FAILED])))}function v(n,t,r){var o=u(e.keys(r.env),n);return l([s.UPDATE_SAVED_POS],P(o,0,r.env,r.sp),p([s.IF],l([s.POP],t?[s.PUSH_FAILED]:[s.PUSH_UNDEFINED]),l([s.POP],t?[s.PUSH_UNDEFINED]:[s.PUSH_FAILED])))}function R(n){return e=[s.WHILE_NOT_ERROR],t=l([s.APPEND],n),e.concat([t.length],t);var e,t}var E=r.build({grammar:function(e){n.each(e.rules,E),e.consts=c},rule:function(n){n.bytecode=E(n.expression,{sp:-1,env:{},action:null})},named:function(n,e){var t=a('peg$otherExpectation("'+o.stringEscape(n.name)+'")');return l([s.SILENT_FAILS_ON],E(n.expression,e),[s.SILENT_FAILS_OFF],p([s.IF_ERROR],[s.FAIL,t],[]))},choice:function(n,t){return function n(t,r){return l(E(t[0],{sp:r.sp,env:e.clone(r.env),action:null}),t.length>1?p([s.IF_ERROR],l([s.POP],n(t.slice(1),r)),[]):[])}(n.alternatives,t)},action:function(n,t){var r=e.clone(t.env),o="sequence"!==n.expression.type||0===n.expression.elements.length,i=E(n.expression,{sp:t.sp+(o?1:0),env:r,action:n}),c=u(e.keys(r),n.code);return o?l([s.PUSH_CURR_POS],i,p([s.IF_NOT_ERROR],l([s.LOAD_SAVED_POS,1],P(c,1,r,t.sp+2)),[]),[s.NIP]):i},sequence:function(n,t){return l([s.PUSH_CURR_POS],function t(r,o){var i,c;return r.length>0?(i=n.elements.length-r.slice(1).length,l(E(r[0],{sp:o.sp,env:o.env,action:null}),p([s.IF_NOT_ERROR],t(r.slice(1),{sp:o.sp+1,env:o.env,action:o.action}),l(i>1?[s.POP_N,i]:[s.POP],[s.POP_CURR_POS],[s.PUSH_FAILED])))):o.action?(c=u(e.keys(o.env),o.action.code),l([s.LOAD_SAVED_POS,n.elements.length],P(c,n.elements.length,o.env,o.sp),[s.NIP])):l([s.WRAP,n.elements.length],[s.NIP])}(n.elements,{sp:t.sp+1,env:t.env,action:t.action}))},labeled:function(n,t){var r=e.clone(t.env);return t.env[n.label]=t.sp+1,E(n.expression,{sp:t.sp,env:r,action:null})},text:function(n,t){return l([s.PUSH_CURR_POS],E(n.expression,{sp:t.sp+1,env:e.clone(t.env),action:null}),p([s.IF_NOT_ERROR],l([s.POP],[s.TEXT]),[s.NIP]))},simple_and:function(n,e){return _(n.expression,!1,e)},simple_not:function(n,e){return _(n.expression,!0,e)},optional:function(n,t){return l(E(n.expression,{sp:t.sp,env:e.clone(t.env),action:null}),p([s.IF_ERROR],l([s.POP],[s.PUSH_NULL]),[]))},zero_or_more:function(n,t){var r=E(n.expression,{sp:t.sp+1,env:e.clone(t.env),action:null});return l([s.PUSH_EMPTY_ARRAY],r,R(r),[s.POP])},one_or_more:function(n,t){var r=E(n.expression,{sp:t.sp+1,env:e.clone(t.env),action:null});return l([s.PUSH_EMPTY_ARRAY],r,p([s.IF_NOT_ERROR],l(R(r),[s.POP]),l([s.POP],[s.POP],[s.PUSH_FAILED])))},group:function(n,t){return E(n.expression,{sp:t.sp,env:e.clone(t.env),action:null})},semantic_and:function(n,e){return v(n.code,!1,e)},semantic_not:function(n,e){return v(n.code,!0,e)},rule_ref:function(n){return[s.RULE,t.indexOfRule(i,n.name)]},literal:function(n){var e,t;return n.value.length>0?(e=a('"'+o.stringEscape(n.ignoreCase?n.value.toLowerCase():n.value)+'"'),t=a('peg$literalExpectation("'+o.stringEscape(n.value)+'", '+n.ignoreCase+")"),p(n.ignoreCase?[s.MATCH_STRING_IC,e]:[s.MATCH_STRING,e],n.ignoreCase?[s.ACCEPT_N,n.value.length]:[s.ACCEPT_STRING,e],[s.FAIL,t])):(e=a('""'),[s.PUSH,e])},class:function(e){var t,r,i,c;return t=e.parts.length>0?"/^["+(e.inverted?"^":"")+n.map(e.parts,function(n){return n instanceof Array?o.regexpClassEscape(n[0])+"-"+o.regexpClassEscape(n[1]):o.regexpClassEscape(n)}).join("")+"]/"+(e.ignoreCase?"i":""):e.inverted?"/^[\\S\\s]/":"/^(?!)/",r="["+n.map(e.parts,function(n){return n instanceof Array?'["'+o.stringEscape(n[0])+'", "'+o.stringEscape(n[1])+'"]':'"'+o.stringEscape(n)+'"'}).join(", ")+"]",i=a(t),c=a("peg$classExpectation("+r+", "+e.inverted+", "+e.ignoreCase+")"),p([s.MATCH_REGEXP,i],[s.ACCEPT_N,1],[s.FAIL,c])},any:function(){var n=a("peg$anyExpectation()");return p([s.MATCH_ANY],[s.ACCEPT_N,1],[s.FAIL,n])}});E(i)}module.exports=i;
},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../visitor":"N/0e","../opcodes":"TA/v","../js":"LEGa"}],"y0wl":[function(require,module,exports) {
"use strict";var arrays=require("../../utils/arrays"),objects=require("../../utils/objects"),asts=require("../asts"),op=require("../opcodes"),js=require("../js");function generateJS(ast,options){function indent2(e){return e.replace(/^(.+)$/gm,"  $1")}function indent6(e){return e.replace(/^(.+)$/gm,"      $1")}function indent10(e){return e.replace(/^(.+)$/gm,"          $1")}function generateTables(){return"size"===options.optimize?["peg$consts = [",indent2(ast.consts.join(",\n")),"],","","peg$bytecode = [",indent2(arrays.map(ast.rules,function(e){return'peg$decode("'+js.stringEscape(arrays.map(e.bytecode,function(e){return String.fromCharCode(e+32)}).join(""))+'")'}).join(",\n")),"],"].join("\n"):arrays.map(ast.consts,function(e,t){return"peg$c"+t+" = "+e+","}).join("\n")}function generateRuleHeader(e,t){var s=[];return s.push(""),options.trace&&s.push(["peg$tracer.trace({",'  type:     "rule.enter",',"  rule:     "+e+",","  location: peg$computeLocation(startPos, startPos)","});",""].join("\n")),options.cache&&(s.push(["var key    = peg$currPos * "+ast.rules.length+" + "+t+",","    cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""].join("\n")),options.trace&&s.push(["if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""].join("\n")),s.push(["  return cached.result;","}",""].join("\n"))),s.join("\n")}function generateRuleFooter(e,t){var s=[];return options.cache&&s.push(["","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+t+" };"].join("\n")),options.trace&&s.push(["","if ("+t+" !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: "+t+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}"].join("\n")),s.push(["","return "+t+";"].join("\n")),s.join("\n")}function generateInterpreter(){var e,t=[];function s(e,t){var s=t+3,p="bc[ip + "+(s-2)+"]",n="bc[ip + "+(s-1)+"]";return["ends.push(end);","ips.push(ip + "+s+" + "+p+" + "+n+");","","if ("+e+") {","  end = ip + "+s+" + "+p+";","  ip += "+s+";","} else {","  end = ip + "+s+" + "+p+" + "+n+";","  ip += "+s+" + "+p+";","}","","break;"].join("\n")}return t.push(["function peg$decode(s) {","  var bc = new Array(s.length), i;","","  for (i = 0; i < s.length; i++) {","    bc[i] = s.charCodeAt(i) - 32;","  }","","  return bc;","}","","function peg$parseRule(index) {"].join("\n")),options.trace?t.push(["  var bc       = peg$bytecode[index],","      ip       = 0,","      ips      = [],","      end      = bc.length,","      ends     = [],","      stack    = [],","      startPos = peg$currPos,","      params, i;"].join("\n")):t.push(["  var bc    = peg$bytecode[index],","      ip    = 0,","      ips   = [],","      end   = bc.length,","      ends  = [],","      stack = [],","      params, i;"].join("\n")),t.push(indent2(generateRuleHeader("peg$ruleNames[index]","index"))),t.push(["  while (true) {","    while (ip < end) {","      switch (bc[ip]) {","        case "+op.PUSH+":","          stack.push(peg$consts[bc[ip + 1]]);","          ip += 2;","          break;","","        case "+op.PUSH_UNDEFINED+":","          stack.push(void 0);","          ip++;","          break;","","        case "+op.PUSH_NULL+":","          stack.push(null);","          ip++;","          break;","","        case "+op.PUSH_FAILED+":","          stack.push(peg$FAILED);","          ip++;","          break;","","        case "+op.PUSH_EMPTY_ARRAY+":","          stack.push([]);","          ip++;","          break;","","        case "+op.PUSH_CURR_POS+":","          stack.push(peg$currPos);","          ip++;","          break;","","        case "+op.POP+":","          stack.pop();","          ip++;","          break;","","        case "+op.POP_CURR_POS+":","          peg$currPos = stack.pop();","          ip++;","          break;","","        case "+op.POP_N+":","          stack.length -= bc[ip + 1];","          ip += 2;","          break;","","        case "+op.NIP+":","          stack.splice(-2, 1);","          ip++;","          break;","","        case "+op.APPEND+":","          stack[stack.length - 2].push(stack.pop());","          ip++;","          break;","","        case "+op.WRAP+":","          stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.TEXT+":","          stack.push(input.substring(stack.pop(), peg$currPos));","          ip++;","          break;","","        case "+op.IF+":",indent10(s("stack[stack.length - 1]",0)),"","        case "+op.IF_ERROR+":",indent10(s("stack[stack.length - 1] === peg$FAILED",0)),"","        case "+op.IF_NOT_ERROR+":",indent10(s("stack[stack.length - 1] !== peg$FAILED",0)),"","        case "+op.WHILE_NOT_ERROR+":",indent10((e="stack[stack.length - 1] !== peg$FAILED",["if ("+e+") {","  ends.push(end);","  ips.push(ip);","","  end = ip + 2 + bc[ip + 1];","  ip += 2;","} else {","  ip += 2 + bc[ip + 1];","}","","break;"].join("\n"))),"","        case "+op.MATCH_ANY+":",indent10(s("input.length > peg$currPos",0)),"","        case "+op.MATCH_STRING+":",indent10(s("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_STRING_IC+":",indent10(s("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_REGEXP+":",indent10(s("peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))",1)),"","        case "+op.ACCEPT_N+":","          stack.push(input.substr(peg$currPos, bc[ip + 1]));","          peg$currPos += bc[ip + 1];","          ip += 2;","          break;","","        case "+op.ACCEPT_STRING+":","          stack.push(peg$consts[bc[ip + 1]]);","          peg$currPos += peg$consts[bc[ip + 1]].length;","          ip += 2;","          break;","","        case "+op.FAIL+":","          stack.push(peg$FAILED);","          if (peg$silentFails === 0) {","            peg$fail(peg$consts[bc[ip + 1]]);","          }","          ip += 2;","          break;","","        case "+op.LOAD_SAVED_POS+":","          peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];","          ip += 2;","          break;","","        case "+op.UPDATE_SAVED_POS+":","          peg$savedPos = peg$currPos;","          ip++;","          break;","","        case "+op.CALL+":",indent10(["params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);","for (i = 0; i < bc[ip + 3]; i++) {","  params[i] = stack[stack.length - 1 - params[i]];","}","","stack.splice(","  stack.length - bc[ip + 2],","  bc[ip + 2],","  peg$consts[bc[ip + 1]].apply(null, params)",");","","ip += 4 + bc[ip + 3];","break;"].join("\n")),"","        case "+op.RULE+":","          stack.push(peg$parseRule(bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.SILENT_FAILS_ON+":","          peg$silentFails++;","          ip++;","          break;","","        case "+op.SILENT_FAILS_OFF+":","          peg$silentFails--;","          ip++;","          break;","","        default:",'          throw new Error("Invalid opcode: " + bc[ip] + ".");',"      }","    }","","    if (ends.length > 0) {","      end = ends.pop();","      ip = ips.pop();","    } else {","      break;","    }","  }"].join("\n")),t.push(indent2(generateRuleFooter("peg$ruleNames[index]","stack[0]"))),t.push("}"),t.join("\n")}function generateRuleFunction(rule){var parts=[],code;function c(e){return"peg$c"+e}function s(e){return"s"+e}var stack={sp:-1,maxSp:-1,push:function(e){var t=s(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t},pop:function(e){var t;return void 0===e?s(this.sp--):(t=arrays.map(arrays.range(this.sp-e+1,this.sp+1),s),this.sp-=e,t)},top:function(){return s(this.sp)},index:function(e){return s(this.sp-e)}};function compile(bc){var ip=0,end=bc.length,parts=[],value;function compileCondition(e,t){var s,p,n,r,i=t+3,o=bc[ip+i-2],a=bc[ip+i-1],c=stack.sp;if(ip+=i,s=compile(bc.slice(ip,ip+o)),n=stack.sp,ip+=o,a>0&&(stack.sp=c,p=compile(bc.slice(ip,ip+a)),r=stack.sp,ip+=a,n!==r))throw new Error("Branches of a condition must move the stack pointer in the same way.");parts.push("if ("+e+") {"),parts.push(indent2(s)),a>0&&(parts.push("} else {"),parts.push(indent2(p))),parts.push("}")}function compileLoop(e){var t,s,p=bc[ip+2-1],n=stack.sp;if(ip+=2,t=compile(bc.slice(ip,ip+p)),s=stack.sp,ip+=p,s!==n)throw new Error("Body of a loop can't move the stack pointer.");parts.push("while ("+e+") {"),parts.push(indent2(t)),parts.push("}")}function compileCall(){var e=bc[ip+4-1],t=c(bc[ip+1])+"("+arrays.map(bc.slice(ip+4,ip+4+e),function(e){return stack.index(e)}).join(", ")+")";stack.pop(bc[ip+2]),parts.push(stack.push(t)),ip+=4+e}for(;ip<end;)switch(bc[ip]){case op.PUSH:parts.push(stack.push(c(bc[ip+1]))),ip+=2;break;case op.PUSH_CURR_POS:parts.push(stack.push("peg$currPos")),ip++;break;case op.PUSH_UNDEFINED:parts.push(stack.push("void 0")),ip++;break;case op.PUSH_NULL:parts.push(stack.push("null")),ip++;break;case op.PUSH_FAILED:parts.push(stack.push("peg$FAILED")),ip++;break;case op.PUSH_EMPTY_ARRAY:parts.push(stack.push("[]")),ip++;break;case op.POP:stack.pop(),ip++;break;case op.POP_CURR_POS:parts.push("peg$currPos = "+stack.pop()+";"),ip++;break;case op.POP_N:stack.pop(bc[ip+1]),ip+=2;break;case op.NIP:value=stack.pop(),stack.pop(),parts.push(stack.push(value)),ip++;break;case op.APPEND:value=stack.pop(),parts.push(stack.top()+".push("+value+");"),ip++;break;case op.WRAP:parts.push(stack.push("["+stack.pop(bc[ip+1]).join(", ")+"]")),ip+=2;break;case op.TEXT:parts.push(stack.push("input.substring("+stack.pop()+", peg$currPos)")),ip++;break;case op.IF:compileCondition(stack.top(),0);break;case op.IF_ERROR:compileCondition(stack.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:compileCondition(stack.top()+" !== peg$FAILED",0);break;case op.WHILE_NOT_ERROR:compileLoop(stack.top()+" !== peg$FAILED",0);break;case op.MATCH_ANY:compileCondition("input.length > peg$currPos",0);break;case op.MATCH_STRING:compileCondition(eval(ast.consts[bc[ip+1]]).length>1?"input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+") === "+c(bc[ip+1]):"input.charCodeAt(peg$currPos) === "+eval(ast.consts[bc[ip+1]]).charCodeAt(0),1);break;case op.MATCH_STRING_IC:compileCondition("input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+").toLowerCase() === "+c(bc[ip+1]),1);break;case op.MATCH_REGEXP:compileCondition(c(bc[ip+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:parts.push(stack.push(bc[ip+1]>1?"input.substr(peg$currPos, "+bc[ip+1]+")":"input.charAt(peg$currPos)")),parts.push(bc[ip+1]>1?"peg$currPos += "+bc[ip+1]+";":"peg$currPos++;"),ip+=2;break;case op.ACCEPT_STRING:parts.push(stack.push(c(bc[ip+1]))),parts.push(eval(ast.consts[bc[ip+1]]).length>1?"peg$currPos += "+eval(ast.consts[bc[ip+1]]).length+";":"peg$currPos++;"),ip+=2;break;case op.FAIL:parts.push(stack.push("peg$FAILED")),parts.push("if (peg$silentFails === 0) { peg$fail("+c(bc[ip+1])+"); }"),ip+=2;break;case op.LOAD_SAVED_POS:parts.push("peg$savedPos = "+stack.index(bc[ip+1])+";"),ip+=2;break;case op.UPDATE_SAVED_POS:parts.push("peg$savedPos = peg$currPos;"),ip++;break;case op.CALL:compileCall();break;case op.RULE:parts.push(stack.push("peg$parse"+ast.rules[bc[ip+1]].name+"()")),ip+=2;break;case op.SILENT_FAILS_ON:parts.push("peg$silentFails++;"),ip++;break;case op.SILENT_FAILS_OFF:parts.push("peg$silentFails--;"),ip++;break;default:throw new Error("Invalid opcode: "+bc[ip]+".")}return parts.join("\n")}return code=compile(rule.bytecode),parts.push("function peg$parse"+rule.name+"() {"),options.trace?parts.push(["  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+",","      startPos = peg$currPos;"].join("\n")):parts.push("  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+";"),parts.push(indent2(generateRuleHeader('"'+js.stringEscape(rule.name)+'"',asts.indexOfRule(ast,rule.name)))),parts.push(indent2(code)),parts.push(indent2(generateRuleFooter('"'+js.stringEscape(rule.name)+'"',s(0)))),parts.push("}"),parts.join("\n")}function generateToplevel(){var e,t,s,p,n,r=[];return r.push(["function peg$subclass(child, parent) {","  function ctor() { this.constructor = child; }","  ctor.prototype = parent.prototype;","  child.prototype = new ctor();","}","","function peg$SyntaxError(message, expected, found, location) {","  this.message  = message;","  this.expected = expected;","  this.found    = found;","  this.location = location;",'  this.name     = "SyntaxError";',"",'  if (typeof Error.captureStackTrace === "function") {',"    Error.captureStackTrace(this, peg$SyntaxError);","  }","}","","peg$subclass(peg$SyntaxError, Error);","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","        literal: function(expectation) {",'          return "\\"" + literalEscape(expectation.text) + "\\"";',"        },","",'        "class": function(expectation) {','          var escapedParts = "",',"              i;","","          for (i = 0; i < expectation.parts.length; i++) {","            escapedParts += expectation.parts[i] instanceof Array",'              ? classEscape(expectation.parts[i][0]) + "-" + classEscape(expectation.parts[i][1])',"              : classEscape(expectation.parts[i]);","          }","",'          return "[" + (expectation.inverted ? "^" : "") + escapedParts + "]";',"        },","","        any: function(expectation) {",'          return "any character";',"        },","","        end: function(expectation) {",'          return "end of input";',"        },","","        other: function(expectation) {","          return expectation.description;","        }","      };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\"/g,  '\\\\\"')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function classEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\\]/g, '\\\\]')","      .replace(/\\^/g, '\\\\^')","      .replace(/-/g,  '\\\\-')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = new Array(expected.length),","        i, j;","","    for (i = 0; i < expected.length; i++) {","      descriptions[i] = describeExpectation(expected[i]);","    }","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""].join("\n")),options.trace&&r.push(["function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};",""].join("\n")),r.push(["function peg$parse(input, options) {","  options = options !== void 0 ? options : {};","","  var peg$FAILED = {},",""].join("\n")),"size"===options.optimize?(e="{ "+arrays.map(options.allowedStartRules,function(e){return e+": "+asts.indexOfRule(ast,e)}).join(", ")+" }",t=asts.indexOfRule(ast,options.allowedStartRules[0]),r.push(["      peg$startRuleIndices = "+e+",","      peg$startRuleIndex   = "+t+","].join("\n"))):(s="{ "+arrays.map(options.allowedStartRules,function(e){return e+": peg$parse"+e}).join(", ")+" }",p="peg$parse"+options.allowedStartRules[0],r.push(["      peg$startRuleFunctions = "+s+",","      peg$startRuleFunction  = "+p+","].join("\n"))),r.push(""),r.push(indent6(generateTables())),r.push(["","      peg$currPos          = 0,","      peg$savedPos         = 0,","      peg$posDetailsCache  = [{ line: 1, column: 1 }],","      peg$maxFailPos       = 0,","      peg$maxFailExpected  = [],","      peg$silentFails      = 0,",""].join("\n")),options.cache&&r.push(["      peg$resultsCache = {},",""].join("\n")),options.trace&&("size"===options.optimize&&(n="["+arrays.map(ast.rules,function(e){return'"'+js.stringEscape(e.name)+'"'}).join(", ")+"]",r.push(["      peg$ruleNames = "+n+",",""].join("\n"))),r.push(['      peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer(),',""].join("\n"))),r.push(["      peg$result;",""].join("\n")),"size"===options.optimize?r.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleIndices)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleIndex = peg$startRuleIndices[options.startRule];","  }"].join("\n")):r.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }"].join("\n")),r.push(["","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos], p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line:   details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos),","        endPosDetails   = peg$computePosDetails(endPos);","","    return {","      start: {","        offset: startPos,","        line:   startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line:   endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""].join("\n")),"size"===options.optimize?(r.push(indent2(generateInterpreter())),r.push("")):arrays.each(ast.rules,function(e){r.push(indent2(generateRuleFunction(e))),r.push("")}),ast.initializer&&(r.push(indent2(ast.initializer.code)),r.push("")),"size"===options.optimize?r.push("  peg$result = peg$parseRule(peg$startRuleIndex);"):r.push("  peg$result = peg$startRuleFunction();"),r.push(["","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"].join("\n")),r.join("\n")}function generateWrapper(e){function t(){return["/*"," * Generated by PEG.js 0.10.0."," *"," * http://pegjs.org/"," */"].join("\n")}function s(){return options.trace?["{","  SyntaxError:   peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse:         peg$parse","}"].join("\n"):["{","  SyntaxError: peg$SyntaxError,","  parse:       peg$parse","}"].join("\n")}return{bare:function(){return[t(),"(function() {",'  "use strict";',"",indent2(e),"",indent2("return "+s()+";"),"})()"].join("\n")},commonjs:function(){var p=[],n=objects.keys(options.dependencies),r=arrays.map(n,function(e){return e+' = require("'+js.stringEscape(options.dependencies[e])+'")'});return p.push([t(),"",'"use strict";',""].join("\n")),r.length>0&&(p.push("var "+r.join(", ")+";"),p.push("")),p.push([e,"","module.exports = "+s()+";",""].join("\n")),p.join("\n")},amd:function(){var p=objects.values(options.dependencies),n=objects.keys(options.dependencies),r="["+arrays.map(p,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",i=n.join(", ");return[t(),"define("+r+", function("+i+") {",'  "use strict";',"",indent2(e),"",indent2("return "+s()+";"),"});",""].join("\n")},globals:function(){return[t(),"(function(root) {",'  "use strict";',"",indent2(e),"",indent2("root."+options.exportVar+" = "+s()+";"),"})(this);",""].join("\n")},umd:function(){var p=[],n=objects.values(options.dependencies),r=objects.keys(options.dependencies),i="["+arrays.map(n,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",o=arrays.map(n,function(e){return'require("'+js.stringEscape(e)+'")'}).join(", "),a=r.join(", ");return p.push([t(),"(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+i+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+o+");"].join("\n")),null!==options.exportVar&&p.push(["  } else {","    root."+options.exportVar+" = factory();"].join("\n")),p.push(["  }","})(this, function("+a+") {",'  "use strict";',"",indent2(e),"",indent2("return "+s()+";"),"});",""].join("\n")),p.join("\n")}}[options.format]()}ast.code=generateWrapper(generateToplevel())}module.exports=generateJS;
},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../opcodes":"TA/v","../js":"LEGa"}],"eOkX":[function(require,module,exports) {
"use strict";var arrays=require("../utils/arrays"),objects=require("../utils/objects"),compiler={visitor:require("./visitor"),passes:{check:{reportUndefinedRules:require("./passes/report-undefined-rules"),reportDuplicateRules:require("./passes/report-duplicate-rules"),reportDuplicateLabels:require("./passes/report-duplicate-labels"),reportInfiniteRecursion:require("./passes/report-infinite-recursion"),reportInfiniteRepetition:require("./passes/report-infinite-repetition")},transform:{removeProxyRules:require("./passes/remove-proxy-rules")},generate:{generateBytecode:require("./passes/generate-bytecode"),generateJS:require("./passes/generate-js")}},compile:function(ast,passes,options){var stage;for(stage in options=void 0!==options?options:{},options=objects.clone(options),objects.defaults(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",optimize:"speed",output:"parser",trace:!1}),passes)passes.hasOwnProperty(stage)&&arrays.each(passes[stage],function(e){e(ast,options)});switch(options.output){case"parser":return eval(ast.code);case"source":return ast.code}}};module.exports=compiler;
},{"../utils/arrays":"Btp4","../utils/objects":"Saqe","./visitor":"N/0e","./passes/report-undefined-rules":"6Wkb","./passes/report-duplicate-rules":"nPjr","./passes/report-duplicate-labels":"nn7N","./passes/report-infinite-recursion":"50GR","./passes/report-infinite-repetition":"VZe4","./passes/remove-proxy-rules":"E6LJ","./passes/generate-bytecode":"9PmR","./passes/generate-js":"y0wl"}],"LOSa":[function(require,module,exports) {
"use strict";var r=require("./utils/arrays"),e=require("./utils/objects"),s={VERSION:"0.10.0",GrammarError:require("./grammar-error"),parser:require("./parser"),compiler:require("./compiler"),generate:function(a,i){i=void 0!==i?i:{};var p="plugins"in(i=e.clone(i))?i.plugins:[],u={parser:s.parser,passes:function(r){var s,a={};for(s in r)r.hasOwnProperty(s)&&(a[s]=e.values(r[s]));return a}(s.compiler.passes)};return r.each(p,function(r){r.use(u,i)}),s.compiler.compile(u.parser.parse(a),u.passes,i)}};module.exports=s;
},{"./utils/arrays":"Btp4","./utils/objects":"Saqe","./grammar-error":"RCHO","./parser":"DLue","./compiler":"eOkX"}],"lA6R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node");class r extends e.Node{constructor(e,r,t){super(e),this.specifierQualifiers=r,this.declarator=t}deduceType(e){const r=this.specifierQualifiers.getType(e);return this.declarator?this.declarator.getType(e,r):r}}exports.TypeName=r;
},{"../../common/node":"PoXi"}],"0eiW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),s=require("../scope");class n extends t.ClassDirective{constructor(e,t,s){super(e),this.name=t,this.type=s}codegen(t){if(this.type){const e=this.type.deduceType(t);t.scopeManager.define(this.name.getPlainName(t),e,this)}else{const n=t.scopeManager.lookup(this.name.getLookupName(t));if(null===n)throw new e.SyntaxError(`undefine symbol ${this.name.name}`,this);n instanceof s.FunctionLookUpResult?n.functions.map(e=>t.scopeManager.define(e.shortName.split("@")[0],e,this)):t.scopeManager.define(this.name.getPlainName(t),n,this)}}declare(e,t){this.codegen(e)}}exports.UsingStatement=n;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../scope":"y+tL"}],"naS6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node"),i=require("../../type"),s=require("../class/type_name"),t=require("../expression/identifier"),c=require("../statement/using_statement");class r extends e.Directive{constructor(e,i,s){super(e),this.specifiers=i,this.initDeclarators=s}declare(e,i){const r=this.specifiers.getType(e),n=this.specifiers.specifiers.includes("typedef");for(const a of this.initDeclarators)if(n){const i=a.declarator.getNameRequired().getPlainName(e);new c.UsingStatement(this.location,t.Identifier.fromString(this.location,i),new s.TypeName(this.location,this.specifiers,a.declarator)).codegen(e)}else a.declareInClass(e,{type:r,isLibCall:this.specifiers.specifiers.includes("__libcall"),isExtern:this.specifiers.specifiers.includes("extern"),isStatic:this.specifiers.specifiers.includes("static"),accessControl:i.accessControl},i)}codegen(e){const r=this.specifiers.getType(e),n=this.specifiers.specifiers.includes("typedef");for(const a of this.initDeclarators)if(n){const i=a.declarator.getNameRequired().getPlainName(e);new c.UsingStatement(this.location,t.Identifier.fromString(this.location,i),new s.TypeName(this.location,this.specifiers,a.declarator)).codegen(e)}else{const s=null!==e.scopeManager.currentContext.scope.classType;a.declare(e,{type:r,isLibCall:this.specifiers.specifiers.includes("__libcall"),isExtern:this.specifiers.specifiers.includes("extern"),isStatic:this.specifiers.specifiers.includes("static"),accessControl:s?i.AccessControl.Unknown:i.AccessControl.Public})}}getTypedefName(){return this.specifiers.specifiers.includes("typedef")?this.initDeclarators.map(e=>e.declarator.getNameRequired()).map(e=>e.getLastID().name):[]}}exports.Declaration=r;
},{"../../common/node":"PoXi","../../type":"Rt13","../class/type_name":"lA6R","../expression/identifier":"5fRK","../statement/using_statement":"0eiW"}],"WYAj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../common/node");class t extends r.Node{constructor(e,r){super(e),this.declarator=r}getName(){return this.declarator?this.declarator.getName():null}getNameRequired(){const r=this.getName();if(!r)throw new e.SyntaxError("the name is missing, no name",this);return r}}exports.Declarator=t;
},{"../../common/error":"nOPH","../../common/node":"PoXi"}],"yPyc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/function_type"),t=require("./declarator");class r extends t.Declarator{static getFunctionDeclarator(e){return e instanceof r?e:e.declarator?this.getFunctionDeclarator(e.declarator):null}constructor(e,t,r){super(e,t),this.parameters=r}getType(t,r){const a=new e.FunctionType(r,this.parameters.parameters.map(e=>e.getType(t)),this.parameters.variableArguments);return this.declarator?this.declarator.getType(t,a):a}}exports.FunctionDeclarator=r;
},{"../../type/function_type":"VPTZ","./declarator":"WYAj"}],"fR4/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),n=require("../../common/symbol"),r=require("../../type"),i=require("../../type/compound_type"),o=require("../../type/function_type"),s=require("../declaration/function_declarator"),a=require("./function");class c extends t.ClassDirective{constructor(e,t,n,r){super(e),this.specifiers=t,this.declarator=n,this.body=r,this.parameterNames=[]}deduceType(t){const n=this.declarator.getType(t,this.specifiers.getType(t));if(!(n instanceof o.FunctionType))throw new e.InternalError("this is not a function");return n}getFunctionConfig(t){const n=this.declarator.getNameRequired(),i=s.FunctionDeclarator.getFunctionDeclarator(this.declarator),o=this.deduceType(t);if(!i)throw new e.InternalError("function is not a functionDeclarator");const a=i.parameters.getNameList(t),c=i.parameters.getInitList(t);if(new Set(a).size!==a.length)throw new e.SyntaxError("some of the name of parameters are repeative",this);return{name:n.getLookupName(t),functionType:o,parameterNames:a,parameterInits:c,accessControl:r.AccessControl.Public,isLibCall:this.specifiers.specifiers.includes("__libcall")}}getMemberFunctionConfig(t,n){if(this.specifiers.specifiers.includes("static"))return this.getFunctionConfig(t);const r=this.declarator.getNameRequired(),a=this.deduceType(t),c=s.FunctionDeclarator.getFunctionDeclarator(this.declarator);if(!c)throw new e.InternalError("function is not a functionDeclarator");a.parameterTypes=[new i.PointerType(n),...a.parameterTypes],a.cppFunctionType=o.CppFunctionType.MemberFunction,a.referenceClass=n;const l=["this",...c.parameters.getNameList(t)],u=[null,...c.parameters.getInitList(t)],p=this.specifiers.specifiers.includes("virtual"),m=r.getFullName(t)+"@"+a.toMangledName(),f=r.getShortName(t)+"@"+a.parameterTypes.slice(1).map(e=>e.toString()).join(",");if(p?(a.isVirtual=!0,n.registerVFunction(t,f,m)):null!==n.getVCallInfo(f)&&(a.isVirtual=!0,n.registerVFunction(t,f,m)),new Set(l).size!==l.length)throw new e.SyntaxError("some of the name of parameters are repeative",this);return{name:r.getLookupName(t),functionType:a,parameterNames:l,parameterInits:u,accessControl:n.accessControl,isLibCall:this.specifiers.specifiers.includes("__libcall")}}declare(e,t){const n=this.getMemberFunctionConfig(e,t);a.declareFunction(e,n,this)}codegen(t){const i=this.declarator.getNameRequired().getFullName(t),o=t.scopeManager.root.getScopeOfLookupName(i);if(!o)throw new e.SyntaxError(`unresolvedname ${i}`,this);if(null===o.classType){const e=this.getFunctionConfig(t),r=t.scopeManager.getOldOverloadSymbol(i+"@"+e.functionType.toMangledName()),o=r&&r instanceof n.FunctionEntity?r.declareActiveScopes:[];a.defineFunction(t,e,this.body.body,o,this)}else{const e=o.classType,s=this.getMemberFunctionConfig(t,e),c=t.scopeManager.getOldOverloadSymbol(i+"@"+s.functionType.toMangledName()),l=c&&c instanceof n.FunctionEntity?c.declareActiveScopes:[];s.accessControl=r.AccessControl.Unknown,a.defineFunction(t,s,this.body.body,l,this)}}}exports.FunctionDefinition=c;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../declaration/function_declarator":"yPyc","./function":"rsVP"}],"5Hdw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node");class r extends t.Node{constructor(t,r=[],s=!1){super(t),this.parameters=r,this.variableArguments=s;let a=this.parameters.length-1;for(;a>=0&&null!==this.parameters[a].init;a--)if(this.variableArguments)throw new e.SyntaxError("var argument function could not apply default param",this);for(a--;a>=0;a--)if(null!==this.parameters[a].init)throw new e.SyntaxError("illegal init expression",this)}getTypeList(e){return this.parameters.map(t=>t.getType(e))}getNameList(t){const r=[];for(const s of this.parameters){if(!s.declarator)throw new e.SyntaxError("the parameter list is not complete, some name is missing",this);const a=s.declarator.getNameRequired();r.push(a.getPlainName(t))}return r}getInitList(e){return this.parameters.map(t=>t.init?t.init.evaluate(e):null)}}exports.ParameterList=r;
},{"../../common/error":"nOPH","../../common/node":"PoXi"}],"sqMO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../class/destructor"),t=require("./statement");class s extends t.Statement{constructor(e,t){super(e),this.body=t}codegen(t){t.enterScope(),this.body.map(e=>e.codegen(t)),e.triggerAllDestructor(t,this),t.exitScope(this)}}exports.CompoundStatement=s;
},{"../class/destructor":"ef0b","./statement":"0pYg"}],"KH9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../expression/expression"),s=require("./statement");class t extends s.Statement{constructor(e,s){super(e),this.expression=s}codegen(s){e.recycleExpressionResult(s,this,this.expression.codegen(s))}}exports.ExpressionStatement=t;
},{"../expression/expression":"TaUa","./statement":"0pYg"}],"nUYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../common/node"),r=require("../../type/class_type"),s=require("../expression/expression"),o=require("../expression/identifier"),t=require("../expression/unary_expression"),n=require("../function/call_expression");class a extends i.Node{constructor(e,i){super(e),this.argus=i}initialize(i,a,l){if(!(l instanceof r.ClassType))throw new e.SyntaxError("only class type could apply object initializer",this);const c=l.fullName+"::#"+l.shortName,p=o.Identifier.fromString(this.location,c),u=new t.UnaryExpression(this.location,"&",o.Identifier.fromString(this.location,a.getPlainName(i))),x=new n.CallExpression(this.location,p,[u,...this.argus]);s.recycleExpressionResult(i,this,x.codegen(i))}}exports.ObjectInitializer=a;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM"}],"5X0F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),n=require("../../common/symbol"),i=require("../../type"),s=require("../../type/class_type"),o=require("../../type/compound_type"),r=require("../../type/function_type"),a=require("../../type/primitive_type"),c=require("../declaration/object_initializer"),l=require("../expression/anonymous_expression"),p=require("../expression/assignment_expression"),u=require("../expression/binary_expression"),h=require("../expression/identifier"),m=require("../expression/integer_constant"),f=require("../expression/unary_expression"),y=require("../function/call_expression"),x=require("../function/function"),w=require("../overload"),g=require("../scope"),d=require("../statement/expression_statement"),E=require("./member_expression"),C=require("../../wasm");class S extends t.ClassDirective{constructor(e,t,n,i,s){super(e),this.name=t,this.param=n,this.initList=i,this.body=s}getFunctionConfig(t,n,i){const s=this.name.getPlainName(t);if(n.shortName.split("<")[0]!==s.split("<")[0])throw new e.SyntaxError(`invaild ctor name ${s.split("<")[0]}`,this);const c=[new o.PointerType(n),...this.param.getTypeList(t)],l=["this",...this.param.getNameList(t)],p=[null,...this.param.getInitList(t)],u=new r.FunctionType(a.PrimitiveTypes.void,c,!1);return u.cppFunctionType=r.CppFunctionType.Constructor,u.referenceClass=n,{name:"#"+n.shortName,functionType:u,parameterNames:l,parameterInits:p,accessControl:i,isLibCall:!1}}declare(e,t){const n=this.getFunctionConfig(e,t,t.accessControl);x.declareFunction(e,n,this)}codegen(t){const s=t.scopeManager.currentContext.scope.classType;if(!s)throw new e.SyntaxError(`unresolved name ${this.name.getLookupName(t)}`,this);const o=this.getFunctionConfig(t,s,i.AccessControl.Unknown);if(this.body){const e=[...this.generateStatements(t,o),...this.body.body],i=t.scopeManager.getOldOverloadSymbol(t.scopeManager.currentContext.scope.fullName+"::"+o.name+"@"+o.functionType.toMangledName()),s=i&&i instanceof n.FunctionEntity?i.declareActiveScopes:[];x.defineFunction(t,o,e,s,this)}else x.declareFunction(t,o,this)}generateStatements(t,n){if(n.functionType.cppFunctionType!==r.CppFunctionType.Constructor||null===n.functionType.referenceClass)throw new e.InternalError("getCtorStmts()");const i=n.functionType.referenceClass,x=this.initList,S=new Map,T=[];for(const s of x)if(s.isType){const n=s.key.getPlainName(t);let o=!1;for(let r=0;r<i.inheritance.length;r++)if(N(i.inheritance[r].classType.fullName,i.fullName,n)){const n=i.inheritance[r].classType,a=n.fullName+"::#"+n.shortName,c=t.scopeManager.lookup(a);if(null===c||!(c instanceof g.FunctionLookUpResult))throw new e.SyntaxError(`the base class ${s.key.name}`+" construtor parameters mismatch",this);T[r]=new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,a),[h.Identifier.fromString(this.location,"this"),...s.value])),o=!0}if(!o)throw new e.SyntaxError(`class ${s.key.name}`+` is not base class of ${i.shortName}`,this)}else{const n=s.key.getPlainName(t);if(1!==s.value.length)throw new e.SyntaxError("the number of argument to init "+n+` is incorrect, exepct 1, actual ${s.value.length}`,this);if(null===i.getField(n))throw new e.SyntaxError(`unknown field ${n} in class ${i.shortName}`,this);S.set(n,s.value[0])}for(let s=0;s<i.inheritance.length;s++)if(!T[s]){const n=i.inheritance[s].classType,o=n.fullName+"::#"+n.shortName,r=t.scopeManager.lookup(o);if(null===r||!(r instanceof g.FunctionLookUpResult))throw new e.SyntaxError(`the base class ${n.shortName}`+" contains not constructor",this);T[s]=new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,o),[h.Identifier.fromString(this.location,"this")]))}const q=[...T];for(const r of i.fields){const n=new E.MemberExpression(this.location,h.Identifier.fromString(this.location,"this"),!0,h.Identifier.fromString(this.location,r.name));if(void 0!==S.get(r.name))q.push(new d.ExpressionStatement(this.location,new p.AssignmentExpression(this.location,"=",n,S.get(r.name))));else if(null!==r.initializer)if(r.initializer instanceof c.ObjectInitializer){if(!(r.type instanceof s.ClassType))throw new e.SyntaxError("only class type could apply object initializer",this);const t=r.type.fullName+"::#"+r.type.shortName,i=h.Identifier.fromString(this.location,t),o=new f.UnaryExpression(this.location,"&",n),a=new y.CallExpression(this.location,i,[o,...r.initializer.argus]);q.push(new d.ExpressionStatement(this.location,a))}else q.push(new d.ExpressionStatement(this.location,new p.AssignmentExpression(this.location,"=",n,r.initializer)));else if(r.type instanceof s.ClassType){const e=i.fullName+"#"+i.shortName;w.isFunctionExists(t,e,[new o.PointerType(i)])&&q.push(new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,e),[new f.UnaryExpression(this.location,"&",n)])))}}if(i.requireVPtr){const e=new u.BinaryExpression(this.location,"+",new l.AnonymousCastExpression(this.location,h.Identifier.fromString(this.location,"this"),new o.PointerType(a.PrimitiveTypes.char)),m.IntegerConstant.fromNumber(this.location,i.VPtrOffset)),t=new f.UnaryExpression(this.location,"*",new l.AnonymousCastExpression(this.location,e,new o.PointerType(a.PrimitiveTypes.int32))),n=new C.WGetAddress(C.WMemoryLocation.DATA,this.location);n.offset=i.vTablePtr;const s=new l.AnonymousExpression(this.location,{type:a.PrimitiveTypes.int32,expr:n,isLeft:!1});q.push(new d.ExpressionStatement(this.location,new p.AssignmentExpression(this.location,"=",t,s)))}return q}}exports.ConstructorDeclaration=S;class T extends t.Node{constructor(e,t,n,i){super(e),this.key=t,this.value=n,this.isType=i}}function N(e,t,n){if("::"===n.slice(0,2))return e===n;const i=t.split("::");return i.slice(0,i.length-1).join("::")+"::"+n===e}exports.ConstructorInitializeItem=T;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../declaration/object_initializer":"nUYN","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","../overload":"sV6L","../scope":"y+tL","../statement/expression_statement":"KH9n","./member_expression":"5MB0","../../wasm":"Jo9c"}],"eCer":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),n=require("../../common/symbol"),i=require("../../type"),o=require("../../type/class_type"),s=require("../../type/compound_type"),r=require("../../type/function_type"),a=require("../../type/primitive_type"),c=require("../expression/identifier"),l=require("../expression/unary_expression"),u=require("../function/call_expression"),p=require("../function/function"),m=require("../overload"),f=require("../statement/expression_statement"),h=require("./member_expression");class y extends t.ClassDirective{constructor(e,t,n,i){super(e),this.name=t,this.body=n,this.isVirtual=i}getFunctionConfig(t,n,i){const o=this.name.getPlainName(t);if(n.shortName!==o)throw new e.SyntaxError(`invaild dtor name ${o}`,this);const c=[new s.PointerType(n)],l=new r.FunctionType(a.PrimitiveTypes.void,c,!1);l.cppFunctionType=r.CppFunctionType.Destructor,l.referenceClass=n;const u=t.scopeManager.getFullName("~"+o)+"@"+l.toMangledName();return this.isVirtual?(l.isVirtual=!0,n.registerVFunction(t,"~",u)):null!==n.getVCallInfo("~")&&(l.isVirtual=!0,n.registerVFunction(t,"~",u)),{name:"~"+o,functionType:l,parameterNames:["this"],parameterInits:[null],accessControl:i,isLibCall:!1}}declare(e,t){const n=this.getFunctionConfig(e,t,t.accessControl);p.declareFunction(e,n,this)}codegen(t){const s=t.scopeManager.lookup(this.name.getLookupName(t));if(!s)throw new e.SyntaxError(`unresolved name ${this.name.getLookupName(t)}`,this);if(!(s instanceof o.ClassType))throw new e.SyntaxError(`name ${this.name.getLookupName(t)} is not a class`,this);const r=this.getFunctionConfig(t,s,i.AccessControl.Unknown);if(this.body){const e=[...this.body.body,...this.generateStatements(t,r)],i=t.scopeManager.getOldOverloadSymbol(r.name+"@"+r.functionType.toMangledName()),o=i&&i instanceof n.FunctionEntity?i.declareActiveScopes:[];p.defineFunction(t,r,e,o,this)}else p.declareFunction(t,r,this)}generateStatements(t,n){if(n.functionType.cppFunctionType!==r.CppFunctionType.Destructor||null===n.functionType.referenceClass)throw new e.InternalError("getDtorStmts()");const i=[],s=n.functionType.referenceClass;for(const e of s.fields){const n=new h.MemberExpression(this.location,c.Identifier.fromString(this.location,"this"),!0,c.Identifier.fromString(this.location,e.name));if(e.type instanceof o.ClassType){const e=s.fullName+"~"+s.shortName;m.isFunctionExists(t,e,[],s)&&i.push(new f.ExpressionStatement(this.location,new u.CallExpression(this.location,c.Identifier.fromString(this.location,e),[new l.UnaryExpression(this.location,"&",n)])))}}for(const e of s.inheritance){const n=e.classType.fullName+"::~"+e.classType.shortName;null!==t.scopeManager.lookup(n)&&i.push(new f.ExpressionStatement(this.location,new u.CallExpression(this.location,new h.MemberExpression(this.location,c.Identifier.fromString(this.location,"this"),!0,c.Identifier.fromString(this.location,"~"+e.classType.shortName)),[])))}return i}}exports.DestructorDeclaration=y;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","../overload":"sV6L","../statement/expression_statement":"KH9n","./member_expression":"5MB0"}],"8Ay1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),i=require("../../common/symbol"),n=require("../../type"),r=require("../../type/class_type"),s=require("../../type/primitive_type"),o=require("../../wasm"),a=require("../address"),c=require("../declaration/declaration"),l=require("../expression/anonymous_expression"),u=require("../expression/assignment_expression"),p=require("../function/function_definition"),d=require("../function/parameter_list"),h=require("../statement/compound_statement"),f=require("../statement/expression_statement"),m=require("./constructor_declaration"),g=require("./destructor_declaration");class y extends t.Node{constructor(e,t,i,n,r){super(e),this.typeName=t,this.identifier=i,this.declarations=n,this.inherits=r}isVirtual(t){if(null===this.declarations)throw new e.InternalError("public isVirtual(inheritance: Inheritance[]) ");for(const e of this.declarations)if(e instanceof c.Declaration||e instanceof p.FunctionDefinition){if(e.specifiers.specifiers.includes("virtual"))return!0}else if(e instanceof g.DestructorDeclaration&&e.isVirtual)return!0;for(const e of t)if(e.classType.requireVPtr)return!0;return!1}codegen(t){const i=this.identifier.getShortName(t),n=this.identifier.getFullName(t),s=this.identifier.getLookupName(t),o=t.scopeManager.lookup(s);if(null!==o){if(null===this.declarations){if(o instanceof r.ClassType)return o;throw new e.SyntaxError(`conflict type of ${s}`,this)}throw new e.SyntaxError(`redefine of ${s}`,this)}const a=this.inherits.map(e=>e.codegen(t)),c=new r.ClassType(i,n,t.fileName,[],"union"===this.typeName,a);if(null===this.declarations)return t.scopeManager.declare(s,c,this),c;const l=this.isVirtual(a);l&&c.setUpVPtr(),t.scopeManager.define(s,c,this);const u=t.scopeManager.currentContext.activeScopes;return t.scopeManager.enterScope(n),t.scopeManager.activeScopes(u),t.scopeManager.currentContext.scope.classType=c,this.declarations.map(e=>e.declare(t,c)),c.initialize(),l&&this.generateVTable(t,c),this.declarations.map(e=>e.codegen(t)),this.generateDefaultConstructor(t),this.generateDefaultDestructor(t),t.scopeManager.exitScope(),c}generateVTable(e,t){const n=4*t.vTable.vFunctions.length;t.vTablePtr=e.memory.allocData(n);for(let r=0;r<t.vTable.vFunctions.length;r++){const n=new o.WGetAddress(o.WMemoryLocation.DATA,this.location);n.offset=t.vTablePtr+4*r;const c=new l.AnonymousExpression(this.location,{type:s.PrimitiveTypes.int32,expr:new a.WAddressHolder(n,i.AddressType.RVALUE,this.location),isLeft:!0}),p=t.vTable.vFunctions[r].fullName;new f.ExpressionStatement(this.location,new u.AssignmentExpression(this.location,"=",c,new l.AnonymousExpression(this.location,{type:s.PrimitiveTypes.int32,isLeft:!1,expr:new o.WGetFunctionAddress(p,this.location)}))).codegen(e)}}generateDefaultConstructor(e){const t=this.identifier.getShortName(e),i=this.identifier.getFullName(e);null===e.scopeManager.lookup(i+"::#"+t)&&new m.ConstructorDeclaration(this.location,this.identifier,new d.ParameterList(this.location),[],new h.CompoundStatement(this.location,[])).codegen(e)}generateDefaultDestructor(e){const t=this.identifier.getShortName(e),i=this.identifier.getFullName(e);null===e.scopeManager.lookup(i+"::~"+t)&&new g.DestructorDeclaration(this.location,this.identifier,new h.CompoundStatement(this.location,[]),!1).codegen(e)}}exports.ClassSpecifier=y;class x extends t.ClassDirective{constructor(e,t){super(e),this.label=t}codegen(e){}declare(e,t){t.accessControl=n.getAccessControlFromString(this.label)}}exports.AccessControlLabel=x;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../declaration/declaration":"naS6","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../function/function_definition":"fR4/","../function/parameter_list":"5Hdw","../statement/compound_statement":"sqMO","../statement/expression_statement":"KH9n","./constructor_declaration":"5X0F","./destructor_declaration":"eCer"}],"WghI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node");class r extends t.Node{constructor(e,t,r,a){super(e),this.specifiers=t,this.declarator=r,this.init=a}getType(e){const t=this.specifiers.getType(e);return this.declarator?this.declarator.getType(e,t):t}getName(t){if(!this.declarator)throw new e.SyntaxError("this parameter contains no name",this);return this.declarator.getNameRequired().getPlainName(t)}getTemplateParameter(t){if(!this.declarator)throw new e.SyntaxError("unnamed TemplateParameter",this);return{name:this.declarator.getNameRequired().getPlainName(t),type:this.getType(t),init:this.init?this.init.evaluate(t):null}}}exports.ParameterDeclaration=r;
},{"../../common/error":"nOPH","../../common/node":"PoXi"}],"xErV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node"),t=require("../../type/template_type");class i extends e.Node{constructor(e,t,i){super(e),this.name=t,this.init=i}getTemplateParameter(e){return{name:this.name.getPlainName(e),type:t.TemplateType.instance,init:this.init?this.init.deduceType(e):null}}}exports.TypeParameter=i;
},{"../../common/node":"PoXi","../../type/template_type":"xWpI"}],"uXFO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node"),a=require("../../common/template"),i=require("../../type"),n=require("../../type/function_type"),r=require("../../type/template_type"),o=require("../class/class_specifier"),c=require("../function/function_definition"),s=require("../function/parameter_declaration"),l=require("../scope"),p=require("./template_deduce"),m=require("./type_parameter");class d extends t.ClassDirective{constructor(e,t,a){super(e),this.decl=t,this.args=a}getTemplateNames(){return this.decl instanceof c.FunctionDefinition?[this.decl.declarator.getNameRequired().getLastID().name]:[this.decl.identifier.getLastID().name]}declareClassTemplateSpecialization(t){if(!(this.decl instanceof o.ClassSpecifier))throw new e.InternalError("declareFunctionTemplateSpecialization(ctx: CompileContext): void {");const i=this.decl.identifier,n=i.getLookupName(t),r=t.scopeManager.lookup(n);if(!(r instanceof a.ClassTemplate))throw new e.SyntaxError(`${i.getLookupName(t)} is not a class template`,this);const c=i.fillInBlank(t,i.getLastID().args,r).map(e=>e.toString).join(",");r.specializationMap.set(c,this.decl)}declareFunctionTemplateSpecialization(t){if(!(this.decl instanceof c.FunctionDefinition))throw new e.InternalError("declareFunctionTemplateSpecialization(ctx: CompileContext): void {");const i=this.decl.declarator.getNameRequired(),r=i.deduceType(t);if(!(r instanceof n.UnresolvedFunctionOverloadType))throw new e.SyntaxError(`${i.getLookupName(t)} is not a function template`,this);const o=this.decl.deduceType(t),s=r.functionLookupResult;for(const n of s.functions)if(n instanceof a.FunctionTemplate){if(null!==p.deduceFunctionTemplateParameters(n,o,s.templateArguments,!1)){const t=s.templateArguments.map(e=>e.toString()).join(",");if(n.specializationMap.has(t))throw new e.SyntaxError("duplication Specialization",this);return void n.specializationMap.set(t,this.decl)}}throw new e.SyntaxError("no matched function template",this)}declareFunctionTemplate(t){if(!(this.decl instanceof c.FunctionDefinition))throw new e.InternalError("public declareFunctionTemplate(ctx: CompileContext): void {");const n=t.scopeManager.currentContext,r=n.scope.classType;t.scopeManager.enterUnnamedScope(!0),this.loadTemplateParameters(t);const o=null===r?this.decl.getFunctionConfig(t):this.decl.getMemberFunctionConfig(t,r),s=l.getShortName(o.name)+"@"+o.functionType.toMangledName(),p=t.scopeManager.getFullName(s),m=new a.FunctionTemplate(s,p,o,this.args.map(e=>e.getTemplateParameter(t)),this.decl,n,r?r.accessControl:i.AccessControl.Public);t.scopeManager.detachCurrentScope(),t.scopeManager.exitScope(),t.scopeManager.define(m.getIndexName(),m,this)}declareClassTemplate(t){if(!(this.decl instanceof o.ClassSpecifier))throw new e.InternalError(" public declareClassTemplate(ctx: CompileContext): void ");const n=t.scopeManager.currentContext,r=n.scope.classType;t.scopeManager.enterUnnamedScope(!0),this.loadTemplateParameters(t);const c=this.decl.identifier.getShortName(t),s=this.decl.identifier.getFullName(t),l=new a.ClassTemplate(c,s,t.fileName,this.args.map(e=>e.getTemplateParameter(t)),this.decl,n,r?r.accessControl:i.AccessControl.Public);t.scopeManager.detachCurrentScope(),t.scopeManager.exitScope(),t.scopeManager.define(c,l,this)}codegen(e){e.scopeManager.currentContext.scope.classType||(0!==this.args.length?this.decl instanceof o.ClassSpecifier?this.declareClassTemplate(e):this.declareFunctionTemplate(e):this.decl instanceof o.ClassSpecifier?this.declareClassTemplateSpecialization(e):this.declareFunctionTemplateSpecialization(e))}loadTemplateParameters(t){for(let a=0;a<this.args.length;a++){const i=this.args[a];if(i instanceof s.ParameterDeclaration)t.scopeManager.define(i.getName(t),i.getType(t),this);else{if(!(i instanceof m.TypeParameter))throw new e.InternalError("unreachable");t.scopeManager.define(i.name.getPlainName(t),new r.TemplateParameterPlaceHolderType(a),this)}}}declare(e,t){0!==this.args.length?this.decl instanceof o.ClassSpecifier?this.declareClassTemplate(e):this.declareFunctionTemplate(e):this.decl instanceof o.ClassSpecifier?this.declareClassTemplateSpecialization(e):this.declareFunctionTemplateSpecialization(e)}}exports.TemplateDeclaration=d;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/template":"+hnY","../../type":"Rt13","../../type/function_type":"VPTZ","../../type/template_type":"xWpI","../class/class_specifier":"8Ay1","../function/function_definition":"fR4/","../function/parameter_declaration":"WghI","../scope":"y+tL","./template_deduce":"atX+","./type_parameter":"xErV"}],"d2V6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node"),t=require("../class/type_name");class s extends e.Node{constructor(e,t){super(e),this.body=t}evaluate(e){return this.body instanceof t.TypeName?this.body.deduceType(e):this.body.evaluate(e)}}exports.TemplateArgument=s;
},{"../../common/node":"PoXi","../class/type_name":"lA6R"}],"+oRZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../wasm"),r=require("./statement");class n extends r.Statement{constructor(e){super(e)}codegen(r){if(0===r.currentFuncContext.breakStack.length)throw new e.SyntaxError("break is not in while/do-while/for",this);const n=r.currentFuncContext.breakStack[r.currentFuncContext.breakStack.length-1];r.submitStatement(new t.WBr(r.currentFuncContext.blockLevel-n,this.location))}}exports.BreakStatement=n;
},{"../../common/error":"nOPH","../../wasm":"Jo9c","./statement":"0pYg"}],"HBxv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./declarator");class r extends e.Declarator{constructor(e,r){super(e,null),this.identifier=r}getType(e,r){return this.declarator?this.declarator.getType(e,r):r}getName(){return this.identifier}}exports.IdentifierDeclarator=r;
},{"./declarator":"WYAj"}],"RKZ+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../common/node"),t=require("../../type/compound_type"),r=require("../expression/assignment_expression"),n=require("../expression/expression"),s=require("../expression/integer_constant"),o=require("../expression/subscript_expression"),a=require("../statement/expression_statement");class l extends i.Node{constructor(e,i){super(e),this.items=i}initialize(i,r,n){if(!(n instanceof t.ArrayType))throw new e.InternalError("InitializerList not support");this.initializeArray(i,r,n)}initializeArray(i,l,p){for(let c=0;c<this.items.length;c++){const u=this.items[c];if(u.initializer instanceof n.Expression)new a.ExpressionStatement(this.location,new r.AssignmentExpression(this.location,"=",new o.SubscriptExpression(this.location,l,s.IntegerConstant.fromNumber(this.location,c)),u.initializer)).codegen(i);else{if(!(p.elementType instanceof t.ArrayType))throw new e.SyntaxError("illegal inner initializer list",l);u.initializer.initializeArray(i,new o.SubscriptExpression(l.location,l,s.IntegerConstant.fromNumber(l.location,c)),p.elementType)}}}}exports.InitializerList=l;class p extends i.Node{constructor(e,i){super(e),this.initializer=i}}exports.InitializerListItem=p;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/compound_type":"ZWBU","../expression/assignment_expression":"Laai","../expression/expression":"TaUa","../expression/integer_constant":"aB1x","../expression/subscript_expression":"22up","../statement/expression_statement":"KH9n"}],"Wtzn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../common/node"),t=require("../../common/symbol"),r=require("../../type/class_type"),n=require("../../type/compound_type"),s=require("../../type/function_type"),a=require("../expression/assignment_expression"),o=require("../expression/expression"),l=require("../expression/identifier"),c=require("../expression/unary_expression"),p=require("../function/call_expression"),h=require("../function/function"),u=require("./function_declarator"),d=require("./initializer_list"),f=require("./object_initializer");class y extends i.Node{constructor(e,i,t){super(e),this.declarator=i,this.initializer=t}initialize(i,t){const n=this.declarator.getType(i,t.type),s=this.declarator.getNameRequired(),h=s.getShortName(i);if(null!=this.initializer){if(t.isExtern)throw new e.SyntaxError("extern vaiable could not have initializer",this);if(this.initializer instanceof d.InitializerList)this.initializer.initialize(i,s,n);else if(this.initializer instanceof f.ObjectInitializer)this.initializer.initialize(i,s,n);else{const e=new a.AssignmentExpression(this.location,"=",l.Identifier.fromString(this.location,h),this.initializer);e.isInitExpr=!0,o.recycleExpressionResult(i,this,e.codegen(i))}}else if(n instanceof r.ClassType){const e=n.fullName+"::#"+n.shortName,t=l.Identifier.fromString(this.location,e),r=new c.UnaryExpression(this.location,"&",l.Identifier.fromString(this.location,h)),s=new p.CallExpression(this.location,t,[r]);o.recycleExpressionResult(i,this,s.codegen(i))}}createVariable(i,r){const s=this.declarator.getNameRequired(),a=s.getShortName(i),o=s.getFullName(i),l=this.declarator.getType(i,r.type);let c=t.AddressType.STACK,p=0;if(i.scopeManager.isRoot()||r.isStatic)r.isExtern?(c=t.AddressType.MEMORY_EXTERN,p=o):null===this.initializer||l instanceof n.ArrayType?(c=t.AddressType.MEMORY_BSS,p=i.memory.allocBss(l.length)):(c=t.AddressType.MEMORY_DATA,p=i.memory.allocData(l.length));else{if(r.isExtern)throw new e.SyntaxError("local variable could not be extern:  "+s,this);c=t.AddressType.STACK,p=i.memory.allocStack(l.length)}return new t.Variable(a,o,i.fileName,l,c,p,r.accessControl)}declareGlobal(i,t,n){const a=this.declarator.getType(i,t.type);if(a instanceof r.ClassType&&!a.isComplete)throw new e.SyntaxError("cannot instance incomplete type",this);if(a instanceof s.FunctionType){if(!u.FunctionDeclarator.getFunctionDeclarator(this.declarator))throw new e.InternalError("function is not a functionDeclarator");h.declareFunction(i,{name:n,functionType:a,parameterNames:[],parameterInits:[],accessControl:t.accessControl,isLibCall:t.isLibCall},this)}else{if(i.scopeManager.currentContext.scope.classType&&!t.isStatic)return;const e=this.createVariable(i,t);t.isExtern?i.scopeManager.declare(n,e,this):i.scopeManager.define(n,e,this)}}declare(e,i){const t=this.declarator.getNameRequired().getLookupName(e);this.declareGlobal(e,i,t),e.scopeManager.currentContext.scope.classType||this.initialize(e,i)}declareInClass(i,t,r){const n=this.declarator.getType(i,t.type),s=this.declarator.getNameRequired(),a=s.getLookupName(i);if(t.isStatic){if(t.isExtern=!0,this.declareGlobal(i,t,a),this.initializer)throw new e.SyntaxError("the static field could only be initialize outside the class",this)}else{const t=s.getPlainName(i);if(this.initializer instanceof d.InitializerList)throw new e.SyntaxError("unsupport initial list",this);if(r.fields.filter(e=>e.name===t).length)throw new e.SyntaxError(`duplicated field name ${t}`,this);r.fields.push({name:t,type:n,startOffset:r.objectSize,initializer:this.initializer,accessControl:r.accessControl}),r.isUnion||(r.objectSize+=n.length,r.selfSize+=n.length)}}}exports.InitDeclarator=y;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../expression/assignment_expression":"Laai","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","./function_declarator":"yPyc","./initializer_list":"RKZ+","./object_initializer":"nUYN"}],"oimA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../common/node"),t=require("../../common/symbol"),i=require("../../type"),s=require("../../type/primitive_type"),n=require("../../wasm");class o extends r.Node{constructor(e,r,t){super(e),this.identifier=r,this.enumerators=t}codegen(r){if(null!=this.enumerators){let o=-1,u=0;for(const a of this.enumerators){if(o++,null===a.value)u=o;else{const t=a.value.codegen(r);if(t.expr=t.expr.fold(),!(t.expr instanceof n.WConst&&t.type instanceof s.IntegerType))throw new e.SyntaxError("enum value must be integer",this);u=parseInt(t.expr.constant)}const c=a.identifier.getPlainName(r),l=a.identifier.getFullName(r);r.scopeManager.declare(c,new t.Variable(c,l,r.fileName,s.PrimitiveTypes.int32,t.AddressType.CONSTANT,u,i.AccessControl.Public),this)}}return null!=this.identifier&&r.scopeManager.declare(this.identifier.getLookupName(r),s.PrimitiveTypes.int32,this),s.PrimitiveTypes.int32}}exports.EnumSpecifier=o;class u extends r.Node{constructor(e,r,t){super(e),this.identifier=r,this.value=t}}exports.Enumerator=u;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/primitive_type":"HxYe","../../wasm":"Jo9c"}],"1C2f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../common/node"),r=require("../../common/utils"),s=require("../class/class_specifier"),t=require("../class/enum_specifier"),n=require("../expression/identifier");class o extends i.Node{constructor(e,i){super(e),this.specifiers=i}getType(i){let o=null;const c=this.specifiers.filter(e=>"string"!=typeof e),f=this.specifiers.filter(e=>"string"==typeof e);if(0!==c.length){if(1!==c.length)throw new e.SyntaxError("illegal syntax",this);const r=c[0];if(r instanceof s.ClassSpecifier)o=r.codegen(i);else if(r instanceof n.Identifier)o=r.deduceType(i);else{if(!(r instanceof t.EnumSpecifier))throw new e.InternalError("unsupport type");o=r.codegen(i)}}else{const e=f.filter(r.isTypeSpecifier).sort();o=r.getPrimitiveTypeFromSpecifiers(e)}if(null==o)throw new e.SyntaxError("Illegal Return Type",this);return f.indexOf("const"),o}}exports.SpecifierList=o;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/utils":"pe9I","../class/class_specifier":"8Ay1","../class/enum_specifier":"oimA","../expression/identifier":"5fRK"}],"EZ2V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/primitive_type"),t=require("../../wasm"),n=require("../conversion"),i=require("../declaration/declaration"),o=require("../declaration/identifier_declarator"),r=require("../declaration/init_declartor"),s=require("../declaration/specifier_list"),c=require("../expression/binary_expression"),a=require("../expression/expression"),u=require("../expression/identifier"),l=require("../expression/integer_constant"),p=require("../expression/unary_expression"),d=require("./compound_statement"),m=require("./statement");class x extends m.Statement{constructor(e,t,n,i,o){super(e),this.init=t,this.test=n,this.update=i,this.body=o}codegen(o){o.enterScope(),null!==this.init&&(this.init instanceof i.Declaration?this.init.codegen(o):a.recycleExpressionResult(o,this,this.init.codegen(o)));const r=[],s=[],c=[],u=o.getStatementContainer();if(o.setStatementContainer(s),o.currentFuncContext.continueStack.push(o.currentFuncContext.blockLevel+3),o.currentFuncContext.breakStack.push(o.currentFuncContext.blockLevel+1),o.currentFuncContext.blockLevel+=3,this.body,d.CompoundStatement,this.body.codegen(o),o.currentFuncContext.blockLevel+=3,o.currentFuncContext.continueStack.pop(),o.currentFuncContext.breakStack.pop(),o.setStatementContainer(c),null!==this.test){const i=new p.UnaryExpression(this.location,"!",this.test).codegen(o);i.expr=n.doConversion(o,e.PrimitiveTypes.int32,i,this),i.type=e.PrimitiveTypes.int32,o.submitStatement(new t.WBrIf(1,i.expr.fold(),this.location))}o.submitStatement(new t.WBlock(s,this.location)),null!==this.update&&a.recycleExpressionResult(o,this,this.update.codegen(o)),o.submitStatement(new t.WBr(0,this.location)),o.setStatementContainer(r),o.submitStatement(new t.WLoop(c,this.location)),o.exitScope(this),o.setStatementContainer(u),o.submitStatement(new t.WBlock(r,this.location))}}function h(e,t,n){const a=u.Identifier.fromString(n.location,"i");return new x(n.location,new i.Declaration(n.location,new s.SpecifierList(n.location,["int"]),[new r.InitDeclarator(n.location,new o.IdentifierDeclarator(n.location,a),l.IntegerConstant.ZeroConstant)]),new c.BinaryExpression(n.location,"<",a,e),new p.UnaryExpression(n.location,"++",a),new d.CompoundStatement(n.location,t(a)))}exports.ForStatement=x,exports.getForLoop=h;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../conversion":"Gzzz","../declaration/declaration":"naS6","../declaration/identifier_declarator":"HBxv","../declaration/init_declartor":"Wtzn","../declaration/specifier_list":"1C2f","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","./compound_statement":"sqMO","./statement":"0pYg"}],"i2nu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../type/primitive_type"),n=require("../../wasm"),r=require("../scope"),s=require("./statement");class o extends s.Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}codegen(s){if(null===s.currentFuncContext.switchContext)throw new e.SyntaxError("case out of switch",this);const o={value:null,statements:[]};if(s.currentFuncContext.switchContext.cases.push(o),null!==this.test){const c=this.test.codegen(s);if(c.expr instanceof r.FunctionLookUpResult)throw new e.SyntaxError("func name not support",this);if(c.expr=c.expr.fold(),!(c.expr instanceof n.WConst&&c.type instanceof t.IntegerType))throw new e.SyntaxError("case value must be integer or enum",this);o.value=c.expr}s.setStatementContainer(o.statements),s.currentFuncContext.blockLevel--,this.body.codegen(s)}}exports.CaseStatement=o;
},{"../../common/error":"nOPH","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../scope":"y+tL","./statement":"0pYg"}],"jH/j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../common/error"),e=require("../../wasm"),n=require("./statement");class r extends n.Statement{constructor(t){super(t)}codegen(n){if(0===n.currentFuncContext.continueStack.length)throw new t.SyntaxError("continue is not in while/do-while/for",this);const r=n.currentFuncContext.continueStack[n.currentFuncContext.continueStack.length-1];n.submitStatement(new e.WBr(n.currentFuncContext.blockLevel-r,this.location))}}exports.ContinueStatement=r;
},{"../../common/error":"nOPH","../../wasm":"Jo9c","./statement":"0pYg"}],"kWWe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/node");class o extends t.ClassDirective{constructor(e,t){super(e),this.namespace=t}codegen(t){const o=t.scopeManager.root.getScopeOfLookupName(this.namespace.getLookupName(t)+"::a");if(!o)throw new e.SyntaxError(`${this.namespace.getFullName(t)} is not a namespace`,this);t.scopeManager.currentContext.activeScopes.push(o)}declare(e,t){this.codegen(e)}}exports.UsingNamespaceStatement=o;
},{"../../common/error":"nOPH","../../common/node":"PoXi"}],"QtXM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../type/primitive_type"),e=require("../../wasm"),n=require("../conversion"),o=require("./statement");class r extends o.Statement{constructor(t,e,n){super(t),this.body=e,this.test=n}codegen(o){const r=[],c=[],i=o.getStatementContainer();o.setStatementContainer(c),o.currentFuncContext.continueStack.push(o.currentFuncContext.blockLevel+2),o.currentFuncContext.breakStack.push(o.currentFuncContext.blockLevel+1),o.currentFuncContext.blockLevel+=2,this.body.codegen(o),o.currentFuncContext.blockLevel-=2,o.currentFuncContext.continueStack.pop(),o.currentFuncContext.breakStack.pop(),o.setStatementContainer(r),o.submitStatement(new e.WBlock(c,this.location));const s=this.test.codegen(o);s.expr=n.doConversion(o,t.PrimitiveTypes.int32,s,this),s.type=t.PrimitiveTypes.int32,o.submitStatement(new e.WBrIf(0,s.expr.fold(),this.location)),o.setStatementContainer(i),o.submitStatement(new e.WLoop(r,this.location))}}exports.DoWhileStatement=r;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../conversion":"Gzzz","./statement":"0pYg"}],"rN3j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../common/error"),e=require("../../common/symbol"),n=require("../../type/primitive_type"),r=require("../../wasm"),o=require("../../wasm"),s=require("../address"),c=require("../conversion"),i=require("../scope"),a=require("./case_statement"),u=require("./statement");class l extends u.Statement{constructor(t,e,n){super(t),this.discriminant=e,this.body=n}codegen(u){const l=u.currentFuncContext.switchContext,h=u.getStatementContainer(),x=[];if(u.setStatementContainer(x),u.currentFuncContext.switchContext={cases:[]},0!==x.length)throw new t.SyntaxError("illegal content in switch out side all case",this);const C=this.body.body.filter(t=>t instanceof a.CaseStatement).length;let w=C;u.currentFuncContext.breakStack.push(u.currentFuncContext.blockLevel),u.currentFuncContext.blockLevel+=C,this.body.codegen(u);const d=u.currentFuncContext.switchContext.cases.filter(t=>null===t.value);if(d.length>1)throw new t.SyntaxError("only 1 default case is support",this);if(1===d.length)for(let t=0;t<u.currentFuncContext.switchContext.cases.length;t++)if(null===u.currentFuncContext.switchContext.cases[t].value){w=t;break}const m=u.memory.allocStack(4),p=new s.WAddressHolder(m,e.AddressType.STACK,this.location),y=c.doValueTransform(u,this.discriminant.codegen(u),this);if(!(y.type instanceof n.IntegerType)||y.expr instanceof i.FunctionLookUpResult)throw new t.SyntaxError("illegal switch cond type",this);u.setStatementContainer(h),u.submitStatement(p.createStore(u,y.type,y.expr,!0));let f=new r.WBlock([],this.location);const S=p.createLoad(u,y.type);for(let t=0;t<u.currentFuncContext.switchContext.cases.length;t++){const e=u.currentFuncContext.switchContext.cases[t].value;null!==e&&f.body.push(new o.WBrIf(t,new r.WBinaryOperation(r.I32Binary.eq,S,e,this.location),this.location))}f.body.push(new o.WBr(w,this.location));for(let t=0;t<u.currentFuncContext.switchContext.cases.length;t++)f=new r.WBlock([f,...u.currentFuncContext.switchContext.cases[t].statements],this.location);u.submitStatement(f),u.currentFuncContext.switchContext=l}}exports.SwitchStatement=l;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../conversion":"Gzzz","../scope":"y+tL","./case_statement":"i2nu","./statement":"0pYg"}],"WuVV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/primitive_type"),t=require("../../wasm"),n=require("../conversion"),s=require("./statement");class i extends s.Statement{constructor(e,t,n,s){super(e),this.test=t,this.consequent=n,this.alternate=s}codegen(s){const i=[],o=[],r=this.test.codegen(s);r.expr=n.doConversion(s,e.PrimitiveTypes.int32,r,this),r.type=e.PrimitiveTypes.int32;const a=s.getStatementContainer();s.setStatementContainer(i),s.currentFuncContext.blockLevel++,this.consequent.codegen(s),null!==this.alternate&&(s.setStatementContainer(o),this.alternate.codegen(s)),s.setStatementContainer(a),s.currentFuncContext.blockLevel--,null!==this.alternate?s.submitStatement(new t.WIfElseBlock(r.expr.fold(),i,o,this.location)):s.submitStatement(new t.WIfElseBlock(r.expr.fold(),i,null,this.location))}}exports.IfStatement=i;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../conversion":"Gzzz","./statement":"0pYg"}],"B3kT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("./statement");class r extends t.Statement{constructor(e,t){super(e),this.label=t}codegen(t){throw new e.SyntaxError("goto statement is not support currently",this)}}exports.GotoStatement=r;
},{"../../common/error":"nOPH","./statement":"0pYg"}],"nRYT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./statement");class t extends e.Statement{constructor(e,t,s){super(e),this.label=t,this.body=s}codegen(e){this.body.codegen(e)}}exports.LabeledStatement=t;
},{"./statement":"0pYg"}],"R1ej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../type/primitive_type"),e=require("../../wasm"),n=require("../conversion"),o=require("../expression/unary_expression"),r=require("./statement");class i extends r.Statement{constructor(t,e,n){super(t),this.test=e,this.body=n}codegen(r){const i=[],s=[],c=r.getStatementContainer();r.setStatementContainer(s);const u=new o.UnaryExpression(this.location,"!",this.test).codegen(r);u.expr=n.doConversion(r,t.PrimitiveTypes.int32,u,this),u.type=t.PrimitiveTypes.int32,r.submitStatement(new e.WBrIf(1,u.expr.fold(),this.location)),r.currentFuncContext.continueStack.push(r.currentFuncContext.blockLevel+2),r.currentFuncContext.breakStack.push(r.currentFuncContext.blockLevel+1),r.currentFuncContext.blockLevel+=2,this.body.codegen(r),r.currentFuncContext.blockLevel-=2,r.currentFuncContext.breakStack.pop(),r.currentFuncContext.continueStack.pop(),r.submitStatement(new e.WBr(0,this.location)),r.setStatementContainer(i),r.submitStatement(new e.WLoop(s,this.location)),r.setStatementContainer(c),r.submitStatement(new e.WBlock(i,this.location))}}exports.WhileStatement=i;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../conversion":"Gzzz","../expression/unary_expression":"6Etb","./statement":"0pYg"}],"2HKu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../type/compound_type"),t=require("../../type/primitive_type"),n=require("../../wasm"),i=require("./declarator");class s extends i.Declarator{constructor(e,r,t,n,i,s){super(e,r),this.static=t,this.qualifiers=n,this.length=i,this.variableLength=s}getType(i,s){if(s instanceof r.ReferenceType)throw new e.SyntaxError("there is no array of reference",this);if(!this.length)return new r.ArrayType(s,0);const a=this.length.codegen(i);if(a.expr=a.expr.fold(),!(a.expr instanceof n.WConst))throw new e.SyntaxError("var length array is not support currently",this);if(!(a.type instanceof t.IntegerType))throw new e.SyntaxError("length of array must be integer",this);0!==this.qualifiers.length&&i.raiseWarning("unsupport array qualifier",this);const o=new r.ArrayType(s,parseInt(a.expr.constant));return this.declarator?this.declarator.getType(i,o):o}}exports.ArrayDeclarator=s;
},{"../../common/error":"nOPH","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./declarator":"WYAj"}],"blQX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../type/class_type"),t=require("../../type/compound_type"),n=require("../../type/primitive_type"),r=require("../declaration/array_declarator"),s=require("../expression/anonymous_expression"),o=require("../expression/assignment_expression"),a=require("../expression/binary_expression"),c=require("../expression/expression"),l=require("../expression/identifier"),p=require("../expression/integer_constant"),h=require("../function/call_expression"),m=require("../statement/expression_statement"),u=require("../statement/for_statement");class f extends c.Expression{constructor(e,i,t,n){super(e),this.name=i,this.arguments=t,this.placement=n,this.arraySize=null,this.name.declarator instanceof r.ArrayDeclarator&&(this.arraySize=this.name.declarator.length,this.name.declarator=null)}codegen(r){if(!r.isCpp())throw new e.LanguageError("new is noly support in c++",this);const f=this.deduceType(r);if(!(f instanceof t.PointerType))throw new e.SyntaxError("new must be pointer",this);const d=f.elementType,[g]=r.allocTmpVar(f,this);if(null!==this.arraySize){const[e]=r.allocTmpVar(n.PrimitiveTypes.int32,this),t=p.IntegerConstant.fromNumber(this.location,d.length),y=new o.AssignmentExpression(this.location,"=",l.Identifier.fromString(this.location,e),this.arraySize).codegen(r);c.recycleExpressionResult(r,this,y);const x=new h.CallExpression(this.location,l.Identifier.fromString(this.location,"::malloc_array"),[t,l.Identifier.fromString(this.location,e)]).codegen(r);x.type=f;const w=new o.AssignmentExpression(this.location,"=",l.Identifier.fromString(this.location,g),new s.AnonymousExpression(this.location,x)).codegen(r);if(c.recycleExpressionResult(r,this,w),d instanceof i.ClassType){const i=d.fullName+"::#"+d.shortName,t=l.Identifier.fromString(this.location,i);u.getForLoop(l.Identifier.fromString(this.location,e),e=>[new m.ExpressionStatement(this.location,new h.CallExpression(this.location,t,[new a.BinaryExpression(this.location,"+",l.Identifier.fromString(this.location,g),e)]))],this).codegen(r)}}else{const e=new h.CallExpression(this.location,l.Identifier.fromString(this.location,"::malloc"),[p.IntegerConstant.fromNumber(this.location,d.length)]).codegen(r);e.type=f;const t=new o.AssignmentExpression(this.location,"=",l.Identifier.fromString(this.location,g),new s.AnonymousExpression(this.location,e)).codegen(r);if(c.recycleExpressionResult(r,this,t),d instanceof i.ClassType){const e=d.fullName+"::#"+d.shortName,i=l.Identifier.fromString(this.location,e),t=new h.CallExpression(this.location,i,[l.Identifier.fromString(this.location,g),...this.arguments]).codegen(r);c.recycleExpressionResult(r,this,t)}}return l.Identifier.fromString(this.location,g).codegen(r)}deduceType(e){return new t.PointerType(this.name.deduceType(e))}}exports.NewExpression=f;
},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../declaration/array_declarator":"2HKu","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../function/call_expression":"sKlM","../statement/expression_statement":"KH9n","../statement/for_statement":"EZ2V"}],"DcaS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../type/class_type"),s=require("../expression/expression"),t=require("../expression/identifier"),n=require("../expression/unary_expression"),i=require("../function/call_expression");class o extends s.Expression{constructor(e,r,s){super(e),this.name=r,this.arguments=s}codegen(o){if(!o.isCpp())throw new e.LanguageError("constructor is noly support in c++",this);const c=this.deduceType(o);if(!(c instanceof r.ClassType))throw new e.SyntaxError("constructor call must be class type",this);const u=c.fullName+"::#"+c.shortName,a=t.Identifier.fromString(this.location,u),[p]=o.allocTmpVar(c,this),l=t.Identifier.fromString(this.location,p),h=new n.UnaryExpression(this.location,"&",l);return s.recycleExpressionResult(o,this,new i.CallExpression(this.location,a,[h,...this.arguments]).codegen(o)),l.codegen(o)}deduceType(e){return this.name.deduceType(e)}}exports.ConstructorCallExpression=o;
},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM"}],"kQ+o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),i=require("../../common/symbol"),t=require("../../type"),n=require("../../type/class_type"),o=require("../../type/compound_type"),s=require("../../type/primitive_type"),r=require("../../wasm"),a=require("../expression/anonymous_expression"),c=require("../expression/assignment_expression"),l=require("../expression/binary_expression"),p=require("../expression/expression"),h=require("../expression/identifier"),m=require("../expression/integer_constant"),f=require("../expression/unary_expression"),y=require("../function/call_expression"),d=require("../statement/expression_statement"),x=require("../statement/for_statement"),g=require("./member_expression");class u extends p.Expression{constructor(e,i,t){super(e),this.expr=i,this.isArrayDelete=t}codegen(i){if(!i.isCpp())throw new e.LanguageError("delete is only support in c++",this);return this.isArrayDelete?this.deleteArray(i):this.deleteObject(i),{type:s.PrimitiveTypes.void,isLeft:!0,expr:new r.WConst(r.WType.none,"1",this.location)}}deduceType(e){return s.PrimitiveTypes.void}deleteObject(s){const r=this.expr.deduceType(s);if(!(r instanceof o.PointerType))throw new e.SyntaxError(`you can only delete pointer, instead of ${r.toString()}`,this);if(r.elementType instanceof n.ClassType){const e=s.scopeManager.allocTmpVarName(),n=new i.Variable(e,e,this.location.fileName,r,i.AddressType.STACK,s.memory.allocStack(r.length),t.AccessControl.Public);s.scopeManager.define(e,n,this),new c.AssignmentExpression(this.location,"=",h.Identifier.fromString(this.location,e),this.expr).codegen(s);const o=new g.MemberExpression(this.location,h.Identifier.fromString(this.location,e),!0,h.Identifier.fromString(this.location,"~"+r.elementType.shortName));o.forceDynamic=!0,new d.ExpressionStatement(this.location,new y.CallExpression(this.location,o,[])).codegen(s),new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,"::free"),[h.Identifier.fromString(this.location,e)])).codegen(s)}else new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,"::free"),[this.expr])).codegen(s)}deleteArray(i){const t=this.expr.deduceType(i);if(!(t instanceof o.PointerType))throw new e.SyntaxError(`you can only delete pointer, instead of ${t.toString()}`,this);const[r]=i.allocTmpVar(t,this),[u]=i.allocTmpVar(new o.PointerType(s.PrimitiveTypes.int32),this),[w]=i.allocTmpVar(s.PrimitiveTypes.int32,this),E=new c.AssignmentExpression(this.location,"=",h.Identifier.fromString(this.location,r),this.expr).codegen(i);p.recycleExpressionResult(i,this,E);const S=h.Identifier.fromString(this.location,r).codegen(i);S.type=new o.PointerType(s.PrimitiveTypes.int32);const T=new c.AssignmentExpression(this.location,"=",h.Identifier.fromString(this.location,u),new l.BinaryExpression(this.location,"-",new a.AnonymousExpression(this.location,S),m.IntegerConstant.OneConstant)).codegen(i);p.recycleExpressionResult(i,this,T);const q=new c.AssignmentExpression(this.location,"=",h.Identifier.fromString(this.location,w),new f.UnaryExpression(this.location,"*",h.Identifier.fromString(this.location,u))).codegen(i);if(p.recycleExpressionResult(i,this,q),t.elementType instanceof n.ClassType){const e="~"+t.elementType.shortName,n=h.Identifier.fromString(this.location,e),o=e=>{const i=new g.MemberExpression(this.location,new l.BinaryExpression(this.location,"+",h.Identifier.fromString(this.location,r),e),!0,n);return i.forceDynamic=!0,i};x.getForLoop(h.Identifier.fromString(this.location,w),e=>[new d.ExpressionStatement(this.location,new y.CallExpression(this.location,o(e),[]))],this).codegen(i)}new d.ExpressionStatement(this.location,new y.CallExpression(this.location,h.Identifier.fromString(this.location,"::free"),[h.Identifier.fromString(this.location,u)])).codegen(i)}}exports.DeleteExpression=u;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../statement/expression_statement":"KH9n","../statement/for_statement":"EZ2V","./member_expression":"5MB0"}],"aVtj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),o=require("../../common/node"),s=require("../../type"),t=require("../../type/class_type");class r extends o.Node{constructor(e,o,s){super(e),this.accessControl=o,this.className=s}codegen(o){const r=s.getAccessControlFromString(this.accessControl),c=o.scopeManager.lookup(this.className.getLookupName(o));if(!(c instanceof t.ClassType))throw new e.SyntaxError(`you could not inherit type ${c}, which is not a class type`,this);if(!c.isComplete)throw new e.SyntaxError(`you could not inherit type ${c}, which is incomplete`,this);return{classType:c,accessControl:r}}}exports.BaseSpecifier=r;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type":"Rt13","../../type/class_type":"vaEy"}],"u3de":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/primitive_type"),t=require("../../wasm"),s=require("./constant");class i extends s.Constant{constructor(e,t,s,i){super(e),this.value=t,this.raw=s,this.suffix=i}codegen(e){const s=this.deduceType(e);return{type:s,expr:new t.WConst(s.toWType(),this.raw,this.location),isLeft:!1}}deduceType(t){return this.suffix&&"F"===this.suffix.toUpperCase()?e.PrimitiveTypes.float:e.PrimitiveTypes.double}}exports.FloatingConstant=i;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],"0Bjh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/compound_type"),r=require("../../type/primitive_type"),t=require("./expression"),s=require("../../wasm"),i=new e.PointerType(new r.CharType);class o extends t.Expression{constructor(e,r,t){super(e),this.prefix=r,this.value=t}codegen(e){const r=new s.WGetAddress(s.WMemoryLocation.DATA,this.location);return r.offset=e.memory.allocString(this.value),{type:i,expr:r,isLeft:!1}}deduceType(e){return i}}exports.StringLiteral=o;
},{"../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","./expression":"TaUa","../../wasm":"Jo9c"}],"BEs5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../conversion"),s=require("./expression");class r extends s.Expression{constructor(e,s,r){super(e),this.typeName=s,this.operand=r}codegen(s){const r=this.deduceType(s),t=this.operand.codegen(s);return{type:r,expr:e.doConversion(s,r,t,this,!0),isLeft:!1}}deduceType(e){return this.typeName.deduceType(e)}}exports.CastExpression=r;
},{"../conversion":"Gzzz","./expression":"TaUa"}],"INFt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),t=require("../../common/symbol"),s=require("../../type/class_type"),i=require("../../type/compound_type"),n=require("../../type/primitive_type"),o=require("../../wasm"),r=require("../address"),c=require("../conversion"),d=require("./expression");class p extends d.Expression{constructor(e,t,s,i){super(e),this.test=t,this.consequent=s,this.alternate=i}codegen(e){const d=c.doConversion(e,n.PrimitiveTypes.int32,this.test.codegen(e),this),p=this.deduceType(e),a=this.consequent.codegen(e),u=this.alternate.codegen(e);if(p instanceof s.ClassType){const s=new i.LeftReferenceType(p);return{type:s,expr:new r.WAddressHolder(new o.WConditionalExpression(d,c.doConversion(e,s,a,this,!1,!0),c.doConversion(e,s,u,this,!1,!0),this.location),t.AddressType.RVALUE,this.location),isLeft:!0}}return{type:p,expr:new o.WConditionalExpression(d,c.doConversion(e,p,a,this),c.doConversion(e,p,u,this),this.location),isLeft:!1}}deduceType(t){const s=c.doTypeTransfrom(this.consequent.deduceType(t)),i=c.doTypeTransfrom(this.alternate.deduceType(t));if(s instanceof n.ArithmeticType&&i instanceof n.ArithmeticType)return c.arithmeticDeduce(s,i);if(s.equals(i))return s;throw new e.SyntaxError("the type between conditional expression is not same",this)}}exports.ConditionalExpression=p;
},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../conversion":"Gzzz","./expression":"TaUa"}],"DzAR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../type/primitive_type"),t=require("../../wasm"),r=require("./constant");class i extends r.Constant{constructor(e,t,r){super(e),this.value=t,this.prefix=r}codegen(r){return{type:e.PrimitiveTypes.char,expr:new t.WConst(t.WType.i32,this.value.charCodeAt(0).toString(),this.location),isLeft:!1}}deduceType(t){return e.PrimitiveTypes.char}}exports.CharacterConstant=i;
},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],"W05x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../address"),s=require("./assignment_expression"),n=require("./binary_expression"),t=require("./expression"),o=require("./integer_constant");class i extends t.Expression{constructor(e,r,s){super(e),this.operand=r,this.decrement=s}codegen(i){const d=this.operand.codegen(i);if(!(d.isLeft&&d.expr instanceof r.WAddressHolder))throw new e.SyntaxError("your could not ++ a left value",this);return t.recycleExpressionResult(i,this,new s.AssignmentExpression(this.location,"=",this.operand,new n.BinaryExpression(this.location,this.decrement?"-":"+",this.operand,o.IntegerConstant.OneConstant)).codegen(i)),d}deduceType(e){return this.operand.deduceType(e)}}exports.PostfixExpression=i;
},{"../../common/error":"nOPH","../address":"JsMC","./assignment_expression":"Laai","./binary_expression":"sfIM","./expression":"TaUa","./integer_constant":"aB1x"}],"iMly":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node"),t=require("../scope");class c extends e.Directive{constructor(e,t,c){super(e),this.namespace=t,this.statements=c}codegen(e){const c=new t.Scope(this.namespace.getPlainName(e),e.scopeManager.currentContext.scope,e.isCpp());e.scopeManager.currentContext.scope.children.push(c),e.scopeManager.contextStack.push(e.scopeManager.currentContext),e.scopeManager.currentContext={scope:c,activeScopes:[...e.scopeManager.currentContext.activeScopes,c]},this.statements.map(t=>t.codegen(e)),e.exitScope(this)}}exports.NameSpaceBlock=c;
},{"../../common/node":"PoXi","../scope":"y+tL"}],"uS1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/error"),r=require("../../common/node"),t=require("../../type/compound_type"),o=require("./declarator");class n extends o.Declarator{constructor(e,r,t){super(e,r),this.pointer=t}getType(r,o){let n=this.pointer,i=o;for(;null!=n;){if(i instanceof t.ReferenceType)throw new e.SyntaxError("there is no pointer/reference of reference",this);if("*"===n.type)i=new t.PointerType(i);else if("&"===n.type){if(!r.isCpp())throw new e.LanguageError("reference is only supported in c++",this);i=new t.LeftReferenceType(i)}else if("&&"===n.type)throw new e.SyntaxError("unsupport right value reference",this);n=n.pointer}return this.declarator?this.declarator.getType(r,i):i}}exports.PointerDeclarator=n;class i extends r.Node{constructor(e,r,t,o){super(e),this.qualifiers=r,this.pointer=t,this.type=o}}exports.Pointer=i;
},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/compound_type":"ZWBU","./declarator":"WYAj"}],"lLUD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../common/node");class o extends e.Node{constructor(e,o){super(e),this.body=o}codegen(e){this.body.map(o=>o.codegen(e))}}exports.TranslationUnit=o;
},{"../../common/node":"PoXi"}],"1a9M":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("../common/node")),e(require("../codegen/template/function_template_instantiation")),e(require("../codegen/template/class_template_instantiation")),e(require("../codegen/template/template_declaration")),e(require("../codegen/template/template_argument")),e(require("../codegen/template/template_deduce")),e(require("../codegen/template/type_parameter")),e(require("../codegen/statement/break_statement")),e(require("../codegen/statement/expression_statement")),e(require("../codegen/statement/for_statement")),e(require("../codegen/statement/case_statement")),e(require("../codegen/statement/using_statement")),e(require("../codegen/statement/continue_statement")),e(require("../codegen/statement/using_namespace_statements")),e(require("../codegen/statement/dowhile_statement")),e(require("../codegen/statement/compound_statement")),e(require("../codegen/statement/statement")),e(require("../codegen/statement/switch_statement")),e(require("../codegen/statement/if_statement")),e(require("../codegen/statement/goto_statement")),e(require("../codegen/statement/labeled_statement")),e(require("../codegen/statement/while_statement")),e(require("../codegen/function/function")),e(require("../codegen/function/return_statement")),e(require("../codegen/function/function_definition")),e(require("../codegen/function/call_expression")),e(require("../codegen/class/new_expression")),e(require("../codegen/class/constructor_call_expression")),e(require("../codegen/class/class_specifier")),e(require("../codegen/class/member_expression")),e(require("../codegen/class/constructor_declaration")),e(require("../codegen/class/destructor_declaration")),e(require("../codegen/class/enum_specifier")),e(require("../codegen/class/delete_expression")),e(require("../codegen/class/destructor")),e(require("../codegen/class/base_specifier")),e(require("../codegen/class/type_name")),e(require("../codegen/expression/expression")),e(require("../codegen/expression/floating_constant")),e(require("../codegen/expression/assignment_expression")),e(require("../codegen/expression/identifier")),e(require("../codegen/expression/string_literal")),e(require("../codegen/expression/binary_expression")),e(require("../codegen/expression/constant")),e(require("../codegen/expression/unary_expression")),e(require("../codegen/expression/integer_constant")),e(require("../codegen/expression/cast_expression")),e(require("../codegen/expression/subscript_expression")),e(require("../codegen/expression/conditional_expression")),e(require("../codegen/expression/character_constant")),e(require("../codegen/expression/postfix_expression")),e(require("../codegen/expression/anonymous_expression")),e(require("../codegen/declaration/object_initializer")),e(require("../codegen/declaration/declarator")),e(require("../codegen/declaration/namepsace_block")),e(require("../codegen/declaration/function_declarator")),e(require("../codegen/declaration/identifier_declarator")),e(require("../codegen/declaration/specifier_list")),e(require("../codegen/declaration/declaration")),e(require("../codegen/declaration/initializer_list")),e(require("../codegen/declaration/init_declartor")),e(require("../codegen/function/parameter_declaration")),e(require("../codegen/declaration/array_declarator")),e(require("../codegen/declaration/pointer_declarator")),e(require("../codegen/function/parameter_list")),e(require("../codegen/declaration/translation_unit"));
},{"../common/node":"PoXi","../codegen/template/function_template_instantiation":"4WIk","../codegen/template/class_template_instantiation":"QzhC","../codegen/template/template_declaration":"uXFO","../codegen/template/template_argument":"d2V6","../codegen/template/template_deduce":"atX+","../codegen/template/type_parameter":"xErV","../codegen/statement/break_statement":"+oRZ","../codegen/statement/expression_statement":"KH9n","../codegen/statement/for_statement":"EZ2V","../codegen/statement/case_statement":"i2nu","../codegen/statement/using_statement":"0eiW","../codegen/statement/continue_statement":"jH/j","../codegen/statement/using_namespace_statements":"kWWe","../codegen/statement/dowhile_statement":"QtXM","../codegen/statement/compound_statement":"sqMO","../codegen/statement/statement":"0pYg","../codegen/statement/switch_statement":"rN3j","../codegen/statement/if_statement":"WuVV","../codegen/statement/goto_statement":"B3kT","../codegen/statement/labeled_statement":"nRYT","../codegen/statement/while_statement":"R1ej","../codegen/function/function":"rsVP","../codegen/function/return_statement":"k1ya","../codegen/function/function_definition":"fR4/","../codegen/function/call_expression":"sKlM","../codegen/class/new_expression":"blQX","../codegen/class/constructor_call_expression":"DcaS","../codegen/class/class_specifier":"8Ay1","../codegen/class/member_expression":"5MB0","../codegen/class/constructor_declaration":"5X0F","../codegen/class/destructor_declaration":"eCer","../codegen/class/enum_specifier":"oimA","../codegen/class/delete_expression":"kQ+o","../codegen/class/destructor":"ef0b","../codegen/class/base_specifier":"aVtj","../codegen/class/type_name":"lA6R","../codegen/expression/expression":"TaUa","../codegen/expression/floating_constant":"u3de","../codegen/expression/assignment_expression":"Laai","../codegen/expression/identifier":"5fRK","../codegen/expression/string_literal":"0Bjh","../codegen/expression/binary_expression":"sfIM","../codegen/expression/constant":"x+Tr","../codegen/expression/unary_expression":"6Etb","../codegen/expression/integer_constant":"aB1x","../codegen/expression/cast_expression":"BEs5","../codegen/expression/subscript_expression":"22up","../codegen/expression/conditional_expression":"INFt","../codegen/expression/character_constant":"DzAR","../codegen/expression/postfix_expression":"W05x","../codegen/expression/anonymous_expression":"/aCp","../codegen/declaration/object_initializer":"nUYN","../codegen/declaration/declarator":"WYAj","../codegen/declaration/namepsace_block":"iMly","../codegen/declaration/function_declarator":"yPyc","../codegen/declaration/identifier_declarator":"HBxv","../codegen/declaration/specifier_list":"1C2f","../codegen/declaration/declaration":"naS6","../codegen/declaration/initializer_list":"RKZ+","../codegen/declaration/init_declartor":"Wtzn","../codegen/function/parameter_declaration":"WghI","../codegen/declaration/array_declarator":"2HKu","../codegen/declaration/pointer_declarator":"uS1s","../codegen/function/parameter_list":"5Hdw","../codegen/declaration/translation_unit":"lLUD"}],"zrEC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="{\n    function newPosition(position) {\n        // For compatibility with source map.\n        return new AST.Position(position.offset, position.line, position.column - 1);\n    }\n\n    function getLocation() {\n        const location_ = location();\n        return new AST.SourceLocation(options.fileName, text(), newPosition(location_.start), newPosition(location_.end));\n    }\n\n    function extractOptional(optional, index) {\n        return optional ? optional[index] : null;\n    }\n\n    function extractList(list, index) {\n        return list.map(element => element[index]);\n    }\n\n    function buildList(head, tail, index) {\n        return [head].concat(extractList(tail, index));\n    }\n\n    function buildBinaryExpression(head, tail) {\n        return tail.reduce((result, element) => new AST.BinaryExpression(getLocation(), element[1], result, element[3]), head);\n    }\n\n    /**\n     * @param {string} hexSequence\n     */\n    function parseUniversalCharacter(hexSequence) {\n        // SAFE_NUMBER: At most 0xFFFFFFFF.\n        const charCode = Number.parseInt(hexSequence, 16);\n        // The disallowed characters are the characters in the basic character set and the code positions reserved by\n        // ISO/IEC 10646 for control characters, the character DELETE, and the S-zone (reserved for use by UTF16).\n        if ((charCode >= 0x0000 && charCode <= 0x001F)\n                || (charCode >= 0x007F && charCode <= 0x009F)\n                || (charCode >= 0xD800 && charCode <= 0xDFFF)) {\n            error('Disallowed character in universal character name: 0x' + hexSequence, getLocation());\n        }\n        return String.fromCharCode(charCode);\n    }\n\n    let scopeRoot = { parent: null, names: new Map() };\n    let currScope = scopeRoot;\n    let globalMap = new Map();\n\n    function enterScope() {\n        currScope = { parent: currScope, names: new Map() };\n    }\n\n    function exitScope() {\n        currScope = currScope.parent;\n    }\n\n    let ID_NAME = 0;\n    let TYPE_NAME = 1;\n    let TEMPLATE_FUNC_NAME = 2;\n    let TEMPLATE_CLASS_NAME = 3;\n\n    function getTypeOfName(name, type) {\n        let c = currScope;\n        while(c != null) {\n            if (c.names.has(name)) {\n                return c.names.get(name);\n            }\n            c = c.parent;\n        }\n        if(globalMap.has(name)){\n            return globalMap.get(name);\n        }\n        return ID_NAME;\n    }\n}\nStart = TranslationUnit\nClassSpecifier\n    = classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier _ ih:BaseClause? _ ScopeStart _ declarations:StructDeclarationList? _ ScopeEnd {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, declarations || [] , ih || []);\n    }\n    / classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, null, []);\n    }\n\nClassKeyword\n    = ('struct' / 'class' / 'union') !IdentifierPart {\n        return text();\n    }\n\nBaseSpecifier\n    = lb:AccessControlKey? _ className:TypeIdentifier{\n        return new AST.BaseSpecifier(getLocation(), lb || \"\", className);\n    }\n\nBaseClause\n    = ':' _ head:BaseSpecifier tail:(_ ',' _ BaseSpecifier)* {\n        return buildList(head, tail, 1);\n    }\n\nStructDeclarationList\n    = head:StructDeclaration tail:(_ StructDeclaration)* {\n        return buildList(head, tail, 1);\n    }\n\nAccessControlKey = 'public' / 'private' / 'protect'\n\nStructDeclaration\n    = id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ body:CompoundStatement{\n        return new AST.ConstructorDeclaration(getLocation(), id, param || new AST.ParameterList(getLocation()), initList || [], body);\n    }\n    / id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ ';'{\n        return new AST.ConstructorDeclaration(getLocation(), id, param || new AST.ParameterList(getLocation()), initList || [], nul);\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ body:CompoundStatement{\n        return new AST.DestructorDeclaration(getLocation(), id, body, isVirtual === \"virtual\");\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ ';'{\n        return new AST.DestructorDeclaration(getLocation(), id, null, isVirtual === \"virtual\");\n    }\n    / label:AccessControlKey _ ':' {\n        return new AST.AccessControlLabel(getLocation(), label);\n    }\n    / decl:Declaration {\n        return decl;\n    }\n\nConstructorInitializeList\n    = ':' _ head:ConstructorInitializeItem _ tail:(_ ',' _ ConstructorInitializeItem)* {\n         return buildList(head, tail, 3);\n    }\n\nConstructorInitializeItem\n    = key:Identifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, false);\n    }\n    / key:TypeIdentifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, true);\n    }\n\n\nStructDeclaratorList\n    = head:StructDeclarator tail:(_ ',' _ StructDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nStructDeclarator\n    = ':' _ width:ConstantExpression {\n        return new AST.StructDeclarator(getLocation(), null, width, null);\n    }\n    / declarator:Declarator _ initDeclarators:InitDeclaratorList? width:(_ ':' _ ConstantExpression)? {\n        return new AST.StructDeclarator(getLocation(), declarator, extractOptional(width, 3), initDeclarators);\n    }\n\nEnumSpecifier\n    = 'enum' !IdentifierPart _ identifier:Identifier? _ '{' _ enumerators:EnumeratorList _ ','? _ &!'}' {\n        return new AST.EnumSpecifier(getLocation(), identifier, enumerators);\n    }\n    / 'enum' !IdentifierPart _ identifier:Identifier {\n        return new AST.EnumSpecifier(getLocation(), identifier, null);\n    }\n\nEnumeratorList\n    = head:Enumerator tail:(_ comma:','? _ enumerator:Enumerator)* {\n        return buildList(head, tail, 3);\n    }\n\n// MODIFICATION: EnumerationConstant => Identifier\nEnumerator\n    = identifier:Identifier value:(_ '=' _ ConstantExpression)? {\n        return new AST.Enumerator(getLocation(), identifier, extractOptional(value, 3));\n    }\n\n\nConstant\n    = FloatingConstant\n    / IntegerConstant\n    / CharacterConstant\n\nIntegerConstant\n    // REORDER: HexadecimalConstant / OctalConstant\n    = integer:(constant:(DecimalConstant / HexadecimalConstant / OctalConstant) {\n        return {\n            base: constant.base,\n            value: constant.value,\n            raw: text()\n        }\n        }) suffix:$IntegerSuffix? {\n        if (suffix.toLowerCase().includes('u')) {\n            integer.value.unsigned = true;\n        }\n        return new AST.IntegerConstant(getLocation(), integer.base, integer.value, integer.raw, suffix || null);\n    }\n\nDecimalConstant\n    = NonzeroDigit Digit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 10,\n            value: Long.fromString(text())\n        };\n    }\n\nOctalConstant\n    = '0' digits:$OctalDigit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 8,\n            value: digits.length ? Long.fromString(digits, 8) : Long.ZERO\n        };\n    }\n\nHexadecimalConstant\n    = HexadecimalPrefix digits:$HexadecimalDigit+ {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 16,\n            value: Long.fromString(digits, 16)\n        };\n    }\n\nFloatingConstant\n    = DecimalFloatingConstant\n\nDecimalFloatingConstant\n    = raw:$((FractionalConstant ExponentPart?) / (DigitSequence ExponentPart)) suffix:$FloatingSuffix? {\n        return new AST.FloatingConstant(getLocation(), Number.parseFloat(raw), raw, suffix || null);\n    }\n\nHexadecimalFractionalConstant\n    = HexadecimalDigitSequence '.' HexadecimalDigitSequence?\n    / '.' HexadecimalDigitSequence\n\nCharacterConstant\n    = prefix:$[LuU]? '\\'' value:CCharSequence '\\'' {\n        return new AST.CharacterConstant(getLocation(), value, prefix || null);\n    }\n\nEncodingPrefix\n    = 'u8'\n    / 'u'\n    / 'U'\n    / 'L'\n\nUniversalCharacterName\n    = '\\\\u' hexQuad:$HexQuad {\n        return parseUniversalCharacter(hexQuad);\n    }\n    / '\\\\U' hexQuads:$(HexQuad HexQuad) {\n        return parseUniversalCharacter(hexQuads);\n    }\n\nHexQuad\n    = HexadecimalDigit HexadecimalDigit HexadecimalDigit HexadecimalDigit\n\nStringLiteral\n    = head:SingleStringLiteral tail:(_ SingleStringLiteral)* {\n        return buildList(head, tail, 1).reduce((left, right) => {\n            let prefix = null;\n            if (left.prefix !== right.prefix) {\n                if (left.prefix) {\n                    if (right.prefix) {\n                        error('Unsupported non-standard concatenation of string literals');\n                    } else {\n                        prefix = left.prefix;\n                    }\n                } else {\n                    prefix = right.prefix;\n                }\n            } else {\n                prefix = left.prefix;\n            }\n            const value = left.value.slice(0, -1) + right.value;\n            return new AST.StringLiteral(getLocation(), prefix, value);\n        });\n    }\n\nSingleStringLiteral\n    = prefix:$EncodingPrefix? '\"' value:SCharSequence? &!'\"' {\n        return new AST.StringLiteral(getLocation(), prefix || null, (value || '') + '\\0');\n    }\n\nSCharSequence\n    = chars:SChar+ {\n        return chars.join('');\n    }\n\nSChar\n    = [^\"\\\\\\n] // any member of the source character set except the double-quote \", backslash \\, or new-line character\n    / EscapeSequence\n\nUnaryOperator\n    = [*+\\-~!]\n    / SingleAnd\n\nCCharSequence\n    = chars:CChar+ {\n        return chars.join('');\n    }\n\nCChar\n    = [^'\\\\\\n] // any member of the source character set except the single-quote ', backslash \\, or new-line character\n    / EscapeSequence\n\nEscapeSequence\n    = SimpleEscapeSequence\n    / OctalEscapeSequence\n    / HexadecimalEscapeSequence\n    / UniversalCharacterName\n\nSimpleEscapeSequence\n    = ('\\\\\\''\n    / '\\\\\"'\n    / '\\\\?'\n    / '\\\\\\\\') {\n        return text().charAt(1);\n    }\n    / '\\\\a' {\n        return '\\x07';\n    }\n    / '\\\\b' {\n        return '\\b';\n    }\n    / '\\\\f' {\n        return '\\f';\n    }\n    / '\\\\n' {\n        return '\\n';\n    }\n    / '\\\\r' {\n        return '\\r';\n    }\n    / '\\\\t' {\n        return '\\t';\n    }\n    / '\\\\v' {\n        return '\\v';\n    }\n\nOctalEscapeSequence\n    = '\\\\' digits:$(OctalDigit OctalDigit? OctalDigit?) {\n        // SAFE_NUMBER: At most 0777.\n        return String.fromCharCode(Number.parseInt(digits, 8));\n    }\n\nHexadecimalEscapeSequence\n    = '\\\\x' digits:$HexadecimalDigit+ {\n        // TODO: Guard against very long digits.\n        return String.fromCharCode(Number.parseInt(digits, 16));\n    }\n\nBinaryExponentPart\n    = [pP] Sign? DigitSequence\n\nHexadecimalDigitSequence\n    = HexadecimalDigit+\n\nFloatingSuffix\n    = [flFL]\n\nFractionalConstant\n    = DigitSequence '.' DigitSequence?\n    / '.' DigitSequence\n\nExponentPart\n    = [eE] Sign? DigitSequence\n\nSign\n    = [+\\-]\n\nDigitSequence\n    = Digit+\n\nTranslationUnit\n    = list:DeclarationList{\n        return new AST.TranslationUnit(getLocation(), list);\n    }\n\nDeclarationList\n    = _ head:Declaration tail:(_ Declaration)* _ {\n        return buildList(head, tail, 1);\n    }\n\nDeclaration\n    = BlockDeclaration\n    / FunctionDefinition\n    / NamespaceDefinition\n    / TemplateDeclaration\n    / ExplicitInstantiation\n    / DeclarationMissingSemicolon\n\nBlockDeclaration\n    = SimpleDeclaration\n    / UsingStatements\n\nBlockDeclarationList\n    = head:BlockDeclaration tail:(_ BlockDeclaration)*{\n        return buildList(head, tail, 1);\n    }\n\nNamespaceDefinition\n    = 'namespace' _ name:Identifier _ '{' _ list:DeclarationList? _'}'{\n        currScope.names.set(name.getLastID().name, TYPE_NAME);\n        return new AST.NameSpaceBlock(getLocation(), name, list || []);\n    }\n\nSimpleDeclaration\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList? _ ';' {\n        const declaration = new AST.Declaration(getLocation(), specifiers, initDeclarators || []);\n        declaration.getTypedefName().map(name => currScope.names.set(name, TYPE_NAME));\n        return declaration;\n    }\n\nDeclarationSpecifiers\n    = head:DeclarationSpecifier tail:(_ DeclarationSpecifier)* {\n        return new AST.SpecifierList(getLocation(), buildList(head, tail, 1));\n    }\n\nDeclarationSpecifier\n    = StorageClassSpecifier\n    / FunctionSpecifier\n    / TypeSpecifier\n\nTypeSpecifierList\n    = head:TypeSpecifier tail:( _ TypeSpecifier)* {\n        return buildList(head, tail, 3);\n    }\n\nTypeSpecifier\n    = ClassSpecifier\n    / EnumSpecifier\n    / SimpleTypeSpecifier\n    / TypenameSpecifier\n    / TypeQualifier\n\nSimpleTypeSpecifier\n    = PrimitiveTypeSpecifier\n    / TypeIdentifier\n\nTypenameSpecifier\n    = 'typename' id:TypeIdentifier{\n        return id;\n    }\n\nTypeQualifier\n    = ('const' / 'volatile') !IdentifierPart {\n        return text();\n    }\n\nTypeQualifierList\n    = head:TypeQualifier tail:(_ TypeQualifier)* {\n        return buildList(head, tail, 1);\n    }\n\nDeclarator\n    = pointer:(Pointer _)? declarator:DirectDeclarator {\n        return pointer ? new AST.PointerDeclarator(getLocation(), declarator, extractOptional(pointer, 0)) : declarator;\n    }\n\nDirectDeclarator\n    = head:(identifier:Identifier {\n        return new AST.IdentifierDeclarator(getLocation(), identifier);\n    } / '(' _ declarator:Declarator _ ')' {\n        return declarator;\n    } ) tail:(_ (\n        '[' _ length:AssignmentExpression? _ &!']' {\n            return {\n                location: getLocation(),\n                type: AST.ArrayDeclarator,\n                arguments: [false, [], length, false]\n            };\n        }\n        / '(' _ parameters: ParameterList? _ ')' {\n            return {\n                location: getLocation(),\n                type: AST.FunctionDeclarator,\n                arguments: [parameters || new AST.ParameterList(getLocation())]\n            }\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nPointer\n    = '*' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '*');\n    }\n    /\n    '&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&');\n    }\n    /\n    '&&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&&');\n    }\n\nDeclarationWithoutSemicolon\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList?\n\nDeclarationMissingSemicolon\n    = decl:DeclarationWithoutSemicolon {\n        error('Missing \\';\\' at end of declaration');\n    }\n\nFunctionSpecifier = ('inline' / '__libcall')\n\nInitDeclaratorList\n    = head:InitDeclarator tail:(_ ',' _ InitDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nInitDeclarator\n    = declarator:Declarator initializer:CppInitializer? {\n        return new AST.InitDeclarator(getLocation(), declarator, initializer || null);\n    }\n    \nCppInitializer\n    = _'=' _ init:Initializer{\n        return init;\n    }\n    / _ '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return new AST.ObjectInitializer(getLocation(),  arguments_ || []);  \n    }\n\n\nParameterList\n    = head:ParameterDeclaration tail:(_ ',' _ ParameterDeclaration)* ellipsis:(_ ',' _ '...')? {\n        return new AST.ParameterList(getLocation(), buildList(head, tail, 3), !!ellipsis);\n    }\n\nParameterDeclaration\n    = specifiers:DeclarationSpecifiers _ declarator:(Declarator / AbstractDeclarator)? init:( _ '=' _ AssignmentExpression)?{\n        return new AST.ParameterDeclaration(getLocation(), specifiers, declarator, init ? init[3] : null);\n    }\n\nIdentifierList\n    = head:Identifier tail:(_ ',' _ Identifier)* {\n        return buildList(head, tail, 3);\n    }\n\n\nInitializer\n    = AssignmentExpression\n    / '{' _ initializerList:InitializerList _ ','? _ &!'}' {\n        return initializerList;\n    }\n\nInitializerList\n    = head:InitializerListItem tail:(_ ',' _ InitializerListItem)* {\n        return new AST.InitializerList(getLocation(), buildList(head, tail, 3));\n    }\n\nInitializerListItem\n    = designators:(Designation _)? initializer:Initializer {\n        return new AST.InitializerListItem(getLocation(), initializer);\n    }\n\nDesignation\n    = designators:DesignatorList _ '=' {\n        return designators;\n    }\n\nDesignatorList\n    = head:Designator tail:(_ Designator)* {\n        return buildList(head, tail, 1);\n    }\n\nDesignator\n    = '[' _ subscript:ConstantExpression _ &!']' {\n        return new AST.SubscriptDesignator(getLocation(), subscript);\n    }\n    / '.' _ member:Identifier {\n        return new AST.MemberDesignator(getLocation(), member);\n    }\n\nFunctionDefinition\n    = specifiers:DeclarationSpecifiers _ declarator:Declarator _ body:CompoundStatement {\n        return new AST.FunctionDefinition(getLocation(), specifiers, declarator, body);\n    }\n\nNewTypeName\n    =  specifierQualifiers:DeclarationSpecifiers _ declarator:NewDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nTypeName\n    = specifierQualifiers:DeclarationSpecifiers _ declarator:AbstractDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nNewDeclarator\n    = pointer:Pointer declarator:(_ DirectNewDeclarator)? {\n        return new AST.PointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectNewDeclarator {\n        return declarator;\n    }\n\nAbstractDeclarator\n    = pointer:Pointer declarator:(_ DirectAbstractDeclarator)? {\n        return new AST.PointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectAbstractDeclarator {\n        return declarator;\n    }\n\nDirectNewDeclarator\n    = head:(element:DirectNewDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectNewDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectAbstractDeclarator\n    = head:(\n        '(' _ declarator:AbstractDeclarator _ ')' {\n            return declarator;\n        }\n        / element:DirectAbstractDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectAbstractDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectNewDeclaratorElement\n    = '[' _ length:AssignmentExpression? _ &!']' {\n        return {\n            location: getLocation(),\n            type: AST.ArrayDeclarator,\n            arguments: [false, [], length, false]\n        };\n    }\n\nDirectAbstractDeclaratorElement\n    = '(' _ parameters:ParameterList? _ ')' {\n        return {\n            location: getLocation(),\n            type: AST.FunctionDeclarator,\n            arguments: [parameters || new AST.ParameterList(getLocation())]\n        }\n    }\n    / DirectNewDeclaratorElement\nTryBlock\n    = 'try' _ body:CompoundStatement _ handlers:HandlerSeq {\n        return new AST.TryBlock(getLocation(), body, handlers);\n    }\n\nHandlerSeq\n    = head:ExceptionHandler tail:(_ ExceptionHandler)* {\n        return buildList(head, tail, 1);\n    }\n\nExceptionHandler\n    = 'catch' _ '(' _ decl:ExceptionDeclaration _ ')' _ body:CompoundStatement {\n        return new AST.ExceptionHandler(getLocation(), decl, body);\n    }\n\nExceptionDeclaration\n \t= specifiers:DeclarationSpecifiers _ declarator:Declarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n \t/ specifiers:DeclarationSpecifiers _ declarator:AbstractDeclarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n\nThrowExpression\n \t= 'throw' _ body:AssignmentExpression? {\n \t    return new AST.ThrowExpression(getLocation(), body);\n \t}\nExpression\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAssignmentExpression\n    = left:UnaryExpression _ operator:AssignmentOperator _ right:AssignmentExpression {\n        return new AST.AssignmentExpression(getLocation(), operator, left, right);\n    }\n    / ConditionalExpression\n\nConditionalExpression\n    = test:LogicalOrExpression _ '?' _ consequent:Expression _ &!':' _ alternate:ConditionalExpression {\n        return new AST.ConditionalExpression(getLocation(), test, consequent, alternate);\n    }\n    / LogicalOrExpression\n\n\nConstructorCallExpression\n    = name:TypeIdentifier  _ '(' _ arguments_:ArgumentExpressionList? _ &!')' {\n        return new AST.ConstructorCallExpression(getLocation(), name, arguments_ || []);\n    }\n\nPostfixExpression\n    = head:( PrimaryExpression / ConstructorCallExpression ) tail:(_ (\n        '[' _ subscript:Expression _ &!']' {\n            return {\n                type: AST.SubscriptExpression,\n                arguments: [subscript]\n            };\n        }\n        / '(' _ arguments_:ArgumentExpressionList? _ ')' {\n            return {\n                type: AST.CallExpression,\n                arguments: [arguments_ || []]\n            };\n        }\n        / operator:('.' / '->') _ member:Identifier {\n            return {\n                type: AST.MemberExpression,\n                arguments: [operator === '->', member]\n            };\n        }\n        / operator:('++' / '--') {\n            return {\n                type: AST.PostfixExpression,\n                arguments: [operator === '--']\n            };\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(getLocation(), result, ...element.arguments), head);\n    }\n\nArgumentExpressionList\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildList(head, tail, 3);\n    }\n\nUnaryExpression\n    = operator:('++' / '--') _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:UnaryOperator _ operand:CastExpression { //Hack: when parse '&' operator, the operator variable will be array of 2 elements\n        return new AST.UnaryExpression(getLocation(), operator[0], operand);\n    }\n    / operator:'sizeof' !IdentifierPart _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:'sizeof' _ '(' _ operand:TypeName _ ')' {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / PostfixExpression\n    / NewExpression\n    / DeleteExpression\n\nCastExpression\n    = '(' _ typeName:TypeName _ ')' _ operand:CastExpression {\n        return new AST.CastExpression(getLocation(), typeName, operand);\n    }\n    / UnaryExpression\n\nMultiplicativeExpression\n    = head:CastExpression tail:(_ [*/%] _ CastExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAdditiveExpression\n    = head:MultiplicativeExpression tail:(_ [+\\-] _ MultiplicativeExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nShiftExpression\n    = head:AdditiveExpression tail:(_ ('<<' / '>>') _ AdditiveExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nRelationalExpression\n    = head:ShiftExpression tail:(_ ('<=' / '>=' / '<' / '>') _ ShiftExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nEqualityExpression\n    = head:RelationalExpression tail:(_ ('==' / '!=') _ RelationalExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAndExpression\n    = head:EqualityExpression tail:(_ SingleAnd _ EqualityExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nExclusiveOrExpression\n    = head:AndExpression tail:(_ '^' _ AndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nInclusiveOrExpression\n    = head:ExclusiveOrExpression tail:(_ '|' _ ExclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalAndExpression\n    = head:InclusiveOrExpression tail:(_ AndAnd _ InclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalOrExpression\n    = head:LogicalAndExpression tail:(_ '||' _ LogicalAndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nConstantExpression\n    = ConditionalExpression\n\nPrimaryExpression\n    = Identifier\n    / Constant\n    / StringLiteral\n    / '(' _ expression:Expression _ &!')' {\n        return expression;\n    }\n\n\n\nNewPlacement\n    = '(' _  item:AssignmentExpression _ ')' {\n        return item;\n    }\n\nNewInitializer\n    = '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return arguments_;\n    }\n\nNewExpression\n    = '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ type:NewTypeName _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n    / '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ '(' _ name:TypeName _ ')' _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n\nDeleteExpression\n    = 'delete' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, false);\n    }\n    / 'delete[]' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, true);\n    }\nId\n    = !Keyword head:IdentifierNondigit tail:IdentifierPart* {\n        return new AST.SingleIdentifier(getLocation(), head + tail.join(''), AST.IDType.ID, []);\n    }\n\nSingleIdentifier\n    = id:Id &{\n        return getTypeOfName(id.name) === ID_NAME;\n    } {\n        return id;\n    }\n    / 'operator' _ ope:OverloadOperator {\n        return new AST.SingleIdentifier(getLocation(), \"#\" + ope, AST.IDType.ID, []);\n    }\n    / '~' name:TypeIdentifier {\n        const result = name.clone();\n        result.getLastID().name = '~' + result.identifier.name;\n        result.getLastID().type = AST.IDType.TYPE;\n        return result;\n    }\n\nSingleTypeIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TYPE_NAME;\n    } {\n        id.type = AST.IDType.TYPE;\n        return id;\n    }\n\nSingleTemplateFuncIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_FUNC_NAME;\n    } {\n        id.type = AST.IDType.T_FUNC;\n        return id;\n    }\n\nSingleTemplateClassIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_CLASS_NAME;\n    } {\n        id.type = AST.IDType.T_CLASS;\n        return id;\n    }\n\nUnifiedIdentifier\n    = SingleTypeIdentifier/ TemplateClassInstanceIdentifier\n\nIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:(SingleIdentifier/TemplateFuncInstanceIdentifier) {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTypeIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:UnifiedIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTemplateFuncIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:SingleTemplateFuncIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTemplateClassIdentifier\n    = isFullName:'::'? namespace:(SingleTypeIdentifier '::')* name:SingleTemplateClassIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTypeDeclarationIdentifier\n    = identifier:Identifier{\n        if( options.isCpp ) {\n            globalMap.set(identifier.getLastID().name, TYPE_NAME);\n            currScope.names.set(identifier.getLastID().name, TYPE_NAME);\n        }\n        return identifier;\n    }\n\nWhiteSpace = [ \\t\\n\\v\\f]\n\n_ = WhiteSpace*\n\nKeyword\n    = ('auto'\n    / 'break'\n    / 'case'\n    / 'char'\n    / 'const'\n    / 'continue'\n    / 'default'\n    / 'double'\n    / 'do'\n    / 'else'\n    / 'enum'\n    / 'extern'\n    / 'float'\n    / 'for'\n    / 'goto'\n    / 'if'\n    / 'inline'\n    / 'int'\n    / 'long'\n    / 'register'\n    / 'restrict'\n    / 'return'\n    / 'short'\n    / 'signed'\n    / 'sizeof'\n    / 'static'\n    / 'struct'\n    / 'switch'\n    / 'typedef'\n    / 'union'\n    / 'unsigned'\n    / 'void'\n    / 'volatile'\n    / 'while'\n    / 'class'\n    / 'new'\n    / 'delete'\n    / 'operator'\n    / 'override'\n    / 'template'\n    / 'typename'\n    / 'namespace'\n    / 'using') !IdentifierPart\n\nStorageClassSpecifier\n    = ('typedef'\n    / 'extern'\n    / 'static'\n    / 'virtual'\n    / 'auto'\n    / 'register') !IdentifierPart {\n        return text();\n    }\n\nPrimitiveTypeSpecifier\n    = ('void'\n    / 'char'\n    / 'short'\n    / 'int'\n    / 'long'\n    / 'float'\n    / 'double'\n    / 'signed'\n    / 'unsigned'\n    / 'bool') !IdentifierPart {\n        return text();\n     }\n\nOverloadOperator\n    = '+' / '-' / '*' / '/' / '%' / '&' / '<' / '>' / '<=' / '>=' / '==' / '!='\n    / '|' / '^' / '!' / '~' / '&&' / '||' / '>>' / '<<' / '++' / '--'\n    /'()' / '[]' / '->'\n    / AssignmentOperator\n\nAssignmentOperator\n    = '=' !'=' {\n        return text();\n    }\n    / '*='\n    / '/='\n    / '%='\n    / '+='\n    / '-='\n    / '<<='\n    / '>>='\n    / '&='\n    / '^='\n    / '|='\n\nAndAnd\n    = '&&'\n\nSingleAnd\n    = '&'!'&'\n\nHexadecimalPrefix\n    = '0x'\n    / '0X'\n\nNonzeroDigit\n    = [1-9]\n\nOctalDigit\n    = [0-7]\n\nHexadecimalDigit\n    = [0-9a-fA-F]\n\nIntegerSuffix\n    = UnsignedSuffix (LongLongSuffix / LongSuffix)?\n    / (LongLongSuffix / LongSuffix) UnsignedSuffix?\n\nUnsignedSuffix\n    = [uU]\n\nLongSuffix\n    = [lL]\n\nLongLongSuffix\n    = 'll'\n    / 'LL'\n\nIdentifierPart\n    = IdentifierNondigit\n    / Digit\n\nIdentifierNondigit\n    = UniversalCharacterName\n    / Nondigit\n\nNondigit\n    = [_a-zA-Z]\n\nDigit\n    = [0-9]\n\nStatement\n    = CaseStatement\n    / SelectionStatement\n    / IterationStatement\n    / JumpStatement\n    / CompoundStatement\n    / LabeledStatement\n    / ExpressionStatement\n    / UsingStatements\n\n// ADDED\nCaseStatement\n    = 'case' !IdentifierPart _ test:ConstantExpression _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), test, body);\n    }\n    / 'default' !IdentifierPart _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), null, body)\n    }\n\n// MODIFICATION: No case or default.\nLabeledStatement\n    = label:Identifier _ ':' _ body:Statement {\n        return new AST.LabeledStatement(getLocation(), label, body);\n    }\n\nScopeStart\n    = '{' {\n        enterScope();\n        return getLocation();\n    }\n\nScopeEnd\n    = &!'}' {\n        exitScope();\n        return getLocation();\n    }\n\nCompoundStatement\n    = left:ScopeStart _ body:BlockItemList? _ right:ScopeEnd {\n        return new AST.CompoundStatement(getLocation(), body || []);\n    }\n\nBlockItemList\n    = head:BlockItem tail:(_ BlockItem)* {\n        return buildList(head, tail, 1);\n    }\n\nBlockItem\n    = Statement\n    / Declaration\n    / Expression { // ExpressionStatementMissingSemicolon\n        error('Missing \\';\\' at end of statement');\n    }\n    / DeclarationMissingSemicolon\n\nExpressionStatement\n    = expression:(Expression _)? ';' {\n        return expression ? new AST.ExpressionStatement(getLocation(), extractOptional(expression, 0))\n                : new AST.NullStatement(getLocation());\n    }\n\nSelectionStatement\n    = 'if' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ consequent:Statement alternate:(_ 'else' !IdentifierPart _ Statement)? {\n        return new AST.IfStatement(getLocation(), test, consequent, extractOptional(alternate, 4));\n    }\n    / 'switch' !IdentifierPart _ &!'(' _ discriminant:Expression _ &!')' _ body:Statement {\n        return new AST.SwitchStatement(getLocation(), discriminant, body);\n    }\n\nIterationStatement\n    = 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ body:Statement {\n        return new AST.WhileStatement(getLocation(), test, body);\n    }\n    / 'do' !IdentifierPart _ body:Statement _ 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ &!';' {\n        return new AST.DoWhileStatement(getLocation(), body, test);\n    }\n    / 'for' !IdentifierPart _ &!'(' _ init:(Declaration / expression:Expression? _ ';' {\n        return expression;\n    } / (DeclarationWithoutSemicolon / Expression) {\n        error('Missing \\';\\'');\n    }) _ test:Expression? _ &!';' _ update:Expression? _ &!')' _ body:Statement {\n        return new AST.ForStatement(getLocation(), init, test, update, body);\n    }\n\nJumpStatement\n    = 'goto' !IdentifierPart _ label:Identifier _ &!';' {\n        return new AST.GotoStatement(getLocation(), label);\n    }\n    / 'continue' !IdentifierPart _ &!';' {\n        return new AST.ContinueStatement(getLocation());\n    }\n    / 'break' !IdentifierPart _ &!';' {\n        return new AST.BreakStatement(getLocation());\n    }\n    / 'return' !IdentifierPart _ argument:Expression? _ &!';' {\n        return new AST.ReturnStatement(getLocation(), argument);\n    }\n\n\nUsingStatements\n    = 'using' _ name:Identifier _ '=' _ decl:TypeName _ ';'{\n        currScope.names.set(name.getLastID().name, TYPE_NAME);\n        return new AST.UsingStatement(getLocation(), name, decl);\n    }\n    / 'using' _ name:(Identifier/TypeIdentifier/TemplateClassIdentifier/TemplateFuncIdentifier) _ ';'{\n        return new AST.UsingStatement(getLocation(), name);\n    }\n    / 'using' _ 'namespace' _ name:TypeIdentifier _ ';'{\n        return new AST.UsingNamespaceStatement(getLocation(), name);\n    }\nTemplateDeclaration\n    = 'template' _ '<' _ &{\n        enterScope();\n        return true;\n    } param:TemplateParameterList? _ &!'>' _ decl:(ClassSpecifierWithSemi/FunctionDefinition) {\n        exitScope();\n        const result = new AST.TemplateDeclaration(getLocation(), decl, param || []);\n        const names = result.getTemplateNames();\n        const typeId = (decl instanceof AST.FunctionDefinition) ? TEMPLATE_FUNC_NAME : TEMPLATE_CLASS_NAME;\n        names.map(name => {currScope.names.set(name, typeId);\n        if(typeId === TEMPLATE_CLASS_NAME) globalMap.set(name, typeId);});\n        return result;\n    }\n\nClassSpecifierWithSemi\n    = id:ClassSpecifier _ ';' {\n        return id;\n    }\n\nTemplateParameterList\n    = head:TemplateParameter tail:(_ ',' _ TemplateParameter)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateParameter\n    = TypeParameter\n    / ParameterDeclaration;\n\nTypeNameKeyword = 'class' / 'typename'\n\n// TODO:: identifier is optional?\nTypeParameter\n    = TypeNameKeyword _ id:TypeDeclarationIdentifier init:( _ '=' _ TypeName)? {\n        return new AST.TypeParameter(getLocation(), id, init ? init[3] : null);\n    }\n\nTemplateFuncInstanceIdentifier\n    = id:SingleTemplateFuncIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        id.type = AST.IDType.T_FUNC_INS;\n        id.args = opt ? (opt[3] || []) : [];\n        return id;\n    }\n\nTemplateClassInstanceIdentifier\n    = id:SingleTemplateClassIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        id.type = AST.IDType.T_CLASS_INS;\n        id.args = opt ? (opt[3] || []) : [];\n        return id;\n    }\n\nTemplateArgumentList\n    = head:TemplateArgument tail:(_ ',' _ TemplateArgument)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateArgument\n    = item:TypeName {\n        return new AST.TemplateArgument(getLocation(), item);\n    }\n    / item:AdditiveExpression {\n        return new AST.TemplateArgument(getLocation(), item);\n    }\n\nExplicitInstantiation\n    = FunctionTemplateInstantiation\n    / ClassTemplateInstantiation\n\nFunctionTemplateInstantiation\n    = 'template' _ specifiers:DeclarationSpecifiers _ declarator:Declarator _ ';'{\n        return new AST.FunctionTemplateInstantiation(getLocation(), specifiers, declarator);\n    }\n\nClassTemplateInstantiation\n    = 'template' _ spec:ClassSpecifier _ ';'{\n        return new AST.ClassTemplateInstantiation(getLocation(), spec);\n    }";
},{}],"4ugX":[function(require,module,exports) {
var global = arguments[3];
var global=arguments[3],__importStar=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e},__importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});const fs=__importStar(require("fs")),Long_=__importStar(require("long")),PegJs=__importStar(require("pegjs")),error_1=require("../common/error"),CTree_=__importStar(require("./ast")),c_lang_1=__importDefault(require("./c.lang"));function parseUniversalCharacter(r){const e=Number.parseInt(r,16);return String.fromCharCode(e)}const Helper_={parseUniversalCharacter:parseUniversalCharacter};function loadParser(source,query){const Long=Long_,AST=CTree_;if(void 0===global.window&&fs.existsSync("/tmp/"+query.parserName+".js")){const r=fs.readFileSync("/tmp/"+query.parserName+".js","utf8")}source=source.replace(/&!'((\\.|[^'])*)'/g,(r,e)=>`(expected:'${e}'? {\n        if (!expected) {${e.includes("}")?"/*{*/":""}\n            error('Missing \\'${e}\\'');\n        }\n        return expected;\n    })`),query.output="source",query.cache=!!query.cache,query.optimize=query.optimize||"speed",query.trace=!!query.trace,"string"==typeof query.allowedStartRules&&(query.allowedStartRules=[query.allowedStartRules]);const code=PegJs.generate(source,query);return eval(code)}const ConstantExpressionPegParser=loadParser(c_lang_1.default,{parserName:"ConstantExpression",allowedStartRules:"ConstantExpression"}),TranslationUnitPegParser=loadParser(c_lang_1.default,{parserName:"TranslationUnitPegParser"});function wrapPegParser(r){return{parse(e,t){try{return r.parse(e,t)}catch(a){throw a instanceof r.SyntaxError?new error_1.SyntaxError(a.message,{location:a.location}):a}}}}exports.ConstantExpressionParser=wrapPegParser(ConstantExpressionPegParser),exports.CParser=wrapPegParser(TranslationUnitPegParser);
},{"fs":"f88W","long":"YvD4","pegjs":"LOSa","../common/error":"nOPH","./ast":"1a9M","./c.lang":"zrEC"}],"WBcs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("source-map"),r=require("../common/error"),t=require("./index");var s;!function(e){e[e.ON_IF=0]="ON_IF",e[e.ON_ELSE=1]="ON_ELSE"}(s=exports.PreprocessStatus||(exports.PreprocessStatus={}));class a{constructor(r,t){this.sourceFileName=r,this.generatedFileName=r.replace(".cpp",".ii"),this.node=new e.SourceNode(1,0,this.generatedFileName),this.marcoMap=t,this.skipBlock=!1,this.status=[],this.targetLine=0,this.targetColumn=0,this.onMultiLineComment=!1}defineMarco(e,s,a){if(a=a.trim(),this.marcoMap.has(e))throw new r.PreprocessError(`marco ${e} is already defined`);if(null===s){const r=t.parseMarco([],a);this.marcoMap.set(e,{name:e,parameters:s,target:a,parsedTarget:r})}else{const r=t.parseMarco(s,a);this.marcoMap.set(e,{name:e,parameters:s,target:a,parsedTarget:r})}}undefineMarco(e){if(!this.marcoMap.has(e))throw new r.PreprocessError(`marco ${e} is not defined`);this.marcoMap.delete(e)}append(r,t){this.node.add(new e.SourceNode(t.line+1,t.column,this.sourceFileName,r))}}exports.PreprocessContext=a;
},{"source-map":"aRf0","../common/error":"nOPH","./index":"DY6N"}],"DY6N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error"),t=require("../library"),n=require("./context");function r(r,s,o){const i=s.split(/\s|<|"/);if("#define"===i[0]){if(!r.skipBlock){const t=/#define\s+([a-zA-Z0-9_]+)\s*(\(([^)]*)\))?\s*(\s.+)?\s*$/.exec(s);if(!t)throw new e.PreprocessError(`illegal define: ${s}`);if(t[3]&&t[4]){const e=t[3].split(",").map(e=>e.trim());r.defineMarco(t[1],e,t[4])}else t[4]?r.defineMarco(t[1],null,t[4]):r.defineMarco(t[1],null,"")}}else if("#undef"===i[0]){if(!r.skipBlock){if(2!==i.length)throw new e.PreprocessError(`illegal undefine: ${s}`);r.undefineMarco(i[1])}}else if("#include"===i[0]){if(!r.skipBlock){let n="";if(s.includes('"')){const t=/"(.*)"/.exec(s);if(!t||!t[1])throw new e.PreprocessError(`illegal include: ${s}`);n=t[1]}else{const t=/<(.*)>/.exec(s);if(!t||!t[1])throw new e.PreprocessError(`illegal include: ${s}`);n=t[1]}let i=t.Headers.get(n);if(!i&&("c"===n.charAt(0)&&(i=t.Headers.get(n.slice(1)+".h")),!i))throw new e.PreprocessError(`header ${n} does not exist`);const{code:l}=u(n,i,r.marcoMap);r.append(l,{line:o,column:0})}}else{if("#if"===i[0])throw new e.PreprocessError("unsupport #if");if("#elif"===i[0])throw new e.PreprocessError("unsupport #elif");if("#ifdef"===i[0])r.marcoMap.has(i[1])?(r.skipBlock=!1,r.status.push([n.PreprocessStatus.ON_IF,!1])):(r.skipBlock=!0,r.status.push([n.PreprocessStatus.ON_IF,!0]));else if("#ifndef"===i[0])r.marcoMap.has(i[1])?(r.skipBlock=!0,r.status.push([n.PreprocessStatus.ON_IF,!0])):(r.skipBlock=!1,r.status.push([n.PreprocessStatus.ON_IF,!1]));else if("#else"===i[0]){if(!(r.status.length>0&&r.status[r.status.length-1][0]===n.PreprocessStatus.ON_IF))throw new e.PreprocessError("unmatch #else");{const e=r.status[r.status.length-1];r.skipBlock=!e[1],e[0]=n.PreprocessStatus.ON_ELSE}}else{if("#endif"!==i[0]){if("#line"===i[0])throw new e.PreprocessError("unsupport #line");if("#error"===i[0])throw new e.PreprocessError(`Error : ${s}`);if("#progma"===i[0])return;if("#"===i[0])return;throw new e.PreprocessError(`unsupport directive ${s}`)}if(!(r.status.length>0))throw new e.PreprocessError("unmatch #endif");r.status.pop();r.status.length>0?r.skipBlock=r.status[r.status.length-1][1]:r.skipBlock=!1}}}const s=/([\\~!@#$|%^&*()+-={}[\]:";'<>?,.\/]|[A-Za-z_0-9]+|"[^"]*"|'[^']*'|\n|[ \t]+)/y;function o(e){let t=s.exec(e);const n=[];for(;t;)n.push(t[1]),t=s.exec(e);return n}function i(e,t){const n=o(t),r=[];let s="";for(let o=0;o<n.length;o++){const t=n[o];o+2<n.length&&"#"===t&&"#"===n[o+1]&&e.includes(n[o+2])?(0!==s.length&&(r.push(s),s=""),r.push(e.indexOf(n[o+2])),o+=2):o+1<n.length&&"#"===t&&e.includes(n[o+1])?(r.push(s+'"'),s='"',r.push(e.indexOf(n[o+1])),o+=1):e.includes(t)?(0!==s.length&&(r.push(s),s=""),r.push(e.indexOf(t))):s+=t}return 0!==s.length&&r.push(s),r}function l(e,t){return e.parsedTarget.map(e=>"string"==typeof e?e:t[e]).join("")}function c(e,t,n){const r=o(t);"\n"!==r[r.length-1]&&r.push("\n");let s="",i=0;e.onMultiLineComment&&(i=2);let c={line:n,column:0},u={line:c.line,column:c.column};function p(){s.length>0&&(e.append(s,u),s="",u={line:c.line,column:c.column})}for(let o=0;o<r.length-1;o++){const t=r[o];function f(e){"\n"===e?(c.line++,c.column=0):c.column+=e.length}if(1===i){"\n"===t&&(s+=t,i=0),f(t);continue}if(2===i){"*"===t&&"/"===r[o+1]&&(i=0,e.onMultiLineComment=!1,o++),f(t);continue}const n=e.marcoMap.get(t);function a(){for(o++;o<r.length&&/^\s*$/.test(r[o]);)o++;return o>=r.length?null:r[o]}if(n){if(null!==n.parameters){const e=o,i={line:c.line,column:c.column};if("("!==a()){c=i,s+=t,f(r[o=e]);continue}const u=[],h={"(":0,"[":0,"{":0};let g=",";for(let l=0;l<n.parameters.length;l++){l===n.parameters.length-1&&(g=")");let p=a(),d="";for(;p!==g||!Object.keys(h).map(e=>h[e]).every(e=>0===e);)null!==p?(h.hasOwnProperty(p)&&h[p]++,")"===p&&h["("]--,"]"===p&&h["["]--,"{"===p&&h["{"]--,d+=p,p=a()):(c=i,f(r[o=e]),s+=t);u.push(d)}p(),s=l(n,u);for(let t=e;t<=o;t++)f(r[t]);p();continue}p(),s=n.target,f(t),p()}else"/"===t&&"/"===r[o+1]?(p(),i=1):"/"===t&&"*"===r[o+1]?(p(),i=2,e.onMultiLineComment=!0):"\n"===t?(s+=t,p()):s+=t;f(t)}return s+="\n",p(),""}function u(e,t,s){const o=new n.PreprocessContext(e,s),i=t.split("\n");let l="",u="",p=0;for(let n=0;n<i.length;n++)"\\"===(u+=i[n]).charAt(u.length-1)?u=u.substring(0,u.length-1):"#"===u.charAt(0)?o.onMultiLineComment?(l+=u+"\n",u=""):(""!==l&&(o.skipBlock||c(o,l,p),l=""),r(o,u,n),u="",p=n+1):(l+=u+"\n",u="");return c(o,l,p),o.node.toStringWithSourceMap()}function p(e,t){return u(e,t,new Map)}exports.parseMarco=i,exports.preprocess=p;
},{"../common/error":"nOPH","../library":"bjS5","./context":"WBcs"}],"PxdH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/error");class t{}exports.HeapAllocator=t;class o extends t{constructor(){super()}init(e){e.heapPointer+=0}allocHeap(t,o){let r=t.heapStart;for(;r<t.heapPointer;){const e=t.memory.getUint32(r),i=t.memory.getUint32(r+4);if(1===e&&i>=o+8)return t.memory.setUint32(r,0),t.memory.setUint32(r+4,o),t.memory.setUint32(r+o+8,1),t.memory.setUint32(r+o+8+4,i-o-8),r+8;if(1===e&&i>=o)return t.memory.setUint32(r,0),r+8;r=r+i+8}if(t.sp-t.heapPointer<=o+8)throw new e.RuntimeError("out of memory");{const e=t.heapPointer;return t.memory.setUint32(t.heapPointer,0),t.memory.setUint32(t.heapPointer+4,o),t.heapPointer+=o+8,e+8}}getBlockSize(t,o){if(!(o>=t.heapStart&&o<=t.heapPointer))throw new e.RuntimeError("free a blk not be malloc");let r=t.heapStart,i=0;for(;r<o-8;){i=r,r=r+t.memory.getUint32(r+4)+8}if(r!==o-8)throw new e.RuntimeError("free a blk not be malloc");return t.memory.getUint32(r+4)}freeHeap(t,o){if(!(o>=t.heapStart&&o<=t.heapPointer))throw new e.RuntimeError("free a blk not be malloc");let r=t.heapStart,i=0;for(;r<o-8;){i=r,r=r+t.memory.getUint32(r+4)+8}if(r!==o-8)throw new e.RuntimeError("free a blk not be malloc");const s=t.memory.getUint32(i),n=t.memory.getUint32(r+4),m=t.memory.getUint32(r+8+n);if(1===s){let e=t.memory.getUint32(i+4)+n+8;1===m&&(e+=t.memory.getUint32(r+8+n+4)+8),t.memory.setUint32(i,1),t.memory.setUint32(i+4,e)}else{let e=n;1===m&&(e+=t.memory.getUint32(r+8+n+4)+8),t.memory.setUint32(r,1),t.memory.setUint32(r+4,e)}}}exports.LinkedHeapAllocator=o;class r extends o{constructor(){super(),this.sizeLimit=[32,128,512],this.poolSize=[64,1,1],this.MAGIC_NUMBER=12450,this.pool=[],this.poolPtr=[]}init(e){super.init(e),this.pool=this.sizeLimit.map((t,o)=>this.createPool(e,o))}allocHeap(e,t){if(t>this.sizeLimit[this.sizeLimit.length-1])return super.allocHeap(e,t);{let o=0;for(;this.sizeLimit[o]<t;)o++;const r=this.pool[o];r.size<=0&&this.extendPool(e,o);const i=r.keys().next().value;return r.delete(i),i}}freeHeap(t,o){const r=t.memory.getUint32(o-4);if(r>=this.MAGIC_NUMBER){const t=r-this.MAGIC_NUMBER;if(t<0||t>=this.pool.length)throw new e.RuntimeError("free a blk not be malloc");this.pool[t].add(o)}else super.freeHeap(t,o)}getBlockSize(t,o){const r=t.memory.getUint32(o-4);if(r>=this.MAGIC_NUMBER){const t=r-this.MAGIC_NUMBER;if(t<0||t>=this.pool.length)throw new e.RuntimeError("free a blk not be malloc");return this.poolSize[t]}return super.getBlockSize(t,o)}createPool(e,t){const o=this.sizeLimit[t],r=this.poolSize[t],i=new Set,s=super.allocHeap(e,(o+4)*r);this.poolPtr.push(s);for(let n=0;n<r;n++){const r=s+n*(o+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}return i}extendPool(e,t){const o=this.sizeLimit[t],r=this.poolSize[t],i=this.pool[t];this.poolSize[t]*=2;const s=super.allocHeap(e,(o+4)*r);this.poolPtr.push(s);for(let n=0;n<r;n++){const r=s+n*(o+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}}}exports.FastHeapAllocator=r;
},{"../common/error":"nOPH"}],"B/OM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../common/utils"),t=require("./allocator");class r{constructor(e){this.memoryBuffer=new ArrayBuffer(e.memorySize),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.memory=new DataView(this.memoryBuffer),this.heapStart=e.heapStart,this.heapPointer=e.heapStart,this.importObjects=e.importObjects,this.files=e.files,this.heapAllocator=new t.FastHeapAllocator,this.entry=e.entry}readMemoryString(t){return e.fromBytesToString(this.memory,t)}}exports.Runtime=r;
},{"../common/utils":"pe9I","./allocator":"PxdH"}],"/x2e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("babel-polyfill");const t=require("./runtime");class s extends t.Runtime{constructor(t){super(t),this.code=t.code,this.options=t,this.wasmMemory=new WebAssembly.Memory({initial:1,maximum:t.memorySize/65536}),this.importObjects.hasOwnProperty("system")||(this.importObjects.system={});const s=this,e=this.importObjects;this.importObjects={};for(const i of Object.keys(e)){const t=e[i];this.importObjects[i]={};for(const e of Object.keys(t)){const r=t[e];this.importObjects[i][e]=function(){return r.apply(s,Array.from(arguments))}}}this.importObjects.system.memory=this.wasmMemory,this.memoryBuffer=this.wasmMemory.buffer,this.memory=new DataView(this.memoryBuffer),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.instance=null}async run(){this.heapStart=this.heapPointer=this.options.heapStart;const t=await WebAssembly.instantiate(this.code,this.importObjects);this.instance=t.instance;const s=4*parseInt((this.wasmMemory.buffer.byteLength-1)/4+"");this.sp=s,this.heapAllocator.init(this),t.instance.exports.$start(),this.sp=s,t.instance.exports[this.entry](),this.files.map(t=>t.flush())}get sp(){return this.instance.exports.$get_sp()}set sp(t){this.instance.exports.$set_sp(t)}printStack(){}}exports.NativeRuntime=s;
},{"babel-polyfill":"wllv","./runtime":"B/OM"}],"9XaA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("long"),s=require("../codegen/scope"),o=require("../common/symbol"),e=require("../type/compound_type"),a=require("../type/primitive_type"),i=require("../wasm"),r=require("../wasm/tool/calculator"),n=require("./runtime");class c extends n.Runtime{constructor(o){super(o),this.options=o,this.program=o.program,this.rootScope=o.scope,this.scopeManager=new s.ScopeManager(!0),this.scopeManager.root=this.rootScope,this.stack=[],this.spIndex=-1;for(let t=0;t<this.program.globals.length;t++)"$sp"===this.program.globals[t].name&&(this.spIndex=t);if(-1===this.spIndex)throw new Error("no $sp found");this.globals=this.program.globals.map(s=>s.type===i.WType.i64?t.fromString(s.init):s.type===i.WType.i32?parseInt(s.init):parseFloat(s.init)),this.returnValue=0,this.convertArray=new ArrayBuffer(64),this.convertDataView=new DataView(this.convertArray);for(const t of this.program.data)this.memoryUint8Array.set(new Uint8Array(t.data),t.offset);for(const t of this.program.functions)t.scope="::"===t.name.substring(0,2)?this.rootScope.getScopeOfLookupName(t.name+"::a"):null;this.stack=[{fn:this.program.functions[0],pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[]}],this.stackTop=this.stack[0]}get sp(){return this.globals[this.spIndex]}set sp(t){this.globals[this.spIndex]=t}runStep(){const s=this.stackTop.fn.codes[this.stackTop.pc];if(i.I32Binary.hasOwnProperty(s[0])||i.F32Binary.hasOwnProperty(s[0])||i.F64Binary.hasOwnProperty(s[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],o=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=r.doBinaryCompute(s[0],o,t)}else if(i.I64Binary.hasOwnProperty(s[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],o=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=r.doLongBinaryCompute(s[0],o,t)}else if(i.I32Unary.hasOwnProperty(s[0])||i.F32Unary.hasOwnProperty(s[0])||i.F64Unary.hasOwnProperty(s[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=r.doUnaryCompute(s[0],t)}else if(i.I64Unary.hasOwnProperty(s[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=r.doLongUnaryCompute(s[0],t)}else if(i.I32Convert.hasOwnProperty(s[0])||i.F32Convert.hasOwnProperty(s[0])||i.F64Convert.hasOwnProperty(s[0])){if(s[0]===i.I32Convert.wrap$i64||s[0]===i.F32Convert.convert_s$i64||s[0]===i.F32Convert.convert_u$i64||s[0]===i.F64Convert.convert_s$i64||s[0]===i.F64Convert.convert_u$i64){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=t.toNumber()}else if(s[0]===i.I32Convert.trunc_s$f32||s[0]===i.I32Convert.trunc_s$f64||s[0]===i.I32Convert.trunc_u$f32||s[0]===i.I32Convert.trunc_u$f64){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=0|t}else if(s[0]===i.I32Convert.reinterpret$f32){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat32(0,t),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getInt32(0)}else if(s[0]===i.F32Convert.reinterpret$i32){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setInt32(0,t),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat32(0)}else if(s[0]===i.F64Convert.reinterpret$i64){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setUint32(0,t.high),this.convertDataView.setUint32(4,t.low),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat64(0)}}else if(i.I64Convert.hasOwnProperty(s[0]))if(s[0]===i.I64Convert.reinterpret$f64){const s=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat64(0,s),this.stackTop.stack[this.stackTop.stack.length-1]=t.fromBits(this.convertDataView.getUint32(4),this.convertDataView.getUint32(0))}else{const s=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=t.fromNumber(s)}else if(s[0]===i.I32.const||s[0]===i.F32.const||s[0]===i.F64.const)this.stackTop.stack.push(s[1]);else if(s[0]===i.I64.const)this.stackTop.stack.push(t.fromString(s[1]));else if(i.WLoadIns.has(s[0])){const o=this.stackTop.stack[this.stackTop.stack.length-1]+s[1];let e=0;s[0]===i.I32.load8_s||s[0]===i.I64.load8_s?e=this.memory.getInt8(o):s[0]===i.I32.load8_u||s[0]===i.I64.load8_u?e=this.memory.getUint8(o):s[0]===i.I32.load16_s||s[0]===i.I64.load16_s?e=this.memory.getInt16(o,!0):s[0]===i.I32.load16_u||s[0]===i.I64.load16_u?e=this.memory.getUint16(o,!0):s[0]===i.I32.load||s[0]===i.I64.load32_s?e=this.memory.getInt32(o,!0):s[0]===i.I64.load32_u?e=this.memory.getUint32(o,!0):s[0]===i.F32.load?e=this.memory.getFloat32(o,!0):s[0]===i.F64.load&&(e=this.memory.getFloat64(o,!0)),s[0]===i.I64.load?this.stackTop.stack[this.stackTop.stack.length-1]=t.fromBits(this.memory.getUint32(o,!0),this.memory.getUint32(o+4,!0)):s[0]===i.I64.load32_u||s[0]===i.I64.load32_s||s[0]===i.I64.load16_u||s[0]===i.I64.load16_s||s[0]===i.I64.load8_u||s[0]===i.I64.load8_s?this.stackTop.stack[this.stackTop.stack.length-1]=t.fromNumber(e):this.stackTop.stack[this.stackTop.stack.length-1]=e}else if(i.WStoreIns.has(s[0])){const t=this.stackTop.stack.pop(),o=this.stackTop.stack.pop()+s[1];this.stackTop.stack.pop(),s[0]===i.I32.store8?this.memory.setUint8(o,t):s[0]===i.I32.store16?this.memory.setUint16(o,t,!0):s[0]===i.I32.store?this.memory.setInt32(o,t,!0):s[0]===i.F32.store?this.memory.setFloat32(o,t,!0):s[0]===i.F64.store?this.memory.setFloat64(o,t,!0):s[0]===i.I64.store8?this.memory.setUint8(o,t.toNumber()):s[0]===i.I64.store16?this.memory.setUint16(o,t.toNumber(),!0):s[0]===i.I64.store32?this.memory.setUint32(o,t.toNumber(),!0):s[0]===i.I64.store&&(this.memory.setUint32(o,t.low,!0),this.memory.setUint32(o+4,t.high,!0))}else if(s[0]===i.Control.set_local)this.stackTop.locals[s[1]]=this.stackTop.stack.pop();else if(s[0]===i.Control.tee_local)this.stackTop.locals[s[1]]=this.stackTop.stack[this.stackTop.stack.length-1];else if(s[0]===i.Control.set_global){const t=this.stackTop.stack.pop();this.globals[s[1]]=t}else if(s[0]===i.Control.get_local)this.stackTop.stack.push(this.stackTop.locals[s[1]]);else if(s[0]===i.Control.get_global)this.stackTop.stack.push(this.globals[s[1]]);else if(s[0]===i.Control.drop)this.stackTop.stack.pop();else if(s[0]===i.Control.nop);else if(s[0]===i.Control.block)this.stackTop.controlFlow.push(s[1]);else if(s[0]===i.Control.loop)this.stackTop.controlFlow.push(this.stackTop.pc+1);else if(s[0]===i.Control.br||s[0]===i.Control.br_if){if(s[0]===i.Control.br||this.stackTop.stack.pop()){for(let t=0;t<s[1];t++)this.stackTop.controlFlow.pop();this.stackTop.pc=this.stackTop.controlFlow[this.stackTop.controlFlow.length-1]-1}}else if(s[0]===i.Control.if){this.stackTop.controlFlow.push(this.stackTop.pc),this.stackTop.stack.pop()||(this.stackTop.fn.codes[s[1]][0]===i.Control.else?this.stackTop.pc=s[1]:this.stackTop.pc=s[1]-1)}else if(s[0]===i.Control.else)this.stackTop.pc=s[1]-1;else if(s[0]===i.Control.end)this.stackTop.controlFlow.pop();else if(s[0]===i.Control.call||s[0]===i.Control.call_indirect){const o=s[0]===i.Control.call_indirect?this.stackTop.stack.pop():s[1],e=this.program.types[o],a=[];for(let t=1;t<e.length;t++)a.push(this.stackTop.stack.pop());if(a.reverse(),o>=this.program.imports.length){const s=this.program.functions[o-this.program.imports.length];this.stack.push({fn:s,pc:-1,sp:this.sp,stack:[],controlFlow:[],locals:a}),this.stackTop=this.stack[this.stack.length-1];for(let o=0;o<this.stackTop.fn.locals.length;o++)this.stackTop.fn.locals[o]===i.WType.i64?this.stackTop.locals.push(t.fromNumber(0)):this.stackTop.locals.push(0)}else{const s=this.program.imports[o],i=this.importObjects[s.module][s.name].apply(this,a);"i"===e.charAt(0)||"f"===e.charAt(0)||"d"===e.charAt(0)?this.stackTop.stack.push(i):"l"===e.charAt(0)&&this.stackTop.stack.push(t.fromNumber(i))}}else if(s[0]===i.Control.return){let s=0;const o="v"===this.stackTop.fn.type.charAt(0);if(o||(s=this.stackTop.stack.pop()),this.stack.pop(),0===this.stack.length)return s instanceof t&&(s=s.toNumber()),this.returnValue=s,!1;this.stackTop=this.stack[this.stack.length-1],o||this.stackTop.stack.push(s)}else if(s[0]===i.Control.br_table||s[0]===i.Control.select)throw new Error("WASM not support");return this.stackTop.pc++,!0}prepareRunFunction(t,s=!1){if(!this.program.exports.hasOwnProperty(t))throw new Error(`no entry:${t} found`);this.sp=4*parseInt((this.memory.buffer.byteLength-1)/4+""),s&&this.heapAllocator.init(this);const o=this.program.functions[this.program.exports[t]-this.program.imports.length];this.stack=[{fn:o,pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[]}],this.stackTop=this.stack[this.stack.length-1]}runFunction(t,s=!1){for(this.prepareRunFunction(t,s);this.runStep(););}async run(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.runFunction(this.entry,!1),this.files.map(t=>t.flush())}getCurrentLine(){return this.stackTop.fn.codes[this.stackTop.pc][2]}prepareRunSingleStepMode(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.prepareRunFunction(this.entry,!1)}runSingleStepMode(){for(;this.runStep();)if(this.stackTop.fn.fileName===this.options.entryFileName&&this.stackTop.fn.lineIdx.has(this.stackTop.pc))return this.files.map(t=>t.flush()),!0;return this.files.map(t=>t.flush()),!1}padDigits(t,s){return Array(Math.max(s-t.length+1,0)).join("0")+t}formatVariableOutput(t,s){return t.type instanceof e.PointerType||t.type instanceof e.ReferenceType?"0x"+this.padDigits(s.toString(16),8):s.toString()}getValueOfVariableFromAddress(s,o){return s.type instanceof a.UnsignedCharType?this.formatVariableOutput(s,this.memory.getUint8(o)):s.type instanceof a.UnsignedInt16Type?this.formatVariableOutput(s,this.memory.getUint16(o,!0)):s.type instanceof a.UnsignedInt32Type?this.formatVariableOutput(s,this.memory.getUint32(o,!0)):s.type instanceof a.UnsignedInt64Type?this.formatVariableOutput(s,t.fromBits(this.memory.getUint32(o,!0),this.memory.getUint32(o+4,!0),!0)):s.type instanceof a.CharType?this.formatVariableOutput(s,this.memory.getInt8(o)):s.type instanceof a.Int16Type?this.formatVariableOutput(s,this.memory.getInt16(o,!0)):s.type instanceof a.Int32Type?this.formatVariableOutput(s,this.memory.getInt32(o,!0)):s.type instanceof a.Int64Type?this.formatVariableOutput(s,t.fromBits(this.memory.getUint32(o,!0),this.memory.getUint32(o+4,!0))):s.type instanceof e.PointerType?this.formatVariableOutput(s,this.memory.getUint32(o,!0)):"N/A"}getValueOfVariable(t,s){switch(t.addressType){case o.AddressType.LOCAL:return s?this.formatVariableOutput(t,s.locals[t.location]):"N/A";case o.AddressType.GLOBAL:return this.formatVariableOutput(t,this.globals[t.location]);case o.AddressType.GLOBAL_SP:return this.getValueOfVariableFromAddress(t,this.sp+t.location);case o.AddressType.STACK:return s?this.getValueOfVariableFromAddress(t,s.sp+t.location):"N/A";case o.AddressType.MEMORY_DATA:return this.getValueOfVariableFromAddress(t,this.stackTop.fn.dataStart+t.location);case o.AddressType.MEMORY_BSS:return this.getValueOfVariableFromAddress(t,this.stackTop.fn.bssStart+t.location);default:return"N/A"}}getLocationOfVariable(t,s){switch(t.addressType){case o.AddressType.GLOBAL_SP:return this.sp+t.location;case o.AddressType.STACK:return s?s.sp+t.location:null;case o.AddressType.MEMORY_DATA:return this.stackTop.fn.dataStart+t.location;case o.AddressType.MEMORY_BSS:return this.stackTop.fn.bssStart+t.location;default:return null}}getSubScopeInfo(t,s,e){for(const a of s.map)for(const s of a[1])s instanceof o.Variable&&t.push({name:s.shortName,size:s.type.length,type:s.type.toString(),value:this.getValueOfVariable(s,e),location:this.getLocationOfVariable(s,e)});for(const o of s.children)o.isInnerScope&&this.getSubScopeInfo(t,o,e)}getScopeInfo(t,s){const o=[];return t?(this.getSubScopeInfo(o,t,s),o):[]}printStack(){console.log("==== WebCpp Stack Dumper ===="),console.log("sp=",this.stackTop.sp);const t=[];for(const e of this.stack)if(e.fn.scope){const s=this.getScopeInfo(e.fn.scope,e);t.push({location:e.sp,name:e.fn.name,type:e.locals.map(t=>t.toString()).join(","),value:"",size:0});for(const o of s)null!==o.location&&t.push(o)}const s=t.sort((t,s)=>t.location-s.location);let o=-1;for(const e of s)e.location!==o&&-1!==o&&console.log(`${o}-${e.location} >>>>unknown`),console.log(`${e.location}-${e.location+e.size}`,e.name," ",e.type," ",e.value),o=e.location+e.size;o!==this.memory.byteLength&&console.log(`${o}-${this.memory.byteLength} >>>>unknown`)}}exports.JSRuntime=c;
},{"long":"YvD4","../codegen/scope":"y+tL","../common/symbol":"HcQt","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/tool/calculator":"eYtb","./runtime":"B/OM"}],"0bZZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../common/error"),e=require("../common/utils");class r{}exports.VMFile=r;class s extends r{read(t,e,r){return 0}write(e){throw new t.InternalError("NoInputFile is not support write")}flush(){return 0}}exports.NoInputFile=s;class n extends r{constructor(){super(),this.buffer=""}read(e,r,s){throw new t.InternalError("CommandOutputFile is not support read")}write(t){if(this.buffer+=e.fromBytesToString(new DataView(t),0,t.byteLength),this.buffer.includes("\n")){const t=this.buffer.split("\n");this.buffer=t[t.length-1],t.slice(0,t.length-1).map(t=>console.log(t))}return t.byteLength}flush(){const t=this.buffer.length;return 0===this.buffer.length?0:(console.log(this.buffer),this.buffer="",t)}}exports.CommandOutputFile=n;class o extends r{constructor(t){super(),this.str=t,this.offset=0}flush(){return 0}read(t,e,r){let s=0;for(let n=0;n<r;n++){if(this.offset>=this.str.length)return s;new DataView(t).setUint8(e+n,this.str.charCodeAt(this.offset)),this.offset++,s++}return s}write(e){throw new t.InternalError("NoInputFile is not support write")}}exports.StringInputFile=o;class u extends r{constructor(t){super(),this.output=t}read(e,r,s){throw new t.InternalError("CommandOutputFile is not support read")}write(t){return this.output[0]+=e.fromBytesToString(new DataView(t),0,t.byteLength),t.byteLength}flush(){return 0}}exports.StringOutputFile=u;class i extends r{constructor(t){super(),this.callback=t}read(e,r,s){throw new t.InternalError("CommandOutputFile is not support read")}write(t){return this.callback(e.fromBytesToString(new DataView(t),0,t.byteLength)),t.byteLength}flush(){return 0}}exports.CallbackOutputFile=i;
},{"../common/error":"nOPH","../common/utils":"pe9I"}],"47Y6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("source-map"),r=require("../codegen"),t=require("../codegen/context"),o=require("../common/error"),i=require("../library"),n=require("../linker"),s=require("../parser"),p=require("../preprocessor");function c(i,c,l={}){l.fileName=i;const{code:a,map:m}=p.preprocess(i,c);try{const p=s.CParser.parse(a,l),x=new t.CompileContext(i,l,c,m);return r.codegen(p,x),{pre:a,asm:n.link("main.cpp",[...u,x.toCompiledObject()],l).dumpInfo}}catch(C){const r=new e.SourceMapConsumer(m.toString());if(C instanceof o.CompilerError){const e=r.originalPositionFor(C.location.start);C.errorLine=c.split("\n")[e.line],C.location.start.line=e.line,C.location.start.column=e.column}throw C}}function l(i,n,c={}){c.fileName=i;const{code:l,map:u}=p.preprocess(i,n);try{const p=s.CParser.parse(l,c),m=new t.CompileContext(i,c,n,u);return r.codegen(p,m),m.toCompiledObject()}catch(a){const r=new e.SourceMapConsumer(u.toString());if(a instanceof o.CompilerError){const e=r.originalPositionFor(a.location.start);a.errorLine=n.split("\n")[e.line],a.location.start.line=e.line,a.location.start.column=e.column}throw a}}exports.getDebugSymbols=c;const u=Array.from(i.Impls.keys()).map(e=>l(e,i.Impls.get(e),{isCpp:!0}));function a(e,r,t=!0){const o=l(e,r,{isCpp:t});return n.link("main.cpp",[...u,o],{})}exports.compileFile=a,exports.importObj={system:{}};for(const g of Object.keys(i.JsAPIMap))exports.importObj.system["::"+g]=i.JsAPIMap[g];var m=require("../common/error");exports.CompilerError=m.CompilerError;var C=require("../runtime/native_runtime");exports.NativeRuntime=C.NativeRuntime;var x=require("../runtime/js_runtime");exports.JSRuntime=x.JSRuntime;var f=require("../runtime/vmfile");exports.VMFile=f.VMFile,exports.StringOutputFile=f.StringOutputFile,exports.StringInputFile=f.StringInputFile,exports.CallbackOutputFile=f.CallbackOutputFile,exports.NoInputFile=f.NoInputFile;
},{"source-map":"aRf0","../codegen":"FIFg","../codegen/context":"cKzO","../common/error":"nOPH","../library":"bjS5","../linker":"dGoJ","../parser":"4ugX","../preprocessor":"DY6N","../runtime/native_runtime":"/x2e","../runtime/js_runtime":"9XaA","../runtime/vmfile":"0bZZ"}]},{},[], null)
//# sourceMappingURL=/compiler.121d3085.map