{"id":"DOao","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"source-map","loc":{"line":4,"column":29,"index":139},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/emitter/emitter_context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/node_modules/source-map/source-map.js"},{"name":"../../common/error","loc":{"line":5,"column":24,"index":178},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/emitter/emitter_context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.EmitterContext=void 0;const t=require(\"source-map\"),e=require(\"../../common/error\");class n{constructor(t,e){this.functionMap=new Map,this.globalMap=new Map,this.funcTypeEncodingMap=new Map,this.functionIdNow=0,this.globalIdNow=0,this.currentFunction=null,this.externMap=t,this.sourceMap=e,this.sourceMapConsumer=null}getStartLine(t){return this.sourceMapConsumer&&t.start.line>=1?this.sourceMapConsumer.originalPositionFor(t.start).line:-1}getEndLine(t){return this.sourceMapConsumer&&t.end.line>=1?this.sourceMapConsumer.originalPositionFor(t.end).line:-1}setSourceMap(e){e&&this.sourceMap&&this.sourceMap.get(e)?this.sourceMapConsumer=new t.SourceMapConsumer(this.sourceMap.get(e).sourceMap.toString()):this.sourceMapConsumer=null}getFuncInfo(t){const n=this.functionMap.get(t);if(!n)throw new e.EmitError(`undefined function ${t}`);return n}submitFunc(t,n){if(this.functionMap.has(t))throw new e.EmitError(`duplicated name ${t}`);return this.functionMap.set(t,{id:this.functionIdNow,type:n}),this.functionIdNow++}getGlobalInfo(t){const n=this.globalMap.get(t);if(!n)throw new e.EmitError(`undefined name ${t}`);return n}submitGlobal(t,n){if(this.globalMap.has(t))throw new e.EmitError(`duplicated name ${t}`);return this.globalMap.set(t,{id:this.globalIdNow,type:n}),this.globalIdNow++}setCurrentFunc(e){if(this.currentFunction=e,this.sourceMapConsumer=null,null!==e){const n=this.sourceMap.get(e.fileName);n&&(this.sourceMapConsumer=new t.SourceMapConsumer(n.sourceMap.toString()))}}getCurrentFunc(){if(!this.currentFunction)throw new e.EmitError(\"not in func\");return this.currentFunction}getExternLocation(t){const n=this.externMap.get(t);if(!n)throw new e.EmitError(`unresolve symbol ${t}`);return n}getTypeIdxFromEncoding(t){const n=this.funcTypeEncodingMap.get(t);if(!n)throw new e.EmitError(`unresolve type ${t}`);return n}setTypeIdxFromEncoding(t,e){this.funcTypeEncodingMap.set(t,e)}}exports.EmitterContext=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":96}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":104}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":114}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":128}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":130}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":138}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":160}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":1,"column":166}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":168}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":180}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":31,"column":48},"generated":{"line":1,"column":182}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":185}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":190}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":32,"column":27},"generated":{"line":1,"column":202}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":32,"column":31},"generated":{"line":1,"column":206}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":210}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":215}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":33,"column":25},"generated":{"line":1,"column":225}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":33,"column":29},"generated":{"line":1,"column":229}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":233}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":238}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":34,"column":35},"generated":{"line":1,"column":258}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":34,"column":39},"generated":{"line":1,"column":262}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":266}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":35,"column":13},"generated":{"line":1,"column":271}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":35,"column":29},"generated":{"line":1,"column":285}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":287}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":36,"column":13},"generated":{"line":1,"column":292}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":36,"column":27},"generated":{"line":1,"column":304}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":1,"column":306}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":311}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":1,"column":327}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":332}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":337}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":38,"column":25},"generated":{"line":1,"column":347}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":349}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":354}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":1,"column":364}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":366}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":1,"column":371}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":40,"column":33},"generated":{"line":1,"column":389}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":394}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":43,"column":24},"generated":{"line":1,"column":407}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":410}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":1,"column":417}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":17},"generated":{"line":1,"column":422}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":1,"column":441}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":47},"generated":{"line":1,"column":443}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":53},"generated":{"line":1,"column":449}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":44,"column":61},"generated":{"line":1,"column":455}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":1,"column":457}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":24},"generated":{"line":1,"column":462}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":42},"generated":{"line":1,"column":480}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":62},"generated":{"line":1,"column":500}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":71},"generated":{"line":1,"column":502}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":45,"column":78},"generated":{"line":1,"column":509}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":1,"column":515}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":517}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":50,"column":22},"generated":{"line":1,"column":528}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":531}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":538}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":543}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":38},"generated":{"line":1,"column":562}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":47},"generated":{"line":1,"column":564}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":51},"generated":{"line":1,"column":568}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":51,"column":59},"generated":{"line":1,"column":574}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":19},"generated":{"line":1,"column":576}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":1,"column":581}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":42},"generated":{"line":1,"column":599}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":62},"generated":{"line":1,"column":619}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":71},"generated":{"line":1,"column":621}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":52,"column":76},"generated":{"line":1,"column":626}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":632}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":634}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":57,"column":24},"generated":{"line":1,"column":647}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":650}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":24},"generated":{"line":1,"column":653}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":658}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":42},"generated":{"line":1,"column":669}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":47},"generated":{"line":1,"column":674}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":57},"generated":{"line":1,"column":684}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":58,"column":61},"generated":{"line":1,"column":688}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":12},"generated":{"line":1,"column":691}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":696}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":37},"generated":{"line":1,"column":714}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":41},"generated":{"line":1,"column":718}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":41},"generated":{"line":1,"column":720}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":59},"generated":{"line":1,"column":738}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":64},"generated":{"line":1,"column":743}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":74},"generated":{"line":1,"column":753}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":78},"generated":{"line":1,"column":757}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":89},"generated":{"line":1,"column":760}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":59,"column":99},"generated":{"line":1,"column":770}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":782}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":61,"column":17},"generated":{"line":1,"column":787}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":61,"column":37},"generated":{"line":1,"column":805}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":810}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":65,"column":23},"generated":{"line":1,"column":822}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":825}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":14},"generated":{"line":1,"column":831}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":21},"generated":{"line":1,"column":833}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":26},"generated":{"line":1,"column":838}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":38},"generated":{"line":1,"column":850}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":66,"column":42},"generated":{"line":1,"column":854}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":857}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":67,"column":13},"generated":{"line":1,"column":861}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":863}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":68,"column":18},"generated":{"line":1,"column":869}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":68,"column":22},"generated":{"line":1,"column":873}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":68,"column":22},"generated":{"line":1,"column":875}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":68,"column":54},"generated":{"line":1,"column":907}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":912}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":919}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":73,"column":11},"generated":{"line":1,"column":921}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":73,"column":22},"generated":{"line":1,"column":932}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":73,"column":36},"generated":{"line":1,"column":934}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":937}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":940}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":74,"column":17},"generated":{"line":1,"column":945}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":74,"column":29},"generated":{"line":1,"column":957}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":74,"column":33},"generated":{"line":1,"column":961}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":75,"column":12},"generated":{"line":1,"column":964}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":75,"column":18},"generated":{"line":1,"column":970}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":75,"column":22},"generated":{"line":1,"column":974}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":75,"column":22},"generated":{"line":1,"column":976}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":75,"column":51},"generated":{"line":1,"column":1005}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":1010}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1017}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":77,"column":13},"generated":{"line":1,"column":1022}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":77,"column":25},"generated":{"line":1,"column":1034}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":1,"column":1038}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":77,"column":35},"generated":{"line":1,"column":1040}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":78,"column":12},"generated":{"line":1,"column":1041}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":78,"column":16},"generated":{"line":1,"column":1044}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":78,"column":21},"generated":{"line":1,"column":1049}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":79,"column":12},"generated":{"line":1,"column":1063}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":79,"column":12},"generated":{"line":1,"column":1068}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":81,"column":15},"generated":{"line":1,"column":1072}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":81,"column":20},"generated":{"line":1,"column":1077}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":1,"column":1093}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":84,"column":25},"generated":{"line":1,"column":1107}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":1110}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":14},"generated":{"line":1,"column":1116}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":21},"generated":{"line":1,"column":1118}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":26},"generated":{"line":1,"column":1123}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":36},"generated":{"line":1,"column":1133}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":85,"column":40},"generated":{"line":1,"column":1137}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":1140}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":1,"column":1144}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":87,"column":12},"generated":{"line":1,"column":1146}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":87,"column":18},"generated":{"line":1,"column":1152}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":87,"column":22},"generated":{"line":1,"column":1156}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":87,"column":22},"generated":{"line":1,"column":1158}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":87,"column":50},"generated":{"line":1,"column":1186}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":1,"column":1191}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":89,"column":15},"generated":{"line":1,"column":1198}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":1200}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":1,"column":1213}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":92,"column":38},"generated":{"line":1,"column":1215}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":1218}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":1221}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":93,"column":17},"generated":{"line":1,"column":1226}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":93,"column":27},"generated":{"line":1,"column":1236}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":93,"column":31},"generated":{"line":1,"column":1240}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":94,"column":12},"generated":{"line":1,"column":1243}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":94,"column":18},"generated":{"line":1,"column":1249}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":94,"column":22},"generated":{"line":1,"column":1253}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":94,"column":22},"generated":{"line":1,"column":1255}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":94,"column":51},"generated":{"line":1,"column":1284}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":100,"column":8},"generated":{"line":1,"column":1289}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":1,"column":1296}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":96,"column":13},"generated":{"line":1,"column":1301}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":96,"column":23},"generated":{"line":1,"column":1311}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":96,"column":27},"generated":{"line":1,"column":1315}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":96,"column":33},"generated":{"line":1,"column":1317}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":1318}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":97,"column":16},"generated":{"line":1,"column":1321}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":97,"column":21},"generated":{"line":1,"column":1326}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":1338}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":1343}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":100,"column":15},"generated":{"line":1,"column":1347}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":100,"column":20},"generated":{"line":1,"column":1352}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":103,"column":11},"generated":{"line":1,"column":1366}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":103,"column":26},"generated":{"line":1,"column":1381}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":1,"column":1384}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":104,"column":8},"generated":{"line":1,"column":1387}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":104,"column":13},"generated":{"line":1,"column":1392}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":104,"column":31},"generated":{"line":1,"column":1408}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":105,"column":8},"generated":{"line":1,"column":1410}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":105,"column":13},"generated":{"line":1,"column":1415}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":105,"column":33},"generated":{"line":1,"column":1433}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":106,"column":21},"generated":{"line":1,"column":1438}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":106,"column":12},"generated":{"line":1,"column":1445}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":106,"column":27},"generated":{"line":1,"column":1447}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":12},"generated":{"line":1,"column":1448}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":1,"column":1454}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":30},"generated":{"line":1,"column":1456}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":35},"generated":{"line":1,"column":1461}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":45},"generated":{"line":1,"column":1471}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":49},"generated":{"line":1,"column":1475}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":107,"column":54},"generated":{"line":1,"column":1477}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":108,"column":16},"generated":{"line":1,"column":1487}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":16},"generated":{"line":1,"column":1491}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":21},"generated":{"line":1,"column":1496}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":41},"generated":{"line":1,"column":1514}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":45},"generated":{"line":1,"column":1518}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":45},"generated":{"line":1,"column":1520}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":63},"generated":{"line":1,"column":1538}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":73},"generated":{"line":1,"column":1540}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":109,"column":83},"generated":{"line":1,"column":1550}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":114,"column":11},"generated":{"line":1,"column":1564}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":115,"column":8},"generated":{"line":1,"column":1581}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":115,"column":13},"generated":{"line":1,"column":1585}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":115,"column":18},"generated":{"line":1,"column":1590}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":116,"column":12},"generated":{"line":1,"column":1606}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":116,"column":18},"generated":{"line":1,"column":1612}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":116,"column":22},"generated":{"line":1,"column":1616}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":116,"column":22},"generated":{"line":1,"column":1618}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":116,"column":32},"generated":{"line":1,"column":1628}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":118,"column":8},"generated":{"line":1,"column":1643}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":118,"column":15},"generated":{"line":1,"column":1650}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":118,"column":20},"generated":{"line":1,"column":1655}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":121,"column":11},"generated":{"line":1,"column":1671}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":121,"column":29},"generated":{"line":1,"column":1689}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":8},"generated":{"line":1,"column":1692}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":14},"generated":{"line":1,"column":1698}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":21},"generated":{"line":1,"column":1700}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":26},"generated":{"line":1,"column":1705}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":36},"generated":{"line":1,"column":1715}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":122,"column":40},"generated":{"line":1,"column":1719}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":123,"column":8},"generated":{"line":1,"column":1722}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":123,"column":13},"generated":{"line":1,"column":1726}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":124,"column":12},"generated":{"line":1,"column":1728}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":124,"column":18},"generated":{"line":1,"column":1734}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":124,"column":22},"generated":{"line":1,"column":1738}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":124,"column":22},"generated":{"line":1,"column":1740}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":124,"column":52},"generated":{"line":1,"column":1770}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":126,"column":8},"generated":{"line":1,"column":1775}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":126,"column":15},"generated":{"line":1,"column":1782}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":129,"column":11},"generated":{"line":1,"column":1784}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":129,"column":34},"generated":{"line":1,"column":1807}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":8},"generated":{"line":1,"column":1810}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":14},"generated":{"line":1,"column":1816}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":21},"generated":{"line":1,"column":1818}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":26},"generated":{"line":1,"column":1823}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":46},"generated":{"line":1,"column":1843}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":130,"column":50},"generated":{"line":1,"column":1847}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":131,"column":8},"generated":{"line":1,"column":1850}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":131,"column":13},"generated":{"line":1,"column":1854}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":132,"column":12},"generated":{"line":1,"column":1856}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":132,"column":18},"generated":{"line":1,"column":1862}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":132,"column":22},"generated":{"line":1,"column":1866}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":132,"column":22},"generated":{"line":1,"column":1868}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":132,"column":50},"generated":{"line":1,"column":1896}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":134,"column":8},"generated":{"line":1,"column":1901}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":134,"column":15},"generated":{"line":1,"column":1908}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":137,"column":11},"generated":{"line":1,"column":1910}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":137,"column":34},"generated":{"line":1,"column":1933}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":137,"column":52},"generated":{"line":1,"column":1935}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":138,"column":8},"generated":{"line":1,"column":1938}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":138,"column":13},"generated":{"line":1,"column":1943}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":138,"column":33},"generated":{"line":1,"column":1963}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":138,"column":37},"generated":{"line":1,"column":1967}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":138,"column":47},"generated":{"line":1,"column":1969}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1973}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1981}},{"source":"../src/wasm/emitter/emitter_context.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1996}}],"sources":{"../src/wasm/emitter/emitter_context.ts":"import {SourceMapConsumer} from \"source-map\";\nimport {WFunctionType} from \"..\";\nimport {EmitError} from \"../../common/error\";\nimport {SourceLocation} from \"../../common/node\";\nimport {SourceMap} from \"../../common/object\";\nimport {WFunction} from \"../section/wfunction\";\nimport {WType} from \"../tool/constant\";\n\nexport interface FunctionInfo {\n    id: number;\n    type: WFunctionType;\n}\n\nexport interface GlobalInfo {\n    id: number;\n    type: WType;\n}\n\nexport class EmitterContext {\n\n    public funcTypeEncodingMap: Map<string, number>;\n    public functionMap: Map<string, FunctionInfo>;\n    public globalMap: Map<string, GlobalInfo>;\n    public functionIdNow: number;\n    public globalIdNow: number;\n    public currentFunction: WFunction | null;\n    public externMap: Map<string, number>;\n    public sourceMap: Map<string, SourceMap>;\n    public sourceMapConsumer: SourceMapConsumer | null;\n\n    constructor(externMap: Map<string, number>, sourceMap: Map<string, SourceMap>) {\n        this.functionMap = new Map<string, FunctionInfo>();\n        this.globalMap = new Map<string, GlobalInfo>();\n        this.funcTypeEncodingMap = new Map<string, number>();\n        this.functionIdNow = 0;\n        this.globalIdNow = 0;\n        this.currentFunction = null;\n        this.externMap = externMap;\n        this.sourceMap = sourceMap;\n        this.sourceMapConsumer = null;\n    }\n\n    public getStartLine(location: SourceLocation): number {\n        if (this.sourceMapConsumer && location.start.line >= 1) {\n            return this.sourceMapConsumer.originalPositionFor(location.start).line;\n        }\n        return -1;\n    }\n\n    public getEndLine(location: SourceLocation): number {\n        if (this.sourceMapConsumer && location.end.line >= 1) {\n            return this.sourceMapConsumer.originalPositionFor(location.end).line;\n        }\n        return -1;\n    }\n\n    public setSourceMap(fileName: string) {\n        if (fileName && this.sourceMap && this.sourceMap.get(fileName)) {\n            this.sourceMapConsumer = new SourceMapConsumer(this.sourceMap.get(fileName)!.sourceMap.toString());\n        } else {\n            this.sourceMapConsumer = null;\n        }\n    }\n\n    public getFuncInfo(name: string): FunctionInfo {\n        const info = this.functionMap.get(name);\n        if (!info) {\n            throw new EmitError(`undefined function ${name}`);\n        }\n        return info;\n    }\n\n    public submitFunc(name: string, type: WFunctionType): number {\n        if (this.functionMap.has(name)) {\n            throw new EmitError(`duplicated name ${name}`);\n        }\n        this.functionMap.set(name, {\n            id: this.functionIdNow,\n            type,\n        });\n        return this.functionIdNow++;\n    }\n\n    public getGlobalInfo(name: string): GlobalInfo {\n        const info = this.globalMap.get(name);\n        if (!info) {\n            throw new EmitError(`undefined name ${name}`);\n        }\n        return info;\n    }\n\n    public submitGlobal(name: string, type: WType): number {\n        if (this.globalMap.has(name)) {\n            throw new EmitError(`duplicated name ${name}`);\n        }\n        this.globalMap.set(name, {\n            id: this.globalIdNow,\n            type,\n        });\n        return this.globalIdNow++;\n    }\n\n    public setCurrentFunc(func: WFunction | null) {\n        this.currentFunction = func;\n        this.sourceMapConsumer = null;\n        if (func !== null) {\n            const sourceMap = this.sourceMap.get(func.fileName);\n            if (sourceMap) {\n                this.sourceMapConsumer = new SourceMapConsumer(sourceMap.sourceMap.toString());\n            }\n        }\n    }\n\n    public getCurrentFunc(): WFunction {\n        if (!this.currentFunction) {\n            throw new EmitError(`not in func`);\n        }\n        return this.currentFunction;\n    }\n\n    public getExternLocation(name: string): number {\n        const item = this.externMap.get(name);\n        if (!item) {\n            throw new EmitError(`unresolve symbol ${name}`);\n        }\n        return item;\n    }\n\n    public getTypeIdxFromEncoding(encoding: string): number {\n        const item = this.funcTypeEncodingMap.get(encoding);\n        if (!item) {\n            throw new EmitError(`unresolve type ${encoding}`);\n        }\n        return item;\n    }\n\n    public setTypeIdxFromEncoding(encoding: string, idx: number): void {\n        this.funcTypeEncodingMap.set(encoding, idx);\n    }\n\n}\n"},"lineCount":null}},"error":null,"hash":"fee805d065d6f32d6834f17ee7e53cbd","cacheData":{"env":{}}}