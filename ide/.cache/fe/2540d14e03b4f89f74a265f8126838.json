{"id":"BUJe","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"../common/error","loc":{"line":9,"column":24,"index":214},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"},{"name":"../type/class_type","loc":{"line":10,"column":29,"index":263},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/type/class_type.ts"},{"name":"../type/compound_type","loc":{"line":11,"column":32,"index":318},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/type/compound_type.ts"},{"name":"../type/primitive_type","loc":{"line":12,"column":33,"index":377},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/type/primitive_type.ts"},{"name":"./address","loc":{"line":13,"column":26,"index":430},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/address.ts"},{"name":"./scope","loc":{"line":14,"column":24,"index":468},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/reference.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/scope.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.doReferenceBinding=void 0;const e=require(\"../common/error\"),t=require(\"../type/class_type\"),r=require(\"../type/compound_type\"),n=require(\"../type/primitive_type\"),o=require(\"./address\"),s=require(\"./scope\");function p(p,i,l,a){if(i.expr instanceof s.FunctionLookUpResult||l.expr instanceof s.FunctionLookUpResult)throw new e.InternalError(\"unsupport function name\");if(!(i.type instanceof r.LeftReferenceType))throw new e.InternalError(\"you could only bind to a reference\");if(!(i.isLeft&&i.expr instanceof o.WAddressHolder))throw new e.InternalError(\"the reference is not a left value\");if(l.type instanceof r.ReferenceType){const r=l.type.elementType,s=i.type.elementType;if(r instanceof t.ClassType&&s instanceof t.ClassType){if(!r.isSubClassOf(s))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`)}else if(!l.type.elementType.equals(i.type.elementType))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`);l.expr instanceof o.WAddressHolder&&(l.expr=l.expr.createLoad(p,l.type)),p.submitStatement(i.expr.createStore(p,n.PrimitiveTypes.uint32,l.expr))}else{const r=l.type,s=i.type.elementType;if(r instanceof t.ClassType&&s instanceof t.ClassType){if(!r.isSubClassOf(s))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`)}else if(!l.type.equals(i.type.elementType))throw new e.InternalError(`could not convert from ${l.type} to ${i.type}`);if(!(l.isLeft&&l.expr instanceof o.WAddressHolder))throw new e.InternalError(\"you could only bind to a left value\");p.submitStatement(i.expr.createStore(p,n.PrimitiveTypes.uint32,l.expr.createLoadAddress(p)))}}exports.doReferenceBinding=p;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":100}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":102}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":108}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":110}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":118}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":137}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":139}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":147}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":169}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":171}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":179}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":204}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":206}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":214}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":240}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":242}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":250}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":263}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":265}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":273}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":284}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":16},"generated":{"line":1,"column":293}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":35},"generated":{"line":1,"column":295}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":56},"generated":{"line":1,"column":297}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":17,"column":35},"generated":{"line":1,"column":299}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":17,"column":58},"generated":{"line":1,"column":301}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":18,"column":4},"generated":{"line":1,"column":304}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":307}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":1,"column":309}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":18,"column":28},"generated":{"line":1,"column":325}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":18,"column":28},"generated":{"line":1,"column":327}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":349}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":351}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":19,"column":31},"generated":{"line":1,"column":367}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":19,"column":31},"generated":{"line":1,"column":369}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":390}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":1,"column":396}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":400}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":402}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":20,"column":32},"generated":{"line":1,"column":416}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":443}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":448}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":23,"column":15},"generated":{"line":1,"column":450}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":23,"column":31},"generated":{"line":1,"column":466}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":23,"column":31},"generated":{"line":1,"column":468}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":487}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":24,"column":14},"generated":{"line":1,"column":493}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":24,"column":18},"generated":{"line":1,"column":497}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":24,"column":18},"generated":{"line":1,"column":499}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":24,"column":32},"generated":{"line":1,"column":513}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":1,"column":551}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":556}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":14},"generated":{"line":1,"column":558}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":27},"generated":{"line":1,"column":566}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":31},"generated":{"line":1,"column":568}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":47},"generated":{"line":1,"column":584}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":27,"column":47},"generated":{"line":1,"column":586}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":602}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":608}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":28,"column":18},"generated":{"line":1,"column":612}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":28,"column":18},"generated":{"line":1,"column":614}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":28,"column":32},"generated":{"line":1,"column":628}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":665}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":9},"generated":{"line":1,"column":668}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":670}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":686}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":688}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":31,"column":45},"generated":{"line":1,"column":702}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":703}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":33,"column":14},"generated":{"line":1,"column":709}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":33,"column":19},"generated":{"line":1,"column":711}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":713}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":33,"column":28},"generated":{"line":1,"column":718}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":730}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":34,"column":19},"generated":{"line":1,"column":732}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":34,"column":23},"generated":{"line":1,"column":734}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":739}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":751}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":13},"generated":{"line":1,"column":754}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":27},"generated":{"line":1,"column":767}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":27},"generated":{"line":1,"column":769}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":40},"generated":{"line":1,"column":780}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":54},"generated":{"line":1,"column":793}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":36,"column":54},"generated":{"line":1,"column":795}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":37,"column":12},"generated":{"line":1,"column":806}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":37,"column":18},"generated":{"line":1,"column":810}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":37,"column":21},"generated":{"line":1,"column":812}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":37,"column":34},"generated":{"line":1,"column":825}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":16},"generated":{"line":1,"column":828}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":1,"column":834}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":838}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":840}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":66},"generated":{"line":1,"column":880}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":70},"generated":{"line":1,"column":882}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":81},"generated":{"line":1,"column":893}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":38,"column":85},"generated":{"line":1,"column":895}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":12},"generated":{"line":1,"column":908}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":18},"generated":{"line":1,"column":912}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":22},"generated":{"line":1,"column":914}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":27},"generated":{"line":1,"column":919}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":39},"generated":{"line":1,"column":931}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":46},"generated":{"line":1,"column":938}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":50},"generated":{"line":1,"column":940}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":41,"column":55},"generated":{"line":1,"column":945}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":16},"generated":{"line":1,"column":958}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":22},"generated":{"line":1,"column":964}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":26},"generated":{"line":1,"column":968}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":26},"generated":{"line":1,"column":970}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":66},"generated":{"line":1,"column":1010}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":70},"generated":{"line":1,"column":1012}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":81},"generated":{"line":1,"column":1023}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":42,"column":85},"generated":{"line":1,"column":1025}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":1033}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":46,"column":16},"generated":{"line":1,"column":1035}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":1051}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":1053}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":1070}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":1,"column":1072}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":23},"generated":{"line":1,"column":1077}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":27},"generated":{"line":1,"column":1079}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":32},"generated":{"line":1,"column":1084}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":43},"generated":{"line":1,"column":1095}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":48},"generated":{"line":1,"column":1097}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":47,"column":52},"generated":{"line":1,"column":1099}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":1106}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":12},"generated":{"line":1,"column":1108}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":28},"generated":{"line":1,"column":1124}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":32},"generated":{"line":1,"column":1126}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":37},"generated":{"line":1,"column":1131}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":49},"generated":{"line":1,"column":1143}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":54},"generated":{"line":1,"column":1145}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":54},"generated":{"line":1,"column":1147}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":50,"column":69},"generated":{"line":1,"column":1162}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":51,"column":12},"generated":{"line":1,"column":1169}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":1171}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":1,"column":1182}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1183}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":53,"column":14},"generated":{"line":1,"column":1189}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":53,"column":19},"generated":{"line":1,"column":1191}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":53,"column":23},"generated":{"line":1,"column":1193}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":54,"column":14},"generated":{"line":1,"column":1198}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":54,"column":19},"generated":{"line":1,"column":1200}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":54,"column":23},"generated":{"line":1,"column":1202}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":54,"column":28},"generated":{"line":1,"column":1207}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":1219}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":13},"generated":{"line":1,"column":1222}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":27},"generated":{"line":1,"column":1235}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":27},"generated":{"line":1,"column":1237}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":40},"generated":{"line":1,"column":1248}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":54},"generated":{"line":1,"column":1261}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":56,"column":54},"generated":{"line":1,"column":1263}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":1274}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":57,"column":18},"generated":{"line":1,"column":1278}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":57,"column":21},"generated":{"line":1,"column":1280}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":57,"column":34},"generated":{"line":1,"column":1293}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":1,"column":1296}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":1302}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":26},"generated":{"line":1,"column":1306}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":26},"generated":{"line":1,"column":1308}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":66},"generated":{"line":1,"column":1348}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":70},"generated":{"line":1,"column":1350}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":81},"generated":{"line":1,"column":1361}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":58,"column":85},"generated":{"line":1,"column":1363}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":1,"column":1376}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":18},"generated":{"line":1,"column":1380}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":1382}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":27},"generated":{"line":1,"column":1387}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":34},"generated":{"line":1,"column":1394}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":38},"generated":{"line":1,"column":1396}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":61,"column":43},"generated":{"line":1,"column":1401}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":1,"column":1414}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":22},"generated":{"line":1,"column":1420}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":1424}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":1426}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":66},"generated":{"line":1,"column":1466}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":70},"generated":{"line":1,"column":1468}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":81},"generated":{"line":1,"column":1479}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":62,"column":85},"generated":{"line":1,"column":1481}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":1489}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":1,"column":1494}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":17},"generated":{"line":1,"column":1496}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":29},"generated":{"line":1,"column":1504}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":33},"generated":{"line":1,"column":1506}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":49},"generated":{"line":1,"column":1522}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":65,"column":49},"generated":{"line":1,"column":1524}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":1540}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":66,"column":18},"generated":{"line":1,"column":1546}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":66,"column":22},"generated":{"line":1,"column":1550}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":66,"column":22},"generated":{"line":1,"column":1552}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":66,"column":36},"generated":{"line":1,"column":1566}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":1605}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":12},"generated":{"line":1,"column":1607}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":28},"generated":{"line":1,"column":1623}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":32},"generated":{"line":1,"column":1625}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":37},"generated":{"line":1,"column":1630}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":49},"generated":{"line":1,"column":1642}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":54},"generated":{"line":1,"column":1644}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":54},"generated":{"line":1,"column":1646}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":69,"column":69},"generated":{"line":1,"column":1661}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":70,"column":12},"generated":{"line":1,"column":1668}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":70,"column":16},"generated":{"line":1,"column":1670}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":70,"column":21},"generated":{"line":1,"column":1675}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":70,"column":39},"generated":{"line":1,"column":1693}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":1699}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":1707}},{"source":"../src/codegen/reference.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":1,"column":1726}}],"sources":{"../src/codegen/reference.ts":"/**\n *  @file\n *  @author zcy <zurl@live.com>\n *  Created at 21/07/2018\n */\nimport {InternalError} from \"../common/error\";\nimport {Node} from \"../common/node\";\nimport {ClassType} from \"../type/class_type\";\nimport {LeftReferenceType, ReferenceType} from \"../type/compound_type\";\nimport {PrimitiveTypes} from \"../type/primitive_type\";\nimport {WAddressHolder} from \"./address\";\nimport {CompileContext} from \"./context\";\nimport {ExpressionResult} from \"./expression/expression\";\nimport {FunctionLookUpResult} from \"./scope\";\n\nexport function doReferenceBinding(ctx: CompileContext, dst: ExpressionResult,\n                                   src: ExpressionResult, node: Node) {\n    if (dst.expr instanceof FunctionLookUpResult\n        || src.expr instanceof FunctionLookUpResult) {\n        throw new InternalError(`unsupport function name`);\n    }\n\n    if ( !(dst.type instanceof LeftReferenceType)) {\n        throw new InternalError(`you could only bind to a reference`);\n    }\n\n    if (!(dst.isLeft) || !(dst.expr instanceof WAddressHolder)) {\n        throw new InternalError(`the reference is not a left value`);\n    }\n\n    if ( src.type instanceof ReferenceType ) {\n\n        const sr = src.type.elementType;\n        const dr = dst.type.elementType;\n\n        if ( sr instanceof ClassType && dr instanceof ClassType) {\n            if ( !sr.isSubClassOf(dr) ) {\n                throw new InternalError(`could not convert from ${src.type} to ${dst.type}`);\n            }\n        } else {\n            if ( !src.type.elementType.equals(dst.type.elementType)) {\n                throw new InternalError(`could not convert from ${src.type} to ${dst.type}`);\n            }\n        }\n\n        if (src.expr instanceof WAddressHolder) {\n            src.expr = src.expr.createLoad(ctx, src.type);\n        }\n\n        ctx.submitStatement(dst.expr.createStore(ctx, PrimitiveTypes.uint32,\n            src.expr));\n    } else {\n        const sr = src.type;\n        const dr = dst.type.elementType;\n\n        if ( sr instanceof ClassType && dr instanceof ClassType) {\n            if ( !sr.isSubClassOf(dr) ) {\n                throw new InternalError(`could not convert from ${src.type} to ${dst.type}`);\n            }\n        } else {\n            if ( !src.type.equals(dst.type.elementType)) {\n                throw new InternalError(`could not convert from ${src.type} to ${dst.type}`);\n            }\n        }\n        if (!src.isLeft || !(src.expr instanceof WAddressHolder)) {\n            throw new InternalError(`you could only bind to a left value`);\n        }\n\n        ctx.submitStatement(dst.expr.createStore(ctx, PrimitiveTypes.uint32,\n            src.expr.createLoadAddress(ctx)));\n    }\n\n}\n"},"lineCount":null}},"error":null,"hash":"2bbb115ba3eb0fb3fc397acccd3cfa3e","cacheData":{"env":{}}}