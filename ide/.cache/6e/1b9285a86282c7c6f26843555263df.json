{"id":"qolR","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"../node","loc":{"line":4,"column":23,"index":128},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/section/wfunction.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/node.ts"},{"name":"../tool/constant","loc":{"line":5,"column":27,"index":167},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/section/wfunction.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/tool/constant.ts"},{"name":"./wfunction_type","loc":{"line":6,"column":33,"index":221},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/section/wfunction.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/section/wfunction_type.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WFunction=void 0;const t=require(\"../node\"),e=require(\"../tool/constant\"),i=require(\"./wfunction_type\");class o extends t.WNode{constructor(t,e,o,s,n,r,a){super(a),this.name=t,this.displayName=e,this.type=new i.WFunctionType(o,s,a),this.local=n,this.body=r,this.signatureId=0,this.dataStart=0,this.bssStart=0,this.fileName=\"\"}emit(t){const i=t.createLengthSlot();t.emit(e.WType.u32,this.local.length),this.local.map(i=>{t.emit(e.WType.u32,1),t.writeByte(e.getNativeType(i))}),t.enterFunction(this),this.body.map(e=>e.emit(t)),t.submitFunction(),t.emitIns(e.Control.end,e.WType.none,0,this.location),t.fillLengthSlot(i)}optimize(t){this.body.map(e=>e.optimize(t))}}exports.WFunction=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":91}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":93}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":99}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":101}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":109}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":120}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":122}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":130}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":150}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":152}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":160}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":180}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":186}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":196}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":198}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":204}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":21,"column":16},"generated":{"line":1,"column":216}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":21,"column":30},"generated":{"line":1,"column":218}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":21,"column":51},"generated":{"line":1,"column":220}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":21,"column":72},"generated":{"line":1,"column":222}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":224}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":226}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":22,"column":52},"generated":{"line":1,"column":228}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":231}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":23,"column":14},"generated":{"line":1,"column":237}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":240}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":1,"column":245}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":250}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":252}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":25,"column":13},"generated":{"line":1,"column":257}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":25,"column":27},"generated":{"line":1,"column":269}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":271}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":276}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":20},"generated":{"line":1,"column":281}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":24},"generated":{"line":1,"column":285}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":24},"generated":{"line":1,"column":287}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":38},"generated":{"line":1,"column":301}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":50},"generated":{"line":1,"column":303}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":26,"column":62},"generated":{"line":1,"column":305}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":308}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":313}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":319}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":321}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":28,"column":13},"generated":{"line":1,"column":326}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":331}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":333}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":338}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":1,"column":350}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":352}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":357}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":32,"column":25},"generated":{"line":1,"column":367}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":369}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":374}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":33,"column":24},"generated":{"line":1,"column":383}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":385}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":390}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":1,"column":399}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":37,"column":11},"generated":{"line":1,"column":402}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":37,"column":16},"generated":{"line":1,"column":407}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":410}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":38,"column":14},"generated":{"line":1,"column":416}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":38,"column":21},"generated":{"line":1,"column":418}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":420}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":439}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":441}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":446}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":448}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":1,"column":454}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":26},"generated":{"line":1,"column":458}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":31},"generated":{"line":1,"column":463}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":39,"column":37},"generated":{"line":1,"column":469}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":477}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":1,"column":482}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":40,"column":19},"generated":{"line":1,"column":488}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":40,"column":24},"generated":{"line":1,"column":492}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":12},"generated":{"line":1,"column":496}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":14},"generated":{"line":1,"column":498}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":19},"generated":{"line":1,"column":503}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":19},"generated":{"line":1,"column":505}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":25},"generated":{"line":1,"column":511}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":41,"column":30},"generated":{"line":1,"column":515}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":42,"column":12},"generated":{"line":1,"column":518}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":42,"column":14},"generated":{"line":1,"column":520}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":42,"column":24},"generated":{"line":1,"column":530}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":42,"column":24},"generated":{"line":1,"column":532}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":42,"column":38},"generated":{"line":1,"column":546}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":552}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":44,"column":10},"generated":{"line":1,"column":554}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":44,"column":24},"generated":{"line":1,"column":568}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":574}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":1,"column":579}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":18},"generated":{"line":1,"column":584}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":1,"column":588}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":1,"column":591}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":37},"generated":{"line":1,"column":593}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":45,"column":42},"generated":{"line":1,"column":598}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":602}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":604}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":621}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":623}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":631}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":633}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":641}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":31},"generated":{"line":1,"column":645}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":31},"generated":{"line":1,"column":647}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":37},"generated":{"line":1,"column":653}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":43},"generated":{"line":1,"column":658}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":46},"generated":{"line":1,"column":660}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":47,"column":51},"generated":{"line":1,"column":665}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":675}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":48,"column":10},"generated":{"line":1,"column":677}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":48,"column":25},"generated":{"line":1,"column":692}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":51,"column":11},"generated":{"line":1,"column":695}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":704}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":707}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":712}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":18},"generated":{"line":1,"column":717}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":23},"generated":{"line":1,"column":721}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":29},"generated":{"line":1,"column":724}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":31},"generated":{"line":1,"column":726}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":52,"column":40},"generated":{"line":1,"column":735}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":740}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":748}},{"source":"../src/wasm/section/wfunction.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":758}}],"sources":{"../src/wasm/section/wfunction.ts":"import {SourceLocation} from \"../../common/node\";\nimport {Emitter} from \"../emitter/emitter\";\nimport {WNode} from \"../node\";\nimport {WStatement} from \"../statement/wstatement\";\nimport {Control, getNativeType, WType} from \"../tool/constant\";\nimport {WFunctionType} from \"./wfunction_type\";\n\nexport class WFunction extends WNode {\n    public name: string;\n    public type: WFunctionType;\n    public local: WType[];\n    public body: WStatement[];\n    public signatureId: number;\n    public displayName: string;\n\n    // fill in linking\n    public dataStart: number;\n    public bssStart: number;\n    public fileName: string;\n\n    constructor(name: string, displayName: string, returnType: WType[], parameters: WType[],\n                local: WType[], body: WStatement[], location: SourceLocation) {\n        super(location);\n        this.name = name;\n        this.displayName = displayName;\n        this.type = new WFunctionType(returnType, parameters, location);\n        this.local = local;\n        this.body = body;\n        this.signatureId = 0;\n\n        // fill in linking\n        this.dataStart = 0;\n        this.bssStart = 0;\n        this.fileName = \"\";\n    }\n\n    public emit(e: Emitter): void {\n        const slot = e.createLengthSlot();\n        e.emit(WType.u32, this.local.length);\n        this.local.map((x) => {\n            e.emit(WType.u32, 1);\n            e.writeByte(getNativeType(x));\n        });\n        e.enterFunction(this);\n        this.body.map((stmt) => stmt.emit(e));\n        e.submitFunction();\n        e.emitIns(Control.end, WType.none, 0, this.location);\n        e.fillLengthSlot(slot);\n    }\n\n    public optimize(e: Emitter): void {\n        this.body.map((x) => x.optimize(e));\n    }\n\n}\n"},"lineCount":null}},"error":null,"hash":"35c669577fe01d9c945c18859b2a351f","cacheData":{"env":{}}}