{"id":"cKzO","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"../common/error","loc":{"line":4,"column":24,"index":134},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"},{"name":"../common/symbol","loc":{"line":5,"column":25,"index":179},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/symbol.ts"},{"name":"../type","loc":{"line":6,"column":23,"index":223},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/type/index.ts"},{"name":"./class/destructor","loc":{"line":7,"column":29,"index":264},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/class/destructor.ts"},{"name":"./memory","loc":{"line":8,"column":25,"index":312},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/memory.ts"},{"name":"./scope","loc":{"line":9,"column":24,"index":349},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/context.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/scope.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.CompileContext=void 0;const t=require(\"../common/error\"),e=require(\"../common/symbol\"),n=require(\"../type\"),r=require(\"./class/destructor\"),o=require(\"./memory\"),s=require(\"./scope\");class i{constructor(t,e={},n,r){this.scopeManager=new s.ScopeManager(!!e.isCpp),this.functionMap=new Map,this.memory=new o.MemoryLayout(1e3),this.options=e,this.fileName=t,this.sourceMap=r,this.source=n,this.functions=[],this.imports=[],this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:null},this.funcContexts=[],this.requiredWASMFuncTypes=new Set}isCpp(){return!!this.options.isCpp}enterFunction(t){this.functionMap.set(t.shortName,t),this.scopeManager.enterScope(t.fullName),this.memory.enterFunction(),this.funcContexts.push(this.currentFuncContext),this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:t}}exitFunction(){if(this.funcContexts.length<=0)throw new t.InternalError(\"this.currentFunction==null\");this.memory.exitFunction(),this.scopeManager.exitScope(),this.currentFuncContext=this.funcContexts.pop()}enterScope(){this.scopeManager.enterUnnamedScope(!1)}exitScope(t){r.triggerAllDestructor(this,t),this.scopeManager.exitScope()}setStatementContainer(t){this.currentFuncContext.statementContainer=t}getStatementContainer(){return this.currentFuncContext.statementContainer}submitStatement(t){this.currentFuncContext.statementContainer.push(t)}submitFunction(t){this.functions.push(t)}raiseWarning(t,e){console.log(\"[Warning]: \"+t)}toCompiledObject(){return{fileName:this.fileName,dataSize:this.memory.dataPtr,functions:this.functions,imports:this.imports,exports:[],data:this.memory.dataBuffer,globalStatements:this.currentFuncContext.statementContainer,source:this.source,sourceMap:this.sourceMap,requiredWASMFuncTypes:this.requiredWASMFuncTypes,scope:this.scopeManager.root}}allocTmpVar(t,r){const o=this.scopeManager.allocTmpVarName(),s=new e.Variable(o,o,r.location.fileName,t,e.AddressType.STACK,this.memory.allocStack(t.length),n.AccessControl.Public);return this.scopeManager.define(o,s,r),[o,s]}}exports.CompileContext=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":96}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":98}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":104}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":106}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":114}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":133}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":135}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":143}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":163}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":165}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":173}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":184}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":186}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":194}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":216}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":218}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":226}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":238}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":240}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":248}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":259}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":265}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":267}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":61,"column":16},"generated":{"line":1,"column":279}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":61,"column":34},"generated":{"line":1,"column":281}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":61,"column":67},"generated":{"line":1,"column":283}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":1,"column":286}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":62,"column":33},"generated":{"line":1,"column":288}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":291}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":13},"generated":{"line":1,"column":296}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":28},"generated":{"line":1,"column":309}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":32},"generated":{"line":1,"column":313}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":32},"generated":{"line":1,"column":315}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":47},"generated":{"line":1,"column":330}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":63,"column":62},"generated":{"line":1,"column":332}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":339}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":64,"column":13},"generated":{"line":1,"column":344}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":356}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":64,"column":31},"generated":{"line":1,"column":360}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":364}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":1,"column":369}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":376}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":26},"generated":{"line":1,"column":380}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":26},"generated":{"line":1,"column":382}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":65,"column":39},"generated":{"line":1,"column":395}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":400}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":405}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":66,"column":23},"generated":{"line":1,"column":413}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":415}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":67,"column":13},"generated":{"line":1,"column":420}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":67,"column":24},"generated":{"line":1,"column":429}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":68,"column":8},"generated":{"line":1,"column":431}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":68,"column":13},"generated":{"line":1,"column":436}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":68,"column":25},"generated":{"line":1,"column":446}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":448}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":69,"column":13},"generated":{"line":1,"column":453}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":69,"column":22},"generated":{"line":1,"column":460}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":462}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":70,"column":13},"generated":{"line":1,"column":467}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":70,"column":25},"generated":{"line":1,"column":477}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":480}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":71,"column":13},"generated":{"line":1,"column":485}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":71,"column":23},"generated":{"line":1,"column":493}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":496}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":1,"column":501}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":72,"column":34},"generated":{"line":1,"column":520}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":73,"column":12},"generated":{"line":1,"column":521}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":73,"column":32},"generated":{"line":1,"column":540}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":543}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":74,"column":27},"generated":{"line":1,"column":557}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":75,"column":12},"generated":{"line":1,"column":562}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":75,"column":24},"generated":{"line":1,"column":573}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":76,"column":12},"generated":{"line":1,"column":576}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":76,"column":27},"generated":{"line":1,"column":590}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":593}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":77,"column":24},"generated":{"line":1,"column":604}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":78,"column":12},"generated":{"line":1,"column":606}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":78,"column":29},"generated":{"line":1,"column":622}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":1,"column":628}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":80,"column":13},"generated":{"line":1,"column":633}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":80,"column":28},"generated":{"line":1,"column":646}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":649}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":81,"column":13},"generated":{"line":1,"column":654}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":81,"column":37},"generated":{"line":1,"column":676}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":81,"column":41},"generated":{"line":1,"column":680}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":1,"column":684}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":692}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":85,"column":17},"generated":{"line":1,"column":700}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":85,"column":22},"generated":{"line":1,"column":705}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":85,"column":30},"generated":{"line":1,"column":713}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":88,"column":11},"generated":{"line":1,"column":719}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":88,"column":25},"generated":{"line":1,"column":733}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":1,"column":736}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":13},"generated":{"line":1,"column":741}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":1,"column":753}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":1,"column":757}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":44},"generated":{"line":1,"column":759}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":89,"column":55},"generated":{"line":1,"column":769}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":772}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":90,"column":13},"generated":{"line":1,"column":777}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":90,"column":26},"generated":{"line":1,"column":790}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":90,"column":37},"generated":{"line":1,"column":801}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":90,"column":52},"generated":{"line":1,"column":803}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":91,"column":8},"generated":{"line":1,"column":813}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":91,"column":13},"generated":{"line":1,"column":818}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":91,"column":20},"generated":{"line":1,"column":825}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":841}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":92,"column":13},"generated":{"line":1,"column":846}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":92,"column":26},"generated":{"line":1,"column":859}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":92,"column":31},"generated":{"line":1,"column":864}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":92,"column":36},"generated":{"line":1,"column":869}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":889}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":93,"column":13},"generated":{"line":1,"column":894}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":93,"column":34},"generated":{"line":1,"column":913}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":94,"column":12},"generated":{"line":1,"column":914}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":94,"column":32},"generated":{"line":1,"column":933}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":936}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":95,"column":27},"generated":{"line":1,"column":950}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":96,"column":12},"generated":{"line":1,"column":955}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":96,"column":24},"generated":{"line":1,"column":966}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":969}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":97,"column":27},"generated":{"line":1,"column":983}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":986}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":98,"column":24},"generated":{"line":1,"column":997}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":99,"column":12},"generated":{"line":1,"column":999}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":99,"column":29},"generated":{"line":1,"column":1015}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":103,"column":11},"generated":{"line":1,"column":1018}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":104,"column":8},"generated":{"line":1,"column":1033}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":104,"column":12},"generated":{"line":1,"column":1036}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":104,"column":17},"generated":{"line":1,"column":1041}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":104,"column":30},"generated":{"line":1,"column":1054}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":104,"column":40},"generated":{"line":1,"column":1062}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":105,"column":12},"generated":{"line":1,"column":1064}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":1070}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1074}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1076}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":105,"column":36},"generated":{"line":1,"column":1090}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":107,"column":8},"generated":{"line":1,"column":1120}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":107,"column":13},"generated":{"line":1,"column":1125}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":107,"column":20},"generated":{"line":1,"column":1132}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":1147}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":108,"column":13},"generated":{"line":1,"column":1152}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":108,"column":26},"generated":{"line":1,"column":1165}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":1,"column":1177}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":109,"column":13},"generated":{"line":1,"column":1182}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":109,"column":34},"generated":{"line":1,"column":1201}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":109,"column":39},"generated":{"line":1,"column":1206}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":109,"column":52},"generated":{"line":1,"column":1219}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":112,"column":11},"generated":{"line":1,"column":1225}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":113,"column":8},"generated":{"line":1,"column":1238}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":113,"column":13},"generated":{"line":1,"column":1243}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":113,"column":26},"generated":{"line":1,"column":1256}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":113,"column":44},"generated":{"line":1,"column":1275}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":116,"column":11},"generated":{"line":1,"column":1278}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":116,"column":21},"generated":{"line":1,"column":1288}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":1291}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":1293}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":117,"column":29},"generated":{"line":1,"column":1314}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":117,"column":35},"generated":{"line":1,"column":1319}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":118,"column":8},"generated":{"line":1,"column":1322}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":118,"column":13},"generated":{"line":1,"column":1327}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":118,"column":26},"generated":{"line":1,"column":1340}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":121,"column":11},"generated":{"line":1,"column":1352}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":121,"column":33},"generated":{"line":1,"column":1374}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":122,"column":8},"generated":{"line":1,"column":1377}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":122,"column":13},"generated":{"line":1,"column":1382}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":122,"column":32},"generated":{"line":1,"column":1401}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":122,"column":53},"generated":{"line":1,"column":1420}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":125,"column":11},"generated":{"line":1,"column":1422}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":126,"column":8},"generated":{"line":1,"column":1446}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":126,"column":15},"generated":{"line":1,"column":1453}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":126,"column":20},"generated":{"line":1,"column":1458}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":126,"column":39},"generated":{"line":1,"column":1477}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":129,"column":11},"generated":{"line":1,"column":1496}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":129,"column":27},"generated":{"line":1,"column":1512}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":130,"column":8},"generated":{"line":1,"column":1515}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":130,"column":13},"generated":{"line":1,"column":1520}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":130,"column":32},"generated":{"line":1,"column":1539}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":130,"column":51},"generated":{"line":1,"column":1558}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":130,"column":56},"generated":{"line":1,"column":1563}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":133,"column":11},"generated":{"line":1,"column":1566}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":133,"column":26},"generated":{"line":1,"column":1581}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":134,"column":8},"generated":{"line":1,"column":1584}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":134,"column":13},"generated":{"line":1,"column":1589}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":134,"column":23},"generated":{"line":1,"column":1599}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":134,"column":28},"generated":{"line":1,"column":1604}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":137,"column":11},"generated":{"line":1,"column":1607}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":137,"column":24},"generated":{"line":1,"column":1620}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":137,"column":41},"generated":{"line":1,"column":1622}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":138,"column":8},"generated":{"line":1,"column":1625}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":138,"column":16},"generated":{"line":1,"column":1633}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":138,"column":20},"generated":{"line":1,"column":1637}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":138,"column":36},"generated":{"line":1,"column":1651}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":141,"column":11},"generated":{"line":1,"column":1654}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":1,"column":1673}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":142,"column":15},"generated":{"line":1,"column":1679}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":143,"column":12},"generated":{"line":1,"column":1680}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":143,"column":22},"generated":{"line":1,"column":1689}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":143,"column":27},"generated":{"line":1,"column":1694}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":144,"column":12},"generated":{"line":1,"column":1703}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":144,"column":22},"generated":{"line":1,"column":1712}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":144,"column":27},"generated":{"line":1,"column":1717}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":144,"column":34},"generated":{"line":1,"column":1724}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":145,"column":12},"generated":{"line":1,"column":1732}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":145,"column":23},"generated":{"line":1,"column":1742}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":145,"column":28},"generated":{"line":1,"column":1747}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":146,"column":12},"generated":{"line":1,"column":1757}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":146,"column":21},"generated":{"line":1,"column":1765}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":146,"column":26},"generated":{"line":1,"column":1770}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":147,"column":12},"generated":{"line":1,"column":1778}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":147,"column":21},"generated":{"line":1,"column":1786}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":148,"column":12},"generated":{"line":1,"column":1789}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":148,"column":18},"generated":{"line":1,"column":1794}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":148,"column":23},"generated":{"line":1,"column":1799}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":148,"column":30},"generated":{"line":1,"column":1806}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":149,"column":12},"generated":{"line":1,"column":1817}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":149,"column":30},"generated":{"line":1,"column":1834}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":149,"column":35},"generated":{"line":1,"column":1839}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":149,"column":54},"generated":{"line":1,"column":1858}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":150,"column":12},"generated":{"line":1,"column":1877}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":150,"column":20},"generated":{"line":1,"column":1884}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":150,"column":25},"generated":{"line":1,"column":1889}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":151,"column":12},"generated":{"line":1,"column":1896}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":151,"column":23},"generated":{"line":1,"column":1906}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":151,"column":28},"generated":{"line":1,"column":1911}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":152,"column":12},"generated":{"line":1,"column":1921}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":152,"column":35},"generated":{"line":1,"column":1943}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":152,"column":40},"generated":{"line":1,"column":1948}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":153,"column":12},"generated":{"line":1,"column":1970}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":153,"column":19},"generated":{"line":1,"column":1976}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":153,"column":24},"generated":{"line":1,"column":1981}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":153,"column":37},"generated":{"line":1,"column":1994}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":157,"column":11},"generated":{"line":1,"column":2000}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":157,"column":23},"generated":{"line":1,"column":2012}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":157,"column":35},"generated":{"line":1,"column":2014}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":158,"column":8},"generated":{"line":1,"column":2017}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":158,"column":14},"generated":{"line":1,"column":2023}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":158,"column":24},"generated":{"line":1,"column":2025}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":158,"column":29},"generated":{"line":1,"column":2030}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":158,"column":42},"generated":{"line":1,"column":2043}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":14},"generated":{"line":1,"column":2061}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":26},"generated":{"line":1,"column":2063}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":30},"generated":{"line":1,"column":2067}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":30},"generated":{"line":1,"column":2069}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":39},"generated":{"line":1,"column":2078}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":48},"generated":{"line":1,"column":2080}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":57},"generated":{"line":1,"column":2082}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":62},"generated":{"line":1,"column":2084}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":71},"generated":{"line":1,"column":2093}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":159,"column":81},"generated":{"line":1,"column":2102}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":12},"generated":{"line":1,"column":2104}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":12},"generated":{"line":1,"column":2106}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":24},"generated":{"line":1,"column":2118}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":31},"generated":{"line":1,"column":2124}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":36},"generated":{"line":1,"column":2129}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":43},"generated":{"line":1,"column":2136}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":54},"generated":{"line":1,"column":2147}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":59},"generated":{"line":1,"column":2149}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":68},"generated":{"line":1,"column":2157}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":68},"generated":{"line":1,"column":2159}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":160,"column":82},"generated":{"line":1,"column":2173}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":162,"column":8},"generated":{"line":1,"column":2181}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":8},"generated":{"line":1,"column":2188}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":13},"generated":{"line":1,"column":2193}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":26},"generated":{"line":1,"column":2206}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":33},"generated":{"line":1,"column":2213}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":42},"generated":{"line":1,"column":2215}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":161,"column":53},"generated":{"line":1,"column":2217}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":162,"column":15},"generated":{"line":1,"column":2220}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":162,"column":16},"generated":{"line":1,"column":2221}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":162,"column":25},"generated":{"line":1,"column":2223}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":2227}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":2235}},{"source":"../src/codegen/context.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":2250}}],"sources":{"../src/codegen/context.ts":"/**\n *  @file\n *  @author zcy <zurl@live.com>\n *  Created at 15/06/2018\n */\nimport {SourceMapGenerator} from \"source-map\";\nimport {InternalError} from \"../common/error\";\nimport {Node} from \"../common/node\";\nimport {CompiledObject, ImportSymbol} from \"../common/object\";\nimport {AddressType, FunctionEntity, Variable} from \"../common/symbol\";\nimport {AccessControl, Type} from \"../type\";\nimport {WFunction, WExpression, WStatement} from \"../wasm\";\nimport {triggerAllDestructor} from \"./class/destructor\";\nimport {MemoryLayout} from \"./memory\";\nimport {ScopeManager} from \"./scope\";\n\nexport interface CompileOptions {\n    debug?: boolean;\n    isCpp?: boolean;\n}\n\nexport interface CaseContext {\n    statements: WStatement[];\n    value: WExpression | null;\n}\n\nexport interface SwitchContext {\n    cases: CaseContext[];\n}\nexport interface FuncContext {\n    statementContainer: WStatement[];\n    blockLevel: number;\n    switchContext: SwitchContext | null;\n    breakStack: number[];\n    continueStack: number[];\n    currentFunction: FunctionEntity | null;\n}\n\nexport class CompileContext {\n\n    // meta data\n    public fileName: string;\n    public options: CompileOptions;\n\n    // global shared\n    public memory: MemoryLayout;\n    public functionMap: Map<string, FunctionEntity>;\n    public scopeManager: ScopeManager;\n    public requiredWASMFuncTypes: Set<string>;\n    public functions: WFunction[];\n    public imports: ImportSymbol[];\n\n    // function internal\n    public funcContexts: FuncContext[];\n    public currentFuncContext: FuncContext;\n\n    // debug\n    public source?: string;\n    public sourceMap?: SourceMapGenerator;\n\n    constructor(fileName: string, compileOptions: CompileOptions = {},\n                source?: string, sourceMap?: SourceMapGenerator) {\n        this.scopeManager = new ScopeManager(!!compileOptions.isCpp);\n        this.functionMap = new Map<string, FunctionEntity>();\n        this.memory = new MemoryLayout(1000);\n        this.options = compileOptions;\n        this.fileName = fileName;\n        this.sourceMap = sourceMap;\n        this.source = source;\n        this.functions = [];\n        this.imports = [];\n        this.currentFuncContext = {\n            statementContainer: [],\n            switchContext: null,\n            breakStack: [],\n            continueStack: [],\n            blockLevel: 0,\n            currentFunction: null,\n        };\n        this.funcContexts = [];\n        this.requiredWASMFuncTypes = new Set<string>();\n    }\n\n    public isCpp(): boolean {\n        return !!this.options.isCpp;\n    }\n\n    public enterFunction(functionEntity: FunctionEntity) {\n        this.functionMap.set(functionEntity.shortName, functionEntity);\n        this.scopeManager.enterScope(functionEntity.fullName);\n        this.memory.enterFunction();\n        this.funcContexts.push(this.currentFuncContext);\n        this.currentFuncContext = {\n            statementContainer: [],\n            switchContext: null,\n            breakStack: [],\n            continueStack: [],\n            blockLevel: 0,\n            currentFunction: functionEntity,\n        };\n    }\n\n    public exitFunction() {\n        if (this.funcContexts.length <= 0) {\n            throw new InternalError(`this.currentFunction==null`);\n        }\n        this.memory.exitFunction();\n        this.scopeManager.exitScope();\n        this.currentFuncContext = this.funcContexts.pop()!;\n    }\n\n    public enterScope() {\n        this.scopeManager.enterUnnamedScope(false);\n    }\n\n    public exitScope(node: Node) {\n        triggerAllDestructor(this, node);\n        this.scopeManager.exitScope();\n    }\n\n    public setStatementContainer(constainer: WStatement[]) {\n        this.currentFuncContext.statementContainer = constainer;\n    }\n\n    public getStatementContainer(): WStatement[] {\n        return this.currentFuncContext.statementContainer;\n    }\n\n    public submitStatement(statement: WStatement) {\n        this.currentFuncContext.statementContainer.push(statement);\n    }\n\n    public submitFunction(func: WFunction) {\n        this.functions.push(func);\n    }\n\n    public raiseWarning(content: string, node: Node) {\n        console.log(\"[Warning]: \" + content);\n    }\n\n    public toCompiledObject(): CompiledObject {\n        return {\n            fileName: this.fileName,\n            dataSize: this.memory.dataPtr,\n            functions: this.functions,\n            imports: this.imports,\n            exports: [], // TODO:: exports\n            data: this.memory.dataBuffer,\n            globalStatements: this.currentFuncContext.statementContainer,\n            source: this.source,\n            sourceMap: this.sourceMap,\n            requiredWASMFuncTypes: this.requiredWASMFuncTypes,\n            scope: this.scopeManager.root,\n        };\n    }\n\n    public allocTmpVar(type: Type, node: Node): [string, Variable] {\n        const varName = this.scopeManager.allocTmpVarName();\n        const varEntity = new Variable(varName, varName, node.location.fileName, type,\n            AddressType.STACK, this.memory.allocStack(type.length), AccessControl.Public);\n        this.scopeManager.define(varName, varEntity, node);\n        return [varName, varEntity];\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"66a62996ec3e036d0258a55004446f69","cacheData":{"env":{}}}