{"id":"nyM5","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"../../common/error","loc":{"line":4,"column":24,"index":142},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wconditional_expression.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"},{"name":"../tool/constant","loc":{"line":5,"column":27,"index":192},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wconditional_expression.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/tool/constant.ts"},{"name":"./wexpression","loc":{"line":6,"column":30,"index":243},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wconditional_expression.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wexpression.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WConditionalExpression=void 0;const e=require(\"../../common/error\"),t=require(\"../tool/constant\"),i=require(\"./wexpression\");class n extends i.WExpression{constructor(e,t,i,n){super(n),this.condition=e,this.consequence=t,this.alternative=i}deduceType(i){const n=this.consequence.deduceType(i),o=this.alternative.deduceType(i);if(t.getNativeType(n)===t.getNativeType(o))return t.getNativeType(n);throw new e.EmitError(\"type mismatch at contional expression\")}isPure(){return this.condition.isPure()&&this.alternative.isPure()&&this.alternative.isPure()}emit(e){this.condition.emit(e),e.emitIns(t.Control.if,t.WType.u8,this.deduceType(e),this.location),this.consequence.emit(e),e.emitIns(t.Control.else,t.WType.none,0,this.location),this.alternative.emit(e),e.emitIns(t.Control.end,t.WType.none,0,this.location)}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.alternative=this.alternative.fold(),this.alternative.optimize(e),this.consequence=this.consequence.fold(),this.consequence.optimize(e)}}exports.WConditionalExpression=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":104}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":112}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":114}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":122}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":144}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":146}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":154}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":174}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":176}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":184}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":201}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":13},"generated":{"line":1,"column":207}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":44},"generated":{"line":1,"column":217}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":44},"generated":{"line":1,"column":219}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":231}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":12,"column":16},"generated":{"line":1,"column":243}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":12,"column":40},"generated":{"line":1,"column":245}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":13,"column":16},"generated":{"line":1,"column":247}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":13,"column":42},"generated":{"line":1,"column":249}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":252}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":258}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":261}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":266}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":15,"column":25},"generated":{"line":1,"column":276}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":16,"column":8},"generated":{"line":1,"column":278}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":16,"column":13},"generated":{"line":1,"column":283}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":16,"column":27},"generated":{"line":1,"column":295}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":297}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":302}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":17,"column":27},"generated":{"line":1,"column":314}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":20,"column":11},"generated":{"line":1,"column":316}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":20,"column":22},"generated":{"line":1,"column":327}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":330}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":14},"generated":{"line":1,"column":336}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":338}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":23},"generated":{"line":1,"column":343}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":35},"generated":{"line":1,"column":355}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":21,"column":46},"generated":{"line":1,"column":366}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":22,"column":14},"generated":{"line":1,"column":369}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":1,"column":371}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":22,"column":23},"generated":{"line":1,"column":376}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":22,"column":35},"generated":{"line":1,"column":388}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":22,"column":46},"generated":{"line":1,"column":399}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":402}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":1,"column":405}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":1,"column":407}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":26},"generated":{"line":1,"column":421}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":426}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":428}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":23,"column":47},"generated":{"line":1,"column":442}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":1,"column":445}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":24,"column":19},"generated":{"line":1,"column":452}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":24,"column":19},"generated":{"line":1,"column":454}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":24,"column":33},"generated":{"line":1,"column":468}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":1,"column":471}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":26,"column":18},"generated":{"line":1,"column":477}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":1,"column":481}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":1,"column":483}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":26,"column":32},"generated":{"line":1,"column":493}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":534}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":543}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":1,"column":550}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":20},"generated":{"line":1,"column":555}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":1,"column":565}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":42},"generated":{"line":1,"column":575}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":47},"generated":{"line":1,"column":580}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":30,"column":59},"generated":{"line":1,"column":592}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":602}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":607}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":619}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":34,"column":11},"generated":{"line":1,"column":628}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":34,"column":16},"generated":{"line":1,"column":633}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":636}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":35,"column":13},"generated":{"line":1,"column":641}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":35,"column":23},"generated":{"line":1,"column":651}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":35,"column":28},"generated":{"line":1,"column":656}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":659}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":661}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":18},"generated":{"line":1,"column":669}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":18},"generated":{"line":1,"column":671}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":26},"generated":{"line":1,"column":679}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":30},"generated":{"line":1,"column":682}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":30},"generated":{"line":1,"column":684}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":36},"generated":{"line":1,"column":690}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":40},"generated":{"line":1,"column":693}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":45},"generated":{"line":1,"column":698}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":56},"generated":{"line":1,"column":709}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":60},"generated":{"line":1,"column":712}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":36,"column":65},"generated":{"line":1,"column":717}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":1,"column":727}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":732}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":744}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":1,"column":749}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":752}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":754}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":762}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":764}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":772}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":32},"generated":{"line":1,"column":777}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":32},"generated":{"line":1,"column":779}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":785}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":44},"generated":{"line":1,"column":790}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":47},"generated":{"line":1,"column":792}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":38,"column":52},"generated":{"line":1,"column":797}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":807}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":812}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":1,"column":824}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":39,"column":30},"generated":{"line":1,"column":829}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":832}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":834}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":1,"column":842}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":1,"column":844}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":1,"column":852}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":31},"generated":{"line":1,"column":856}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":31},"generated":{"line":1,"column":858}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":37},"generated":{"line":1,"column":864}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":1,"column":869}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":47},"generated":{"line":1,"column":871}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":40,"column":52},"generated":{"line":1,"column":876}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":886}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":895}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":898}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":903}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":913}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":44,"column":30},"generated":{"line":1,"column":918}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":44,"column":40},"generated":{"line":1,"column":928}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":935}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":1,"column":940}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":1,"column":950}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":1,"column":959}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":962}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":46,"column":13},"generated":{"line":1,"column":967}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":46,"column":27},"generated":{"line":1,"column":979}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":984}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":46,"column":44},"generated":{"line":1,"column":996}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":1003}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":47,"column":13},"generated":{"line":1,"column":1008}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":47,"column":25},"generated":{"line":1,"column":1020}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":47,"column":34},"generated":{"line":1,"column":1029}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":1032}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":48,"column":13},"generated":{"line":1,"column":1037}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":1049}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":48,"column":32},"generated":{"line":1,"column":1054}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":48,"column":44},"generated":{"line":1,"column":1066}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":1,"column":1073}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":49,"column":13},"generated":{"line":1,"column":1078}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":49,"column":25},"generated":{"line":1,"column":1090}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":49,"column":34},"generated":{"line":1,"column":1099}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1103}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1111}},{"source":"../src/wasm/expression/wconditional_expression.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1134}}],"sources":{"../src/wasm/expression/wconditional_expression.ts":"import {EmitError} from \"../../common/error\";\nimport {SourceLocation} from \"../../common/node\";\nimport {Emitter} from \"../emitter/emitter\";\nimport {Control, getNativeType, WType} from \"../tool/constant\";\nimport {WExpression} from \"./wexpression\";\n\nexport class WConditionalExpression extends WExpression {\n    public condition: WExpression;\n    public consequence: WExpression;\n    public alternative: WExpression;\n\n    constructor(condition: WExpression, consequence: WExpression,\n                alternative: WExpression, location: SourceLocation) {\n        super(location);\n        this.condition = condition;\n        this.consequence = consequence;\n        this.alternative = alternative;\n    }\n\n    public deduceType(e: Emitter): WType {\n        const l = this.consequence.deduceType(e);\n        const r = this.alternative.deduceType(e);\n        if (getNativeType(l) === getNativeType(r)) {\n            return getNativeType(l);\n        } else {\n            throw new EmitError(`type mismatch at contional expression`);\n        }\n    }\n    public isPure(): boolean {\n        return this.condition.isPure() && this.alternative.isPure() &&\n            this.alternative.isPure();\n    }\n\n    public emit(e: Emitter): void {\n        this.condition.emit(e);\n        e.emitIns(Control.if, WType.u8, this.deduceType(e), this.location);\n        this.consequence.emit(e);\n        e.emitIns(Control.else, WType.none, 0, this.location);\n        this.alternative.emit(e);\n        e.emitIns(Control.end, WType.none, 0,  this.location);\n\n    }\n    public optimize(e: Emitter): void {\n        this.condition = this.condition.fold();\n        this.condition.optimize(e);\n        this.alternative = this.alternative.fold();\n        this.alternative.optimize(e);\n        this.consequence = this.consequence.fold();\n        this.consequence.optimize(e);\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"91b2ca98111cf91e0083e47947464d31","cacheData":{"env":{}}}