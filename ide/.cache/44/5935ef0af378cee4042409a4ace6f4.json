{"id":"i2nu","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"../../common/error","loc":{"line":4,"column":24,"index":133},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/case_statement.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"},{"name":"../../type/primitive_type","loc":{"line":5,"column":33,"index":189},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/case_statement.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/type/primitive_type.ts"},{"name":"../../wasm","loc":{"line":6,"column":23,"index":242},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/case_statement.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/index.ts"},{"name":"../scope","loc":{"line":7,"column":24,"index":281},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/case_statement.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/scope.ts"},{"name":"./statement","loc":{"line":8,"column":28,"index":322},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/case_statement.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/codegen/statement/statement.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.CaseStatement=void 0;const e=require(\"../../common/error\"),t=require(\"../../type/primitive_type\"),n=require(\"../../wasm\"),r=require(\"../scope\"),s=require(\"./statement\");class o extends s.Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}codegen(s){if(null===s.currentFuncContext.switchContext)throw new e.SyntaxError(\"case out of switch\",this);const o={value:null,statements:[]};if(s.currentFuncContext.switchContext.cases.push(o),null!==this.test){const i=this.test.codegen(s);if(i.expr instanceof r.FunctionLookUpResult)throw new e.SyntaxError(\"func name not support\",this);if(i.expr=i.expr.fold(),!(i.expr instanceof n.WConst&&i.type instanceof t.IntegerType))throw new e.SyntaxError(\"case value must be integer or enum\",this);o.value=i.expr}s.setStatementContainer(o.statements),s.currentFuncContext.blockLevel--,this.body.codegen(s)}}exports.CaseStatement=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":95}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":103}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":113}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":135}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":137}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":145}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":174}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":176}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":184}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":198}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":200}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":208}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":220}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":222}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":230}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":245}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":251}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":35},"generated":{"line":1,"column":261}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":35},"generated":{"line":1,"column":263}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":273}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":13,"column":16},"generated":{"line":1,"column":285}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":13,"column":42},"generated":{"line":1,"column":287}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":1,"column":289}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":292}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":298}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":301}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":306}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":15,"column":20},"generated":{"line":1,"column":311}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":16,"column":8},"generated":{"line":1,"column":313}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":16,"column":13},"generated":{"line":1,"column":318}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":323}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":325}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":19,"column":19},"generated":{"line":1,"column":333}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":336}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":20,"column":53},"generated":{"line":1,"column":339}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":346}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":348}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":20,"column":35},"generated":{"line":1,"column":367}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":1,"column":381}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":387}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":391}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":393}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":34},"generated":{"line":1,"column":405}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":21,"column":56},"generated":{"line":1,"column":426}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":432}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":14},"generated":{"line":1,"column":438}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":37},"generated":{"line":1,"column":440}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":38},"generated":{"line":1,"column":441}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":45},"generated":{"line":1,"column":447}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":51},"generated":{"line":1,"column":452}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":23,"column":63},"generated":{"line":1,"column":463}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":467}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":470}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":12},"generated":{"line":1,"column":472}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":31},"generated":{"line":1,"column":491}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":45},"generated":{"line":1,"column":505}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":51},"generated":{"line":1,"column":511}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":24,"column":56},"generated":{"line":1,"column":516}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":25,"column":26},"generated":{"line":1,"column":519}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":25,"column":12},"generated":{"line":1,"column":526}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":25,"column":17},"generated":{"line":1,"column":531}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":25,"column":32},"generated":{"line":1,"column":536}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":1,"column":537}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":18},"generated":{"line":1,"column":543}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":25},"generated":{"line":1,"column":545}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":550}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":35},"generated":{"line":1,"column":555}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":563}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":1,"column":566}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":27,"column":16},"generated":{"line":1,"column":569}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":571}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":27,"column":37},"generated":{"line":1,"column":587}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":27,"column":37},"generated":{"line":1,"column":589}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":16},"generated":{"line":1,"column":610}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":22},"generated":{"line":1,"column":616}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":26},"generated":{"line":1,"column":620}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":26},"generated":{"line":1,"column":622}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":38},"generated":{"line":1,"column":634}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":28,"column":63},"generated":{"line":1,"column":658}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":664}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":1,"column":667}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":1,"column":669}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":30,"column":24},"generated":{"line":1,"column":674}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":676}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":30,"column":34},"generated":{"line":1,"column":681}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":690}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":692}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":39},"generated":{"line":1,"column":708}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":39},"generated":{"line":1,"column":710}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":52},"generated":{"line":1,"column":718}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":57},"generated":{"line":1,"column":720}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":73},"generated":{"line":1,"column":736}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":31,"column":73},"generated":{"line":1,"column":738}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":16},"generated":{"line":1,"column":751}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":22},"generated":{"line":1,"column":757}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":761}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":763}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":38},"generated":{"line":1,"column":775}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":32,"column":76},"generated":{"line":1,"column":812}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":34,"column":12},"generated":{"line":1,"column":818}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":34,"column":20},"generated":{"line":1,"column":820}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":34,"column":28},"generated":{"line":1,"column":826}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":34,"column":33},"generated":{"line":1,"column":828}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":833}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":835}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":36,"column":34},"generated":{"line":1,"column":857}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":36,"column":42},"generated":{"line":1,"column":859}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":1,"column":871}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":37,"column":12},"generated":{"line":1,"column":873}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":1,"column":892}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":905}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":910}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":915}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":923}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":927}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":935}},{"source":"../src/codegen/statement/case_statement.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":949}}],"sources":{"../src/codegen/statement/case_statement.ts":"import {SyntaxError} from \"../../common/error\";\nimport {SourceLocation} from \"../../common/node\";\nimport {IntegerType} from \"../../type/primitive_type\";\nimport {WConst} from \"../../wasm\";\nimport {CaseContext, CompileContext} from \"../context\";\nimport {Expression} from \"../expression/expression\";\nimport {FunctionLookUpResult} from \"../scope\";\nimport {Statement} from \"./statement\";\n\nexport class CaseStatement extends Statement {\n    public test: Expression;\n    public body: Statement;\n    constructor(location: SourceLocation, test: Expression, body: Statement) {\n        super(location);\n        this.test = test;\n        this.body = body;\n    }\n\n    public codegen(ctx: CompileContext): void {\n        if (ctx.currentFuncContext.switchContext === null) {\n            throw new SyntaxError(`case out of switch`, this);\n        }\n        const caseCtx: CaseContext = {value: null, statements: []};\n        ctx.currentFuncContext.switchContext.cases.push(caseCtx);\n        if (this.test !== null) {\n            const expr = this.test.codegen(ctx);\n            if (expr.expr instanceof FunctionLookUpResult) {\n                throw new SyntaxError(`func name not support`, this);\n            }\n            expr.expr = expr.expr.fold();\n            if (!(expr.expr instanceof WConst) || !(expr.type instanceof IntegerType)) {\n                throw new SyntaxError(`case value must be integer or enum`, this);\n            }\n            caseCtx.value = expr.expr;\n        }\n        ctx.setStatementContainer(caseCtx.statements);\n        ctx.currentFuncContext.blockLevel--;\n        this.body.codegen(ctx);\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"bf110bb5ac4d041533e421e7dd85457e","cacheData":{"env":{}}}