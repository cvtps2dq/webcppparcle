{"id":"GMhh","dependencies":[{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/tsconfig.json","includedInParent":true,"mtime":1722523452290},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/package.json","includedInParent":true,"mtime":1722527743495},{"name":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/ide/.browserslistrc","includedInParent":true,"mtime":1722523452209},{"name":"..","loc":{"line":4,"column":20,"index":121},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wcall.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/index.ts"},{"name":"../../common/error","loc":{"line":5,"column":24,"index":152},"parent":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/wasm/expression/wcall.ts","resolved":"/Users/tyamackovm/Desktop/Work/Start1T/webcpp/webcppparcle/src/common/error.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WCall=void 0;const e=require(\"..\"),t=require(\"../../common/error\");class r extends e.WExpression{constructor(e,t,r,s){super(s),this.target=e,this.argument=t,this.afterStatements=r}emit(t){this.argument.map(e=>e.emit(t)),t.emitIns(e.Control.call,e.WType.u32,t.ctx.getFuncInfo(this.target).id,this.location),this.afterStatements.map(e=>e.emit(t))}deduceType(r){const s=r.ctx.getFuncInfo(this.target).type,i=this.argument.filter(t=>!(t instanceof e.WFakeExpression)).map(e=>e.deduceType(r));if(s.parameters.map(t=>e.getNativeType(t)).join(\",\")!==i.map(t=>e.getNativeType(t)).join(\",\"))throw new t.EmitError(\"type mismatch at call\");return 0===s.returnTypes.length?e.WType.none:s.returnTypes[0]}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}}exports.WCall=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":87}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":89}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":111}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":113}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":143}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":13},"generated":{"line":1,"column":149}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":27},"generated":{"line":1,"column":159}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":27},"generated":{"line":1,"column":161}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":1,"column":173}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":185}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":10,"column":32},"generated":{"line":1,"column":187}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":10,"column":57},"generated":{"line":1,"column":189}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":10,"column":88},"generated":{"line":1,"column":191}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":194}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":200}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":203}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":12,"column":13},"generated":{"line":1,"column":208}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":12,"column":22},"generated":{"line":1,"column":215}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":217}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":13,"column":13},"generated":{"line":1,"column":222}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":13,"column":24},"generated":{"line":1,"column":231}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":233}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":14,"column":13},"generated":{"line":1,"column":238}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":14,"column":31},"generated":{"line":1,"column":254}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":17,"column":11},"generated":{"line":1,"column":256}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":261}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":264}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":1,"column":269}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":22},"generated":{"line":1,"column":278}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":27},"generated":{"line":1,"column":282}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":33},"generated":{"line":1,"column":285}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":35},"generated":{"line":1,"column":287}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":18,"column":40},"generated":{"line":1,"column":292}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":296}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":10},"generated":{"line":1,"column":298}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":18},"generated":{"line":1,"column":306}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":18},"generated":{"line":1,"column":308}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":26},"generated":{"line":1,"column":316}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":32},"generated":{"line":1,"column":321}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":32},"generated":{"line":1,"column":323}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":38},"generated":{"line":1,"column":329}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":43},"generated":{"line":1,"column":333}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":45},"generated":{"line":1,"column":335}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":49},"generated":{"line":1,"column":339}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":61},"generated":{"line":1,"column":351}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":66},"generated":{"line":1,"column":356}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":74},"generated":{"line":1,"column":364}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":78},"generated":{"line":1,"column":367}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":19,"column":83},"generated":{"line":1,"column":372}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":382}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":387}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":29},"generated":{"line":1,"column":403}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":34},"generated":{"line":1,"column":407}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":410}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":42},"generated":{"line":1,"column":412}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":20,"column":47},"generated":{"line":1,"column":417}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":421}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":23,"column":22},"generated":{"line":1,"column":432}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":435}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":14},"generated":{"line":1,"column":441}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":25},"generated":{"line":1,"column":443}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":27},"generated":{"line":1,"column":445}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":31},"generated":{"line":1,"column":449}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":43},"generated":{"line":1,"column":461}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":48},"generated":{"line":1,"column":466}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":24,"column":56},"generated":{"line":1,"column":474}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":25,"column":14},"generated":{"line":1,"column":479}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":25,"column":26},"generated":{"line":1,"column":481}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":25,"column":31},"generated":{"line":1,"column":486}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":495}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":26,"column":21},"generated":{"line":1,"column":502}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":507}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":520}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":26,"column":43},"generated":{"line":1,"column":522}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":540}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":27,"column":18},"generated":{"line":1,"column":544}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":27,"column":24},"generated":{"line":1,"column":547}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":27,"column":26},"generated":{"line":1,"column":549}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":27,"column":37},"generated":{"line":1,"column":560}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":564}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":12},"generated":{"line":1,"column":567}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":569}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":32},"generated":{"line":1,"column":580}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":37},"generated":{"line":1,"column":584}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":43},"generated":{"line":1,"column":587}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":43},"generated":{"line":1,"column":589}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":57},"generated":{"line":1,"column":603}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":61},"generated":{"line":1,"column":607}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":28,"column":66},"generated":{"line":1,"column":612}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":619}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":26},"generated":{"line":1,"column":621}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":31},"generated":{"line":1,"column":625}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":37},"generated":{"line":1,"column":628}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":37},"generated":{"line":1,"column":630}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":51},"generated":{"line":1,"column":644}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":55},"generated":{"line":1,"column":648}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":29,"column":60},"generated":{"line":1,"column":653}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":1,"column":658}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":30,"column":18},"generated":{"line":1,"column":664}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":668}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":670}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":30,"column":32},"generated":{"line":1,"column":680}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":705}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":32,"column":44},"generated":{"line":1,"column":712}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":716}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":32,"column":21},"generated":{"line":1,"column":718}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":32,"column":33},"generated":{"line":1,"column":730}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":33,"column":19},"generated":{"line":1,"column":737}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":33,"column":19},"generated":{"line":1,"column":739}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":33,"column":25},"generated":{"line":1,"column":745}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":35,"column":19},"generated":{"line":1,"column":750}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":35,"column":28},"generated":{"line":1,"column":752}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":35,"column":40},"generated":{"line":1,"column":764}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":39,"column":11},"generated":{"line":1,"column":767}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":774}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":781}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":1,"column":786}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":24},"generated":{"line":1,"column":795}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":800}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":38},"generated":{"line":1,"column":809}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":1,"column":813}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":49},"generated":{"line":1,"column":816}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":40,"column":51},"generated":{"line":1,"column":818}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":41,"column":15},"generated":{"line":1,"column":826}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":44,"column":11},"generated":{"line":1,"column":831}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":840}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":847}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":850}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":858}},{"source":"../src/wasm/expression/wcall.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":864}}],"sources":{"../src/wasm/expression/wcall.ts":"import {Control, Emitter, getNativeType, WExpression, WFakeExpression, WStatement, WType} from \"..\";\nimport {EmitError} from \"../../common/error\";\nimport {SourceLocation} from \"../../common/node\";\n\nexport class WCall extends WExpression {\n    public target: string;\n    public argument: WExpression[];\n    public afterStatements: WStatement[];\n\n    constructor(target: string, argument: WExpression[], afterStatements: WStatement[], location: SourceLocation) {\n        super(location);\n        this.target = target;\n        this.argument = argument;\n        this.afterStatements = afterStatements;\n    }\n\n    public emit(e: Emitter): void {\n        this.argument.map((x) => x.emit(e));\n        e.emitIns(Control.call, WType.u32, e.ctx.getFuncInfo(this.target).id, this.location);\n        this.afterStatements.map((x) => x.emit(e));\n    }\n\n    public deduceType(e: Emitter): WType {\n        const funcType = e.ctx.getFuncInfo(this.target).type;\n        const arguTypes = this.argument\n            .filter((x) => ! (x instanceof WFakeExpression))\n            .map((x) => x.deduceType(e));\n        if (funcType.parameters.map((x) => getNativeType(x)).join(\",\")\n            !== arguTypes.map((x) => getNativeType(x)).join(\",\")) {\n            throw new EmitError(`type mismatch at call`);\n        }\n        if (funcType.returnTypes.length === 0) {\n            return WType.none;\n        } else {\n            return funcType.returnTypes[0];\n        }\n    }\n\n    public fold(): WExpression {\n        this.argument = this.argument.map((x) => x.fold());\n        return this;\n    }\n\n    public isPure(): boolean {\n        return false;\n    }\n\n}\n"},"lineCount":null}},"error":null,"hash":"2ecf0f6c0304b9d395be12af81885172","cacheData":{"env":{}}}